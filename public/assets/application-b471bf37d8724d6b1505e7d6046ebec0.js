/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
function addingForm(e,t,n,o){lt=1+Math.max(t.length,n.length);var s="<table id=laddtable_"+e+" border=0>\n";for(s+="<tr>\n",i=0;i<lt-t.length;i++)s+="<td> </td>\n";for(i=0;i<t.length;i++)s+="<td>"+t[i]+"</td>\n";for(s+="</tr>\n",s+="<tr>\n",i=0;i<lt-n.length;i++)s+=0==i?"<td>"+o+"</td>\n":"<td> </td>\n";for(i=0;i<n.length;i++)s+="<td>"+n[i]+"</td>\n";for(s+="</tr>\n",s+="<tr>\n",i=0;lt>i;i++)s+="<td><input type=text class="+e+"_linps id="+e+"_lin"+i+' maxlength=1 style="width:15px; height:20px"></td>\n';s+="</tr>\n",s+="</table>",$("#ladding_"+e).append(s),$("#laddtable_"+e).attr("style","background-color:transparent; font:10pt Courier;"),$("#"+e+"_lin"+(lt-1)).select(),tot=[],$("."+e+"_linps").keypress(function(t){String.fromCharCode(t.keyCode),t.keyCode>47&&t.keyCode<58&&(tot[$(this).attr("id")[$(this).attr("id").length-1]]=String.fromCharCode(t.keyCode),$(this).attr("value",String.fromCharCode(t.keyCode)),$("#"+e).attr("value",tot.join("")))});for(var r=1;lt>r;r++)$("#"+e+"_lin"+r).keypress({j:r},function(t){$("#"+e+"_lin"+(t.data.j-1)).select()})}function badges_look(){for(bclr=["gold","silver","bronze"],i=0;i<$(".badges").length;i++)$(".badges").eq(i).css("top",10*parseInt(i/5)-20),$(".badges").eq(i).css("left",10*parseInt(i%5));for($("#get_badge").parent().hover(function(){for(i=0;i<$(".badges").length;i++)$(".badges").eq(i).css("top",20*parseInt(i/5)-10-20),$(".badges").eq(i).css("left",20*parseInt(i%5)-10)},function(){for(i=0;i<$(".badges").length;i++)$(".badges").eq(i).css("top",10*parseInt(i/5)-20),$(".badges").eq(i).css("left",10*parseInt(i%5))}),i=0;i<$(".badgesbw").length;i++)$(".badgesbw").eq(i).css("top",10*parseInt(i/5)-20),$(".badgesbw").eq(i).css("left",10*parseInt(i%5));$("#get_badge2").parent().hover(function(){for(i=0;i<$(".badgesbw").length;i++)$(".badgesbw").eq(i).css("top",20*parseInt(i/5)-10-20),$(".badgesbw").eq(i).css("left",20*parseInt(i%5)-10)},function(){for(i=0;i<$(".badgesbw").length;i++)$(".badgesbw").eq(i).css("top",10*parseInt(i/5)-20),$(".badgesbw").eq(i).css("left",10*parseInt(i%5))})}function webkit(){$.browser.webkit||($("body").append("<div id=dimmer onclick='hide_webkit()' style='display:block'></div>"),$("#dimmer").append("<div id='chrome_div'></div>"),$("#chrome_div").append("<a href='http://www.google.com/chrome'><img class='chrome_icon' src='/assets/chrome_icon.png'/></a>"),$("#chrome_div").append("<a href='http://google.com/chrome'><p class='chrome_text'>Click Here to Download Google Chrome for the Best SmarterGrades Experience</p></a>"))}function hide_webkit(){$("#dimmer").hide()}function commaBox(e){$("#"+e).click(function(){"0"==$("#"+e).attr("value")?($("#"+e).attr("value","1"),$("#"+e).addClass("commachecked")):($("#"+e).attr("value","0"),$("#"+e).removeClass("commachecked"))})}function initConcepts(){$("li.stat li").each(function(){initConceptStat($(this)),$(this).tooltip()})}function initConceptStat(e){var t=e.children("div").first(),n=t.attr("data-percent");e.addClass("stat-bar"),void 0==n?(t.css("background-color","gray"),t.css("width","100%")):t.css("width",""+n+"%")}function hideExplanation(){$("#problem_overlay .explanation").hide(),$("#problem_overlay .problem").show(),$("#hide_explanation").replaceWith('<a class="button-blue" id="see_explanation" href="#" onclick="showExplanation(); return false;">See Explanation</a>'),initProblem(),closeWithDimmer()}function showExplanation(){$("#problem_overlay .explanation").show(),$("#problem_overlay .problem").hide(),$("#see_explanation").replaceWith('<a class="button-blue" id="hide_explanation" href="#" onclick="hideExplanation(); return false;">Stop Explanation</a>'),initProblem(),closeWithDimmer()}/*!
 * jQuery Box Lid Plugin v0.1
 * https://github.com/jimjh/box-lid
 *
 * Copyright 2013 Jiunn Haur Lim
 * Released under the MIT License
 *
 * Usage:
 *    $('.box-lid-menu').boxLid();
 */
function box_lid(){!function(e){"use strict";function t(t){t=e.extend({container:"body",flag:"box-lid-open"},t);var n=e(t.container);this.open=function(){n.data("box-lid-timer",setTimeout(function(){n.addClass(t.flag)},100))},this.close=function(){clearTimeout(n.data("box-lid-timer")),n.removeClass(t.flag)}}e.fn.boxLid=function(n){var i=new t(n);return this.each(function(){e(this).hover(i.open,i.close)})}}(jQuery)}function jqwalk(){!function(e,t,n,o){function s(){var t=N;if(0!=P||!A||g())if("modal"!=t.steps[P].popup.type&&"nohighlight"!=t.steps[P].popup.type){if(O.html(""),""==t.steps[P].wrapper||t.steps[P].wrapper==o)return alert('Your walkthrough position is: "'+t.steps[P].popup.type+'" but wrapper is empty or undefined. Please check your "'+j+'" wrapper parameter.'),void 0;var i=C(e(t.steps[P].wrapper).offset().top),s=C(e(t.steps[P].wrapper).offset().left),c=C(e(t.steps[P].wrapper).innerWidth())||C(e(t.steps[P].wrapper).width()),d=C(e(t.steps[P].wrapper).innerHeight())||C(e(t.steps[P].wrapper).height()),u=_(t.steps[P].margin,"top"),h=_(t.steps[P].margin,"right"),f=_(t.steps[P].margin,"bottom"),p=_(t.steps[P].margin,"left"),m=30,v="",b="",x={height:C(parseInt(i)-(parseInt(u)+m))},w={top:x.height,width:C(parseInt(s)-(parseInt(p)+m)),height:C(parseInt(d)+2*m+parseInt(u)+parseInt(f))};t.steps[P].overlay==o||t.steps[P].overlay?v="overlay":(v="noOverlay",b="killOverlay");{e('<div id="overlayTop" class="'+v+'"></div>').css(x).appendTo(O),e('<div id="overlayLeft" class="'+v+'"></div>').css(w).appendTo(O)}if(t.steps[P].accessable)var T={top:x.height,left:w.width,topCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h))}},k={topAccessable:{position:"absolute",top:x.height,left:w.width,topCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h))}},middleAccessable:{position:"absolute",top:C(parseInt(x.height)+m),left:w.width,middleLeft:{height:C(parseInt(d)+parseInt(u)+parseInt(f))},middleRight:{height:C(parseInt(d)+parseInt(u)+parseInt(f)),right:C(parseInt(c)+m+parseInt(h)+parseInt(p))}},bottomAccessable:{left:w.width,top:C(parseInt(x.height)+m+parseInt(d)+parseInt(u)+parseInt(f)),bottomCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h))}}},S=e('<div id="topAccessable" style="position:'+k.topAccessable.position+"; top:"+k.topAccessable.top+";left:"+k.topAccessable.left+'"><div id="topLeft" class="'+b+'"></div><div id="topCenter" class="'+b+'" style="width:'+k.topAccessable.topCenter.width+'"></div><div id="topRight" class="'+b+'"></div></div><div id="middleAccessable" class="'+b+'" style="clear: left;position:'+k.middleAccessable.position+"; top:"+k.middleAccessable.top+";left:"+k.middleAccessable.left+';"><div id="middleLeft" class="'+b+'" style="height:'+k.middleAccessable.middleLeft.height+';"></div><div id="middleRight" class="'+b+'" style="position:absolute;right:-'+k.middleAccessable.middleRight.right+";height:"+k.middleAccessable.middleRight.height+';"></div></div><div id="bottomAccessable" style="clear: left;position:absolute;left:'+k.bottomAccessable.left+";top:"+k.bottomAccessable.top+';"><div id="bottomLeft" class="'+b+'"></div><div id="bottomCenter" class="'+b+'" style="width:'+k.bottomAccessable.bottomCenter.width+';"></div><div id="bottomRight" class="'+b+'"></div></div>').appendTo(O);else{var T={top:x.height,left:w.width,topCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h))},middleLeft:{height:C(parseInt(d)+parseInt(u)+parseInt(f))},middleCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h)),height:C(parseInt(d)+parseInt(u)+parseInt(f))},middleRight:{height:C(parseInt(d)+parseInt(u)+parseInt(f))},bottomCenter:{width:C(parseInt(c)+parseInt(p)+parseInt(h))}},S=e('<div id="highlightedArea"></div>').css(T).appendTo(O);S.html('<div><div id="topLeft" class="'+b+'"></div><div id="topCenter" class="'+b+'" style="width:'+T.topCenter.width+';"></div><div id="topRight" class="'+b+'"></div></div><div style="clear: left;"><div id="middleLeft" class="'+b+'" style="height:'+T.middleLeft.height+';"></div><div id="middleCenter" class="'+b+'" style="width:'+T.middleCenter.width+";height:"+T.middleCenter.height+'">&nbsp;</div><div id="middleRight" class="'+b+'" style="height:'+T.middleRight.height+';"></div></div><div style="clear: left;"><div id="bottomLeft" class="'+b+'"></div><div id="bottomCenter" class="'+b+'" style="width:'+T.bottomCenter.width+';"></div><div id="bottomRight" class="'+b+'"></div></div>')}{var E=t.steps[P].accessable?parseInt(k.topAccessable.topCenter.width)+2*m:parseInt(T.topCenter.width)+2*m,M={left:C(parseInt(w.width)+E),height:w.height,top:w.top,width:C(y()-(parseInt(w.width)+E))},$=(e('<div id="overlayRight" class="'+v+'"></div>').css(M).appendTo(O),{height:C(e(n).height()-(parseInt(x.height)+parseInt(w.height))),top:C(parseInt(x.height)+parseInt(w.height))});e('<div id="overlayBottom" class="'+v+'"></div>').css($).appendTo(O)}e("#jpWalkthrough").length&&e("#jpWalkthrough").remove(),O.appendTo("body").show(),t.steps[P].accessable?a(!0):a(!1)}else"modal"==t.steps[P].popup.type?(e("#jpWalkthrough").length&&e("#jpWalkthrough").remove(),t.steps[P].overlay==o||t.steps[P].overlay?r(!0):r(!1)):(e("#jpWalkthrough").length&&e("#jpWalkthrough").remove(),t.steps[P].overlay==o||t.steps[P].overlay?l(!0):l(!1))}function r(t){var n=N;t?L.appendTo("body").show():e("#jpwOverlay").length&&e("#jpwOverlay").remove();var i=w(parseInt(n.steps[P].popup.contentRotation));H.css({position:"absolute",left:"50%",top:"50%","margin-left":-(parseInt(n.steps[P].popup.width)+60)/2+"px","z-index":"9999"});var o=e('<div id="tooltipTop"><div id="topLeft"></div><div id="topRight"></div></div><div id="tooltipInner"></div><div id="tooltipBottom"><div id="bottomLeft"></div><div id="bottomRight"></div></div>');O.html(""),H.html("").append(o).wrapInner('<div id="tooltipWrapper" style="width:'+C(parseInt(n.steps[P].popup.width)+30)+'"></div>').append('<div id="bottom-scratch"></div>').appendTo(O),O.appendTo("body"),e("#tooltipWrapper").css(i),e(n.steps[P].popup.content).clone().appendTo("#tooltipInner").show(),H.css("margin-top",-(H.height()/2)+"px"),O.show()}function a(t){var n,i,s,r,a=N,l=(""==a.steps[P].popup.width?300:a.steps[P].popup.width,30),c=t?e("#topAccessable").innerWidth()+2*l||e("#topAccessable").width()+2*l:e("#highlightedArea").innerWidth()||e("#highlightedArea").width(),d=t?e("#middleAccessable").innerHeight()+2*l||e("#middleAccessable").height()+2*l:e("#highlightedArea").innerHeight()||e("#highlightedArea").height(),u=t?e("#topAccessable").offset().top:e("#highlightedArea").offset().top,h=t?e("#topAccessable").offset().left:e("#highlightedArea").offset().left,f=30,p=a.steps[P].popup.contentRotation==o||0==parseInt(a.steps[P].popup.contentRotation)?x():w(parseInt(a.steps[P].popup.contentRotation));e("#jpwOverlay").length&&e("#jpwOverlay").remove();var m=e('<div id="tooltipTop"><div id="topLeft"></div><div id="topRight"></div></div><div id="tooltipInner"></div><div id="tooltipBottom"><div id="bottomLeft"></div><div id="bottomRight"></div></div>');switch(H.html("").css({marginLeft:"0","margin-top":"0",position:"absolute","z-index":"9999"}).append(m).wrapInner('<div id="tooltipWrapper" style="width:'+C(parseInt(a.steps[P].popup.width)+30)+'"></div>').appendTo(O),a.steps[P].popup.draggable&&H.append('<div id="drag-area" class="draggable-area"></div>'),O.appendTo("body").show(),e("#tooltipWrapper").css(p),e(a.steps[P].popup.content).clone().appendTo("#tooltipInner").show(),H.append('<span class="'+a.steps[P].popup.position+'">&nbsp;</span>'),a.steps[P].popup.position){case"top":n=u-(H.height()+f/2)+parseInt(a.steps[P].popup.offsetVertical)-86,i=t?h+c/2-H.width()/2-40+parseInt(a.steps[P].popup.offsetHorizontal):h+c/2-H.width()/2-5+parseInt(a.steps[P].popup.offsetHorizontal),r=H.width()/2-f,s="";break;case"right":n=u-f/2+parseInt(a.steps[P].popup.offsetVertical),i=h+c+f/2+parseInt(a.steps[P].popup.offsetHorizontal)+105,s=f,r="";break;case"bottom":t?(n=u+d+parseInt(a.steps[P].popup.offsetVertical)+86,i=h+c/2-H.width()/2-40+parseInt(a.steps[P].popup.offsetHorizontal)):(n=u+d+parseInt(a.steps[P].popup.offsetVertical)+86,i=h+c/2-H.width()/2-5+parseInt(a.steps[P].popup.offsetHorizontal)),r=H.width()/2-f,s="";break;case"left":n=u-f/2+parseInt(a.steps[P].popup.offsetVertical),i=h-H.width()-f+parseInt(a.steps[P].popup.offsetHorizontal)-105,s=f,r=""}e("#jpwTooltip span."+a.steps[P].popup.position).css({left:C(r)}),H.css({top:C(n),left:C(i)}),O.show()}function l(t){var n,i,o,s,r=N,a=e(r.steps[P].wrapper).offset().top,l=e(r.steps[P].wrapper).offset().left,c=e(r.steps[P].wrapper).width(),d=e(r.steps[P].wrapper).height(),u=30;t?L.appendTo("body").show():e("#jpwOverlay").length&&e("#jpwOverlay").remove(),H.css(x());var h="undefined"==r.steps[P].popup.contentRotation||0==r.steps[P].popup.contentRotation?"":w(parseInt(r.steps[P].popup.contentRotation));H.css({position:"absolute","margin-left":"0px","margin-top":"0px","z-index":"9999"});var f=e('<div id="tooltipTop"><div id="topLeft"></div><div id="topRight"></div></div><div id="tooltipInner"></div><div id="tooltipBottom"><div id="bottomLeft"></div><div id="bottomRight"></div></div>');switch(O.html(""),H.html("").append(f).wrapInner('<div id="tooltipWrapper" style="width:'+C(parseInt(r.steps[P].popup.width)+30)+'"></div>').appendTo(O),r.steps[P].popup.draggable&&H.append('<div id="drag-area" class="draggable-area"></div>'),O.appendTo("body"),e("#tooltipWrapper").css(h),e(r.steps[P].popup.content).clone().appendTo("#tooltipInner").show(),H.append('<span class="'+r.steps[P].popup.position+'">&nbsp;</span>'),r.steps[P].popup.position){case"top":n=a-(H.height()+u/2)+parseInt(r.steps[P].popup.offsetVertical)-86,i=l+c/2-H.width()/2-5+parseInt(r.steps[P].popup.offsetHorizontal),s=H.width()/2-u,o="";break;case"right":n=a-u/2+parseInt(r.steps[P].popup.offsetVertical),i=l+c+u/2+parseInt(r.steps[P].popup.offsetHorizontal)+105,o=u,s="";break;case"bottom":n=a+d+parseInt(r.steps[P].popup.offsetVertical)+86,i=l+c/2-H.width()/2-5+parseInt(r.steps[P].popup.offsetHorizontal),s=H.width()/2-u,o="";break;case"left":n=a-u/2+parseInt(r.steps[P].popup.offsetVertical),i=l-H.width()-u+parseInt(r.steps[P].popup.offsetHorizontal)-105,o=u,s=""}e("#jpwTooltip span."+r.steps[P].popup.position).css({left:C(s)}),H.css({top:C(n),left:C(i)}),O.show()}function c(){var n=N;if(n.steps[P].autoScroll||n.steps[P].autoScroll==o)if("modal"!=n.steps[P].popup.position){{var i=e(t).height()||e(t).innerHeight(),s=H.offset().top,r=H.height()||H.innerHeight();e("#overlayTop").height()}e("html,body").animate({scrollTop:s+r/2-i/2},n.steps[P].scrollSpeed)}else e("html,body").animate({scrollTop:0},n.steps[P].scrollSpeed)}function d(){e("jpwClose").length||e("body").append('<div id="jpwClose"><a href="javascript:;" title="Click here to close"><span></span><br>Click Here to Close</a></div>')}function u(e){for(i=0;i<$.length;i++)"function"==typeof e[$[i]].onCookieLoad&&e[$[i]].onCookieLoad.call(this);return!1}function h(e){var t=N;return"function"!=typeof t.steps[P].onLeave||t.steps[P].onLeave.call(this,e,P)?!0:!1}function f(e){var t=N;return"function"!=typeof t.steps[P].onEnter||t.steps[P].onEnter.call(this,e,P)?!0:!1}function p(){var e=N;return"function"!=typeof e.onClose||e.onClose.call(this)?(B.close(),!0):!1}function m(e){var t=N;return D=!0,B.restart(e),c(),"function"!=typeof t.onRestart||t.onRestart.call(this)?!0:!1}function g(){var e=N;return P=0,"function"!=typeof e.onBeforeShow||e.onBeforeShow.call(this)?!0:!1}function v(){var e=N;return P=0,"function"!=typeof e.onAfterShow||e.onAfterShow.call(this)?!0:!1}function y(){return e(t).innerWidth()||e(t).width()}function b(e){t.console&&t.console.log&&t.console.log(e)}function x(){var e={"-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none","-o-transform":"none",filter:"none","-ms-transform":"none"};return e}function w(e){var t,n,i,o,s,r;s=2*Math.PI/360,r=e*s,t=Math.cos(r),n=Math.sin(r),i=Math.sin(r),o=Math.cos(r);var a={"-webkit-transform":"rotate("+parseInt(e)+"deg)","-moz-transform":"rotate("+parseInt(e)+"deg)","-ms-transform":"rotate("+parseInt(e)+"deg)","-o-transform":"rotate("+parseInt(e)+"deg)",filter:"progid:DXImageTransform.Microsoft.Matrix(M11 = "+t+",M12 = -"+n+",M21 = "+i+",M22 = "+o+',sizingMethod = "auto expand");',"-ms-transform":"progid:DXImageTransform.Microsoft.Matrix(M11 = "+t+",M12 = -"+n+",M21 = "+i+",M22 = "+o+',SizingMethod = "auto expand");'};return a}function C(e){return"string"==typeof e?-1==e.toLowerCase().indexOf("px")?e+"px":e:e+"px"}function T(e){return-1!=e.indexOf("px")?!0:0==parseInt(e)?!0:!1}function _(e,t){var n,o,s,r,a,l=e,c=l.split(" "),d=0;for(i=0;i<c.length;i++)T(c[i])&&d++;if(d==c.length){for(i=0;i<c.length;i++)switch(i){case 0:n=c[i];break;case 1:o=c[i];break;case 2:s=c[i];break;case 3:r=c[i]}switch(c.length){case 1:o=s=r=n;break;case 2:s=n,r=o;break;case 3:r=o}if("undefined"==t||""==t||null==t)return console.log("Please define margin position (top, right, bottom, left)"),!1;switch(t){case"top":a=n;break;case"right":a=o;break;case"bottom":a=s;break;case"left":a=r}return a}return console.log("Please check your margin syntax.."),!1}function k(e,t,i){var o=new Date;o.setDate(o.getDate()+i);var s=escape(t)+(null==i?"":"; expires="+o.toUTCString());n.cookie=e+"="+s}function S(e){var t,i,o,s=n.cookie.split(";");for(t=0;t<s.length;t++)if(i=s[t].substr(0,s[t].indexOf("=")),o=s[t].substr(s[t].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==e)return unescape(o)}var N,j,E,M={},$=[],I=0,A=!0,R=!0,P=0,D=!0,L=e('<div id="jpwOverlay"></div>'),O=e('<div id="jpWalkthrough"></div>'),H=e('<div id="jpwTooltip"></div>'),B={isPageWalkthroughActive:function(){return D?!0:!1},currIndex:function(){return P},init:function(n){var n=e.extend({},e.fn.pagewalkthrough.options,n);return this.each(function(){var i=e(this),o=i.attr("id");n=n||{},n.elementID=o,M[o]=n,$.push(o),n.onLoad&&I++,1==I&&R&&(j=o,N=M[j],R=!1),e(t).scroll(function(){return D&&N.steps[P].stayFocus&&(clearTimeout(e.data(this,"scrollTimer")),e.data(this,"scrollTimer",setTimeout(function(){c(N)},250))),!1})})},renderOverlay:function(){I>1&&b("Warning: Only first walkthrough will be shown onLoad as default"),E=S("_walkthrough-"+j),E==o?(D=!0,s(),d(),c(),setTimeout(function(){0==P&&A&&!v()},100)):u(M)},restart:function(e){0!=P&&(P=0,m(e)&&f(e)&&(s(),c()))},close:function(t){P=0,A=!0,D=!1,t?(k("_walkthrough-"+t,0,365),E=S("_walkthrough-"+t)):(k("_walkthrough-"+j,0,365),E=S("_walkthrough-"+j)),e("#jpwOverlay").length&&L.fadeOut("slow",function(){e(this).remove()}),e("#jpWalkthrough").length&&O.fadeOut("slow",function(){e(this).html("").remove()}),e("#jpwClose").length&&e("#jpwClose").fadeOut("slow",function(){e(this).html("").remove()})},show:function(e){D=!0,A=!0,j=e,N=M[e],s(),d(),c(),0==P&&A&&!v()},next:function(e){A=!1,P!=N.steps.length-1&&h(e)&&(P=parseInt(P)+1,f(e)&&(s(),c()))},prev:function(e){0!=P&&h(e)&&(P=parseInt(P)-1,f(e)&&(s(),c()))},getOptions:function(e){var t;if(e)t={},t=N;else{t=[];for(var n in M)t.push(M[n])}return t}};e("#jpwClose a").live("click",p),e("#jpwTooltip #drag-area").live("mousedown",function(t){if(e(this).hasClass("draggable-area")){e(this).hasClass("draggable")||e(this).addClass("draggable").css("cursor","move");var i=e(this).css("z-index"),o=e(this).outerHeight(),s=e(this).outerWidth(),r=e(this).offset().top+2*o-t.pageY-10,a=t.pageX-e(this).offset().left+s-(e(this).parent().outerWidth()+s)+20;e(n).on("mousemove",function(t){e(".draggable").parent().offset({top:t.pageY+r-o,left:t.pageX+a-s}).on("mouseup",function(){e(this).children("#tooltipWrapper").removeClass("draggable").css({"z-index":i,cursor:"default"})})}),t.preventDefault()}}).live("mouseup",function(){e(this).removeClass("draggable").css("cursor","default")}),e.pagewalkthrough=e.fn.pagewalkthrough=function(t){return B[t]?B[t].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.pagewalkthrough"):B.init.apply(this,arguments),void 0)},setTimeout(function(){B.renderOverlay()},500),e.fn.pagewalkthrough.options={steps:[{wrapper:"",margin:0,popup:{content:"",type:"modal",position:"top",offsetHorizontal:0,offsetVertical:0,width:"320",draggable:!1,contentRotation:0},overlay:!0,accessable:!1,autoScroll:!0,scrollSpeed:1e3,stayFocus:!1,onLeave:null,onEnter:null}],name:"",onLoad:!0,onBeforeShow:null,onAfterShow:null,onRestart:null,onClose:null,onCookieLoad:null}}(jQuery,window,document)}function weightMeasure(e,t,n,o,s){function r(e,t,n,i,o,s){u.beginPath(),u.moveTo(e,t),u.lineTo(n,i),u.lineTo(o,s),u.lineTo(e,t),u.closePath(),u.fillStyle="blue",u.fill()}function a(){r(u.width/2-20,u.height-g,u.width/2+20,u.height-g,u.width/2,u.height-20-v)}function l(){x=2*Math.PI*p/f,b>x&&(x=b),x>Math.PI-b&&(x=Math.PI-b)}function c(){u.save(),u.translate(u.width/2,u.height-v-20-10),u.rotate(x),u.fillStyle="gray",u.fillRect(-5,-y/2,10,y)}var d=$("#"+e)[0],u=d.getContext("2d"),h=[],f=s,p=0,m=s.toString();for(m=m.split("").reverse().join(""),i=0;i<m.length;i++)h[i]=parseInt(m[i]);var g=20,v=50,y=300,b=Math.acos(v/y),x=b;a(),l(),c()}function mob_comp(){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(not_comp=["Draw Triangle","Draw Quadrilateral","DefVertices","DefAdjacentSides","DefAdjacentVertices","AddNumberLine","SubNumberLine","CreateBar","CreateTally","BisectLine"],$(".list_box").each(function(){for(i=0;i<not_comp.length;i++)-1!=$(this).children("p").text().indexOf(not_comp[i])&&($(this).children("a").text("Not Compatible"),$(this).children("a")[0].href="",$(this).children("a").css("background-color","#ccc"),$(this).children("a").css("height","34px"),$(this).children("a").css("margin-top","-15px"))}))}function setNavLineWidths(){$(".nav-line").css("width",$(".container").css("width")),$(".nav-line").each(function(){var e=$(this),t=$("#"+e.attr("data-target")),n=t.offset(),i=t.outerWidth(),o=(t.outerHeight(),parseInt(t.css("margin-top")),e.children(":first-child")),s=e.children(":last-child"),r=e.children(),a=n.left,l=(parseInt(o.css("height")),a+i/2),c=(Math.max($(".container").width()-l,940-l),25);o.css("width",a),s.css("left",$(".container").css("margin-left")),s.css("width","100%"),r.css("top",c)})}function dbord(e){$(".container").width()<=722?($(".dotted-border").css("width",$(".container").width()-22+"px"),$(".dotted-border").css("height","auto"),$("#bbor").css("margin-left","0px")):($(".dotted-border").css("width","252px"),$("#bbor").css("margin-left","43px")),"pset"==e?shelf_color():shelf_color_in(e[0],e[1],e[2]),$(window).resize(function(){$(".container").width()<=722?($(".dotted-border").css("width",$(".container").width()-22+"px"),$(".dotted-border").css("height","auto"),$("#bbor").css("margin-left","0px")):($(".dotted-border").css("width","252px"),$("#bbor").css("margin-left","43px")),"pset"==e?shelf_color():shelf_color_in(e[0],e[1],e[2])})}function logoutb(){$(".switch-to a").hover(function(){$(this).text("Are you sure?")},function(){$(this).text("Log out")})}function shelf_do(){for(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&($("body").css("width","457px"),$("body").css("zoom",""+$(window).width()/457)),wdt=$(".container").width(),lis="",lisarr=[],lis+="<li class=shelf_li id=account>"+$(".shelf .shelf_ul .shelf_li").eq(0).html()+"</li>",lisarr[0]="<li class=shelf_li id=account>"+$(".shelf .shelf_ul .shelf_li").eq(0).html()+"</li>",i=1;i<$(".shelf .shelf_ul .shelf_li").length;i++)lis+="<li class=shelf_li>"+$(".shelf .shelf_ul .shelf_li").eq(i).html()+"</li>",lisarr[i]="<li class=shelf_li>"+$(".shelf .shelf_ul .shelf_li").eq(i).html()+"</li>";for($(".shelf").remove(),i=0;i<lisarr.length;i++)n=parseInt(($(".container").width()-200)/86),te=lisarr.slice(i,i+n).join("\n"),$("#bigshelf").append("<div class=shelf><ul class=shelf_ul>"+te+"</ul></div>"),i=i+n-1;liwt=parseInt($(".shelf .shelf_ul .shelf_li").css("width"))+2*parseInt($(".shelf .shelf_ul .shelf_li").css("padding")),wdt=$(".container").width(),$(window).resize(function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&($("body").css("width","457px"),$("body").css("zoom",""+$(window).width()/457)),lisob=$(".shelf ul li"),Math.abs($(".container").width()-wdt)>10){for(lis="",lisarr=[],i=0;i<$(".shelf .shelf_ul .shelf_li").length;i++)lis+="<li  class=shelf_li>"+$(".shelf .shelf_ul .shelf_li").eq(i).html()+"</li>",lisarr[i]="<li  class=shelf_li>"+$(".shelf .shelf_ul .shelf_li").eq(i).html()+"</li>";for($(".shelf").remove(),i=0;i<lisarr.length;i++)n=parseInt(($(".container").width()-200)/liwt),te=lisarr.slice(i,i+n).join("\n"),$("#bigshelf").append("<div class=shelf><ul class=shelf_ul>"+te+"</ul></div>"),i=i+n-1;wdt=$(".container").width()}badges_look()})}function notepad_new(){function e(e,n){for(n="undefined"!=typeof n?n:0,$("#npPane").append('<p style="position:absolute; text-indent:'+8*n+"px; left:2px; top:"+(2+b.length*g)+"px; width:"+r.width+'px">'+e+"</p>"),b[b.length]=e,$("#notes").attr("value",""),$("#notes").css("top",""+(b.length*g+13)+"px"),r.height=Math.max(parseInt($("#notes").css("top"))+15,r.height),a.lineWidth=3,ct=0,j=0;j<x.length;j++){if(x[j].length>1)for(a.strokeStyle=x[j][0][2],a.lineWidth=2,k=1;k<x[j].length;k++)t(x[j][k-1][0],x[j][k-1][1],x[j][k][0],x[j][k][1]);a.lineWidth=1}f.reinitialise(),f.scrollToPercentY(100,!0),answer||$("#npstr").attr("value",JSON.stringify([b,x]))}function t(e,t,n,i){a.beginPath(),a.moveTo(e,t),a.lineTo(n,i),a.stroke(),a.closePath()}function n(){$("#calc").hide(),$("#sv_opform").show(),w&&o($("#np_num1").attr("value"),$("#np_num2").attr("value"),"+"),C&&o($("#np_num1").attr("value"),$("#np_num2").attr("value"),"-"),T&&s($("#np_num1").attr("value"),$("#np_num2").attr("value"))}function o(t,n,o){lt=1+Math.max(t.length,n.length);var s="<table id=laddtable border=0>\n";for(s+="<tr>\n",i=0;i<lt-t.length;i++)s+="<td> </td>\n";for(i=0;i<t.length;i++)s+="<td>"+t[i]+"</td>\n";for(s+="</tr>\n",s+="<tr>\n",i=0;i<lt-n.length;i++)s+=0==i?"<td>"+o+"</td>\n":"<td> </td>\n";for(i=0;i<n.length;i++)s+="<td>"+n[i]+"</td>\n";for(s+="</tr>\n",s+="<tr>\n",i=0;lt>i;i++)s+="<td><input type=text class='digit linps' id=lin"+i+" maxlength=1></td>\n";s+="</tr>\n",s+="</table>",$("#ops_form").append(s),$("#laddtable").css("font","10pt Courier"),$("#laddtable").css("text-align","center"),$("#laddtable").css("margin-left","-50%"),$("#lin"+(lt-1)).select(),$(".linps").keypress(function(i){String.fromCharCode(i.keyCode),i.keyCode>47&&i.keyCode<58&&$(this).attr("value",String.fromCharCode(i.keyCode));var s="";if(13==i.keyCode){for(var r=0;lt>r;r++)s+=$("#lin"+r).attr("value");e(t+" "+o+" "+n+" = "+s),a.strokeStyle="black",$("#laddtable").remove(),$("#calc").show(),$("#sv_opform").hide(),$("#np_num1").attr("value",s),$("#np_num2").attr("value","")}}),$("#sv_opform").click(function(){for(var i="",s=0;lt>s;s++)k=$("#lin"+s).attr("value"),k="undefined"!=typeof k?k:"",i+=k;e(t+" "+o+" "+n+" = "+i),a.strokeStyle="black",$("#laddtable").remove(),$("#calc").show(),$("#sv_opform").hide(),$("#sv_opform").unbind(),$("#np_num1").attr("value",i),$("#np_num2").attr("value","")});for(var r=1;lt>r;r++)$("#lin"+r).keypress({j:r},function(e){$("#lin"+(e.data.j-1)).select()})}function s(t,n){lt=1+t.length+n.length;var i="<table id=addtable border=0>\n";for(i+="<tr>\n",s=0;s<lt-t.length;s++)i+="<td> </td>\n";for(s=0;s<t.length;s++)i+="<td>"+t[s]+"</td>\n";for(i+="</tr>\n",i+="<tr>\n",s=0;s<lt-n.length;s++)i+=0==s?"<td>x</td>\n":"<td> </td>\n";for(s=0;s<n.length;s++)i+="<td>"+n[s]+"</td>\n";for(i+="</tr>\n",o=0;o<n.length;o++){for(i+="<tr>\n",s=0;s<lt-(t.length+o+1);s++)i+=0==s&&0!=o?"<td>+</td>\n":"<td> </td>\n";for(s=0;s<t.length+o+1;s++)i+="<td><input type=text class='digit inps"+o+"' id=in_"+o+"_"+s+" maxlength=1></td>\n";i+="</tr>\n"}if(n.length>1)for(s=0;lt>s;s++)i+="<td><input type=text class='digit inps' id=in"+s+" maxlength=1></td>\n";for(i+="</tr>\n",i+="</table>",$("#ops_form").append(i),$("#addtable").css("font","10pt Courier"),$("#addtable").css("text-align","center"),$("#addtable").css("margin-left","-50%"),$("#in_0_"+t.length).select(),o=0;o<n.length;o++)o==n.length-1?$(".inps"+o).keypress(function(e){13==e.keyCode&&$("#in"+(lt-1)).select()}):$(".inps"+o).keypress({j:o},function(e){if(13==e.keyCode)for($("#in_"+(e.data.j+1)+"_"+t.length).select(),s=0;o>s;s++)$("#in_"+(e.data.j+1)+"_"+(t.length+1+s)).attr("value","0")});1==n.length?($(".inps0").keypress(function(i){var o="";if(13==i.keyCode){for(var s=0;lt-1>s;s++)o+=$("#in_0_"+s).attr("value");e(t+" x "+n+" = "+o),$("#addtable").remove(),$("#calc").show(),$("#notes").focus(),$("#sv_opform").hide(),$("#np_num1").attr("value",o),$("#np_num2").attr("value","")}}),$("#sv_opform").click(function(){for(var i="",o=0;lt-1>o;o++)i+=$("#in_0_"+o).attr("value");e(t+" x "+n+" = "+i),$("#addtable").remove(),$("#calc").show(),$("#notes").focus(),$("#sv_opform").hide(),$("#sv_opform").unbind(),$("#np_num1").attr("value",i),$("#np_num2").attr("value","")})):($(".inps").keypress(function(i){var o="";if(13==i.keyCode){for(var s=0;lt>s;s++)o+=$("#in"+s).attr("value");e(t+" x "+n+" = "+o),$("#addtable").remove(),$("#calc").show(),$("#notes").focus(),$("#sv_opform").hide()}}),$("#sv_opform").click(function(){for(var i="",o=0;lt>o;o++)i+=$("#in"+o).attr("value");e(t+" x "+n+" = "+i),$("#addtable").remove(),$("#calc").show(),$("#notes").focus(),$("#sv_opform").hide(),$("#sv_opform").unbind()}));for(var o=1;lt>o;o++)$("#in"+o).keypress({j:o},function(e){13!=e.keyCode&&(e.preventDefault(),$("#in"+e.data.j).attr("value",String.fromCharCode(e.keyCode)),$("#in"+(e.data.j-1)).select())});for(var o=0;o<n.length;o++)for(var s=1;s<t.length+o+1;s++)$("#in_"+o+"_"+s).keypress({j:o,i:s},function(e){13!=e.keyCode&&(e.preventDefault(),$("#in_"+e.data.j+"_"+e.data.i).attr("value",String.fromCharCode(e.keyCode)),$("#in_"+e.data.j+"_"+(e.data.i-1)).select())})}var r=$("#notepad")[0],a=r.getContext("2d");$("#npcolorpicker").val("#E85858"),$("#sv_opform").hide(),answer=!1;var l,c,d,u,h=void 0,f=$("#note").jScrollPane().data("jsp"),m=!1,g=20,v="wr";try{h=JSON.parse($("#npstr").attr("value"))}catch(y){}var b=[],x=[];if(""!=h&&void 0!=h)for(answer=!0,x=h[1],p=0;p<h[0].length;p++)e(h[0][p]);$("#drawnp").click(function(){if("dr"!=v)for($("#drawnp").css("background-color","gray"),v="dr",$("#npPane").hide(),$("#notes").hide(),i=0;i<b.length;i++)a.fillStyle="rgb(85, 102, 119)",a.font="10pt Courier",a.fillText(b[i],2,i*g+12);else v="wr",$("#drawnp").css("background-color","white"),$("#npPane").show(),$("#notes").show(),$("#notes").focus()}),$("#notepad").mousedown(function(){m=!0,"wr"==v&&(f.scrollToPercentY(100,!0),$("#notes").focus()),"dr"==v&&(a.lineWidth=3,a.strokeStyle=$("#npcolorpicker").val(),c=l,u=d,x.push([]),x[x.length-1].push([c,u,$("#npcolorpicker").val()]))}),$("#notepad").mouseup(function(){a.lineWidth=1,m=!1,$("#npstr").attr("value",JSON.stringify([b,x]))}),$("#notepad").mousemove(function(e){var n=$("#notepad").offset(),i=Math.round(n.left),o=Math.round(n.top);l=e.pageX-i,d=e.pageY-o,m&&"dr"==v&&(t(x[x.length-1][x[x.length-1].length-1][0],x[x.length-1][x[x.length-1].length-1][1],l,d),x[x.length-1].push([l,d]))}),$("#notes").keypress(function(t){f.scrollToPercentY(100),13==t.keyCode&&e($("#notes").attr("value"))});var w=!0,C=!1,T=!1;$("#np_add").css("background-color","gray");var _=function(){w=!1,C=!1,T=!1,$(".tbicons").css("background-color","white"),$("#calc-form").removeClass()};$("#np_add").click(function(){w||(_(),w=!0,$(this).css("background-color","gray"),$("#calc-form").addClass("addition"))}),$("#np_sub").click(function(){C||(_(),C=!0,$(this).css("background-color","gray"),$("#calc-form").addClass("subtraction"))}),$("#np_mult").click(function(){T||(_(),T=!0,$(this).css("background-color","gray"),$("#calc-form").addClass("multiplication"))}),$("#cr_opform").click(function(){n()}),$("#np_num2").keypress(function(e){13==e.keyCode&&n()})}function startShow(){var e=$("div.slide");e.mouseenter(function(){clearInterval(parseInt($("#intervalID").text()))}),e.mouseleave(function(){$("#intervalID").text(setInterval("decSlideTimer()",1e3))}),$("#nextslide").click(function(){setSlide((slideNo()+1)%numSlides())}),$("#prevslide").click(function(){setSlide((slideNo()+numSlides()-1)%numSlides())}),$("#intervalID").text(setInterval("decSlideTimer()",1e3))}function slideNo(){return parseInt($("#slideNo").text())}function numSlides(){return $("div.slide").length}function resetTimer(e){if(void 0===e)var e=6;$("#slideTimer").text(e+"")}function decSlideTimer(){var e=parseInt($("#slideTimer").text());return e>0?(resetTimer(e-1),void 0):(setSlide((slideNo()+1)%numSlides()),void 0)}function setSlide(e){var t=$("div.slide.selected"),n=$("div.slide:eq("+e+")");t.fadeOut(),n.fadeIn(),t.removeClass("selected"),n.addClass("selected"),$("#slideNo").text(e),resetTimer()}function setPageFunc(e){return function(){$(".staticpage").hide(),$("#"+e).show(),$(".navbar-fixed-top li").removeClass("active"),$("#"+e+"link").parent().addClass("active")}}function hideProblem(){return $("#dimmer").unbind("click"),$("#problem_overlay").hide(),$("#dimmer").remove(),!1}function closeWithDimmer(){var e=$("#dimmer");e.length>0&&e.remove(),$("body").prepend("<div id=dimmer onclick='hideProblem();'></div>"),$("#dimmer").show()}function initProblemOverlay(){var e=$("#problem_overlay");0==e.length&&($("body").prepend("<div id=problem_overlay class=problem_overlay></div>"),e=$("#problem_overlay"));var t=$("#dimmer");return 0==t.length&&($("body").prepend("<div id=dimmer></div>"),t=$("#dimmer")),e.show(),closeWithDimmer(),e}function browsers(){$.browser.webkit&&$("body").append('<div class=\'modal in\' id="browserss"><p>For the best SmarterGrades experience, use:</p><a href="https://www.google.com/intl/en/chrome/browser/" target="#"><img src="/assets/chrome_i.png"></img></a>')}function hideProblem(){return $("#pr_dim").hide(),$("body").css("overflow","scroll"),!1}function closeWithDimmer(){var e=$("#dimmer");e.length>0&&e.hide(),$("#dimmer").show()}function initProblemOverlay(){var e=$("#dimmer");0==$("#pr_dim").length&&$("body").prepend("<div id=pr_dim></div>"),0==e.length&&($("#pr_dim").prepend("<div id=dimmer onclick='hideProblem();'></div>"),e=$("#dimmer"));var t=$("#problem_overlay");return 0==t.length&&($("#pr_dim").append("<div id=problem_overlay class=problem_overlay></div>"),t=$("#problem_overlay")),$("body").css("overflow","hidden"),$("#pr_dim").show(),e.show(),t.show(),t}function bclr_pset(){COLOR=["#049cdb","#46a546","#9d261d","#f89406","#c3325f","#7a43b6","#ffc40d"],$(".pset_list_box").hover(function(){$(this).css("background-color",COLOR[Math.round(Math.random()*(COLOR.length-1))])})}function bclr_problem(){COLOR=["#049cdb","#46a546","#9d261d","#f89406","#c3325f","#7a43b6","#ffc40d"],$(".problem_list_box").hover(function(){$(this).css("background-color",COLOR[Math.round(Math.random()*(COLOR.length-1))])})}function awesome(){AWESOME=["Awesome!! Try Another!","Fantastic! You're almost done with this Problem Type! Try Another!","You're making everyone else look bad! Keep at it! Try Another"],$("#problem_overlay").append("<div class=awesome id=awesome><p>"+AWESOME[Math.round(Math.random()*(AWESOME.length-1))]+"</p><i class='x_awesome icon-remove-circle icon-white'></i></div>"),$(".x_awesome").click(function(){$(".awesome").hide()})}function shit(){SHIT=["Try Another!","Keep on Working at it!!","You will get there! Try another!"],t="<div class=awesome id=shit><p>"+SHIT[Math.round(Math.random()*(SHIT.length-1))]+"</p><i class='x_awesome icon-remove-circle icon-white'></i></div>",$("#problem_overlay").append(t),$(".x_awesome").click(function(){$(".awesome").hide()})}function done_pr(){DONEP=["Try Another Problem Type! This one is already Blue!","There are other Problem Types Available!! Don't hoard this one!!","The other Problem Types are feeling lonely!!! Try one of them!"],$("#problem_overlay").append("<div class=awesome id=donep><p>"+DONEP[Math.round(Math.random()*(DONEP.length-1))]+"</p><i class='x_awesome icon-remove-circle icon-white'></i></div>"),$(".x_awesome").click(function(){$(".awesome").hide()})}function format_select_arrow(){$.browser.opera||$("select.select").each(function(){var e=$(this).attr("title"),t=$(this).width(),n=$(this).height(),i=$(this).position();$("option:selected",this).length>0&&(e=$("option:selected",this).text()),$(this).css({"z-index":10,opacity:0,"-khtml-appearance":"none"}).after('<span class="select" style="height:'+n+"px;width:"+t+"px;left:"+i.left+"px;top:"+i.top+'px;">'+e+"</span>").change(function(){val=$("option:selected",this).text(),$(this).next().text(val)})})}function shelf_color(){var e=[],t=[],n=[],i=0,o=0,s=0,r=0,a=0;$("#bbor").children(".pset_pbar").each(function(){e[i]=$(this).children(".pset_bar").children(".bar-danger").width(),a+=$(this).width(),n[i]=$(this).children(".pset_bar").children(".bar-info").width(),o=n[i]+o,s=e[i]+s,t[i]=$(this).children(".pset_bar").children(".bar-success").width(),r=t[i]+r,i++
});var l=($("#bigshelf .shelf").width(),r/a*100),c=o/a*100,d=l+c;0!=l?$("#bigshelf .shelf .shelf_ul").css("background","-webkit-gradient(linear,"+c+"% 0%,"+d+"% 0%, from(#0087bd), to(#ff0040), color-stop(.005,#60b349),color-stop(.995,#60b349))"):$("#bigshelf .shelf .shelf_ul").css("background","-webkit-linear-gradient(left,#0087bd "+c+"%,#ff0040 "+c+"%)"),$("#bigshelf .shelf .shelf_ul").css("background","-moz-linear-gradient(0% 0% 0deg,#0087bd, #1414C9, #0087bd "+c+"%,#60b349 0%,#60b349 "+d+"%,#ff0040 0%)")}function shelf_color_in(e,t){"0"!=t?$("#bigshelf .shelf_ul").css("background","-webkit-gradient(linear,"+parseInt(e)+"% 0%,"+(parseInt(e)+parseInt(t))+"% 0%, from(#0087bd), to(#ff0040), color-stop(.005,#60b349),color-stop(.995,#60b349))"):"0"!=e?100==parseInt(e)?$("#bigshelf .shelf_ul").css("background","#0087bd"):$("#bigshelf .shelf_ul").css("background","-webkit-linear-gradient(left, #0087bd "+parseInt(e)+"%, #ff0040 "+parseInt(e)+"%)"):$("#bigshelf .shelf_ul").css("background","red"),$("#bigshelf .shelf_ul").css("background","-moz-linear-gradient(0% 0% 0deg,#0087bd, #1414C9, #0087bd "+parseInt(e)+"%,#60b349 0%,#60b349 "+(parseInt(e)+parseInt(t))+"%,#ff0040 0%)")}function set_stat_widths(e,t){console.log(stats.find("li:eq(2)").first().attr("data-original-title")),void 0==t&&(t=!1),e.children("ul").each(function(){var e=$(this).children("li:gt(0)"),n=540/e.length;e.each(function(){var e=parseInt($(this).attr("data-width")),i=$(this).children("div").first();t?($(this).width(n*e/100),i.width("100%")):($(this).width(n),i.width(e+"%"))})})}function initProblem(){for(a in INIT_PROBLEM)INIT_PROBLEM[a].call();console.log("Problem JS initialized")}function destroyProblem(){for(a in DESTROY_PROBLEM)DESTROY_PROBLEM[a].call()}function setUpDataGr(e,t){function n(e,t,n,i){h.beginPath(),h.moveTo(e,t),h.lineTo(n,i),h.stroke(),h.closePath()}COLOR=["#049cdb","#46a546","#9d261d","#f89406","#c3325f","#7a43b6","#ffc40d"];var o=$("#"+e)[0],s=t;if(void 0==o)return void 0;var r,a,l,c,d=o.height,u=o.width,h=o.getContext("2d"),f=!1,p={mg:50,type:"basicbar",scale:30,color:["red","green","blue","orange","yellow","gray"],edit:!1,divs:10,dir:"x",head:"",start:0,table:new Array,tally:[],divsedit:!1,setEditable:function(e){this.edit=e},setDivsEditable:function(e){this.divsedit=e},setType:function(e){this.type=e},setDivs:function(e){this.divs=e},setScale:function(e){this.scale=e},setDir:function(e){this.dir=e},setHead:function(e){this.head=e},setStart:function(e){this.start=e},drawBones:function(){for(h.fillStyle="black",n(this.mg,d-this.mg,this.mg,0),n(u,d-this.mg,this.mg,d-this.mg),i=0;i<=(d-this.mg)/this.scale;i++)n(this.mg,d-this.mg-i*this.scale,this.mg+5,d-this.mg-i*this.scale),h.textAlign="right",h.fillText(this.divs*i,this.mg-1,d-this.mg-i*this.scale+8)},fromTable:function(){$("#"+s+" tr").each(function(){var e=[],t=$(this).find("input");t.length>0&&(t.each(function(){e.push($(this).attr("value"))}),p.table.push(e))})},drawInitialPictogram:function(e){for(this.image=e,x=10+u/4,y=d/this.table.length/2,mu=20,html="",i=0;i<this.table.length;i++)for(j=0;j<parseInt(this.table[i][1]);j++)parseInt(this.table[i][1])-this.divs>=this.divs?(j+1)%this.divs==0&&(html+='<i class="pict '+e+'" id=pict_'+i+"_"+(j+1)/this.divs+' style="position:absolute; top:'+(y+2*i*y)+"px; left:"+(x+mu*(j+1)/this.divs)+'px;"></i>\n'):html+='<i class="half_pict '+e+'" id=pict_'+i+"_"+Math.ceil((j+1)/this.divs)+' style="position:absolute; top:'+(y+2*i*y)+"px; left:"+(x+mu*Math.ceil((j+1)/this.divs))+'px;"></i>\n';$("#pict").append(html)},addPictogram:function(e){for(x=10+u/4,y=d/this.table.length/2,html='<i class="pict '+this.image+'" id=pict_'+e+"_"+(1+parseInt(this.table[e][1])/this.divs)+' style="position:absolute; top:'+(y+2*e*y)+"px; "+(x+mu*(1+Math.ceil(parseInt(this.table[e][1])/this.divs)))+'px;"></i>\n',this.table[e][1]=""+(parseInt(this.table[e][1])+this.divs),cor=!0,i=0;i<Math.ceil(parseInt(this.table[e][i])/this.divs)-1;i++)if($("#pict_"+e+"_"+(i+1)).attr("class")=="half_pict "+this.image){cor=!1;break}cor||(this.table[e][1]="n/a")},addHalfPictogram:function(e){for(x=10+u/4,y=d/this.table.length/2,html='<i class="half_pict '+this.image+'" id=pict_'+e+"_"+parseInt(this.table[e][1])/this.divs+' style="position:absolute; top:'+(y+2*e*y)+"px; "+(x+mu*Math.ceil(parseInt(this.table[e][1])/this.divs))+'px;"></i>\n',this.table[e][1]=""+(parseInt(this.table[e][1])+this.divs/2),cor=!0,i=0;i<Math.ceil(parseInt(this.table[e][i])/this.divs)-1;i++)if($("#pict_"+e+"_"+(i+1)).attr("class")=="half_pict "+this.image){cor=!1;break}cor||(this.table[e][1]="n/a")},removePictogram:function(e){$("#pict_"+e+"_"+Math.ceil(parseInt(this.table[e][1])/this.divs)).attr("class")=="half_pict "+this.image&&(this.table[e][i]=""+parseInt(this.table[e][i])-this.divs/2),$("#pict_"+e+"_"+Math.ceil(parseInt(this.table[e][1])/this.divs)).attr("class")=="pict "+this.image&&(this.table[e][i]=""+parseInt(this.table[e][i])-this.divs/2),$("#pict_"+e+"_"+Math.ceil(parseInt(this.table[e][1])/this.divs)).remove()},preInitialTally:function(){for(i=0;i<this.table.length;i++)for(this.tally[i]=new Array,k=0;k<parseInt(this.table[i][1]);k++)(k+1)%5!=0?this.tally[i].push("|"):this.tally[i].push("/")},drawTallyMarks:function(){for(n(u/4,0,u/4,d),this.edit&&n(3*u/4,0,3*u/4,d),x=10+u/4,y=d/this.table.length/2,mu=7,su=10,i=0;i<this.table.length;i++)for(n(0,(i+1)*(d/this.table.length),u,(i+1)*(d/this.table.length)),h.textAlign="center",h.fillStyle=COLOR[i%COLOR.length],h.font="12pt Calibri",h.fillText(this.table[i][0],u/8,y+i*(d/this.table.length)+3),h.strokeStyle="black",h.textAlign="left",ct=0,j=0;j<this.tally[i].length;j++)h.strokeStyle=COLOR[i%COLOR.length],"|"==this.tally[i][j]?(n(x+j*mu,y+i*(d/this.table.length)-su,x+j*mu,y+i*(d/this.table.length)+su),ct+=1):(n(x+j*mu,y+i*(d/this.table.length)-su,x+(j-ct-1)*mu,y+i*(d/this.table.length)+su),ct=0),h.strokeStyle="black"},addLine:function(e){for(this.tally[e].push("|"),ret=parseInt(this.table[e][1])+1,i=0;i<this.tally[e].length;i++)if((i+1)%5!=0){if("|"!=this.tally[e][i]){ret="n/a";break}}else if("/"!=this.tally[e][i]){ret="n/a";break}this.table[e][1]=ret},addSlash:function(e){for(this.tally[e].push("/"),ret=parseInt(this.table[e][1])+1,i=0;i<this.tally[e].length;i++)if((i+1)%5!=0){if("|"!=this.tally[e][i]){ret="n/a";break}}else if("/"!=this.tally[e][i]){ret="n/a";break}this.table[e][1]=ret},remLast:function(e){for(this.tally[e].pop(),ret=0,i=0;i<this.tally[e].length;i++)if((i+1)%5!=0){if("|"!=this.tally[e][i]){ret="n/a";break}ret+=1}else{if("/"!=this.tally[e][i]){ret="n/a";break}ret+=1}this.table[e][1]=""+ret},placeTallyButtons:function(){for(x=5*u/6,y1=d/this.table.length/2-10,html="",i=0;i<this.table.length;i++)html+="<button type=button class=line id=line_"+i+' style="position:absolute; top:'+(y1+i*(d/this.table.length))+"px; left:"+(x-20)+'px;"> | </button>\n',html+="<button type=button class=slash id=slash_"+i+' style="position:absolute; top:'+(y1+i*(d/this.table.length))+"px; left:"+x+'px;"> / </button>\n',html+="<button type=button class=undo id=undo_"+i+' style="position:absolute; top:'+(y1+i*(d/this.table.length))+"px; left:"+(x+20)+'px;"> < </button>\n',$("#tally").append(html)},drawBasicBar:function(){for(this.sp=(u-this.mg)/this.table.length,i=0;i<this.table.length;i++)h.save(),h.translate(this.mg+this.sp/2+i*this.sp,d-this.mg/2),this.table[i][0].length>3&&h.rotate(-Math.PI/3),h.textAlign="center",h.fillText(this.table[i][0],0,0),h.restore();for(i=0;i<this.table.length;i++)he=parseInt(this.table[i][1])/this.divs*this.scale,h.fillStyle=COLOR[i%COLOR.length],h.fillRect(this.mg+i*this.sp+this.sp/4,d-this.mg-he,this.sp/2,he)},redraw:function(){this.chHTable(),h.clearRect(0,0,u,d),"basicbar"==this.type&&(this.drawBones(),this.drawBasicBar()),"tally"==this.type&&this.drawTallyMarks()},editingBB:function(e,t){e>0?parseInt(this.table[t][1])>0&&(st=parseInt(this.table[t][1])-Math.floor(e/this.scale)*this.divs,st>=0&&(this.table[t][1]=""+st)):(st=parseInt(this.table[t][1])-Math.ceil(e/this.scale)*this.divs,st>=0&&(this.table[t][1]=""+st)),this.redraw()},chHTable:function(){for(i=0;i<this.table.length;i++)for(j=0;j<this.table[i].length;j++)$("#"+s+" tr:eq("+i+")").find("input:eq("+j+")").attr("value",this.table[i][j])}};"edit"==$("#edit").attr("value")&&p.setEditable(!0),p.setType($("#type").attr("value")),"tally"==p.type?(p.fromTable(),p.edit&&p.placeTallyButtons(),p.preInitialTally(),p.drawTallyMarks()):("true"==$("#editdivs").attr("value")&&p.setDivsEditable(!0),p.setDivs($("#divs").attr("value")),p.drawBones(),p.fromTable(),p.drawBasicBar()),$(".line").click(function(){p.addLine(parseInt($(this).attr("id").substr($(this).attr("id").indexOf("_")+1,10))),p.redraw()}),$(".slash").click(function(){p.addSlash(parseInt($(this).attr("id").substr($(this).attr("id").indexOf("_")+1,10))),p.redraw()}),$(".undo").click(function(){p.remLast(parseInt($(this).attr("id").substr($(this).attr("id").indexOf("_")+1,10))),p.redraw()}),$("#"+e).mousedown(function(){l=r,c=a,initdowny=a,f=!0}),$("#"+e).mouseup(function(){f=!1}),$("#"+e).mousemove(function(t){var n=$("#"+e).offset(),o=Math.round(n.left),s=Math.round(n.top);if(r=t.pageX-o,a=t.pageY-s,f&&p.edit&&"basicbar"==p.type)for(i=0;i<p.table.length;i++)l>p.mg+p.sp*i+p.sp/4&&l<p.mg+p.sp*i+3*p.sp/4&&c<d-p.mg-parseInt(p.table[i][1])/p.divs*p.scale+45&&c>d-p.mg-parseInt(p.table[i][1])/p.divs*p.scale-45&&Math.abs(a-c)>=p.scale&&(p.editingBB(a-c,i),c=a)})}function setUpGeo(e){function t(){X.clearRect(0,0,H.width,H.height),d(),lt>=0&&at[lt].draw();for(var e=0;e<rt.length;e++)rt[e].draw()}function n(t){var n=$("#"+e).offset(),i=Math.round(n.left),o=Math.round(n.top);B=t.pageX-i,q=t.pageY-o}function o(){console.log(rt);for(var e="",t="",n=0;n<rt.length;n++)rt[n].hidden||(e+='<div class=shape style="background-color:'+Q[n]+';" id=s_'+n+" >"+rt[n]+"</div>\n",t+=","+rt[n].encode());V.html(e),$("#"+cname2+"qbans_geometry").attr("value",t.substr(1))}function r(){for(var e=0;e<rt.length;e++)rt[e].hidden||($("#s_"+e).mouseenter({i:e,color:Q[e]},function(e){rt[e.data.i].highlight(e.data.color),t()}),$("#s_"+e).mouseleave({i:e},function(e){rt[e.data.i].unhilight(),t()}),rt[e]instanceof E&&$("#s_"+e).click({i:e},function(e){W==ft&&$("#circlesize").attr("value",""+rt[e.data.i].r)}))}function a(){tool=$("#"+cname2+"starttool").attr("value"),"select"==tool?D(nt):"compass"==tool?D(Z):"line"==tool?D(tt):"protractor"==tool?D(J):D(ot)}function l(){st=[],k(),U=1,Y=1,G=1,K=1;var e=$("#"+cname2+"startshapes").attr("value");if(""!=e)for(var t=e.split(","),n=0;n<t.length;n++)_(w(t[n]));G=U,K=Y,st=rt.slice(0),k()}function c(){var e=$("#"+cname2+"qbans_selected").attr("value");null==e&&(e="");for(var t=e.split(","),n=0;n<t.length;n++){var i=w(t[n]);void 0!=i&&(j=T(i),j>0?rt[j].highlight():(i.highlight(),_(i)))}}function d(){if(lt>=0)at[lt].mouseDist()>10&&(lt=-1,W==ut&&dt.toOffset());else for(var e=0;e<at.length;e++)at[e].mouseDist()<7&&(lt=e)}function u(){at=[];for(var e=0;e<rt.length;e++)rt[e].hidden||(rt[e]instanceof S&&(P(rt[e].x1,rt[e].y1),P(rt[e].x2,rt[e].y2)),rt[e]instanceof E&&P(rt[e].x,rt[e].y));for(var e=0;e<rt.length-1;e++)for(var t=e+1;t<rt.length;t++)rt[e].hidden||rt[t].hidden||(rt[e]instanceof E?rt[t]instanceof E?p(rt[e],rt[t]):rt[t]instanceof S&&f(rt[t],rt[e]):rt[e]instanceof S&&(rt[t]instanceof E?f(rt[e],rt[t]):rt[t]instanceof S&&h(rt[e],rt[t])))}function h(e,t){var n=(e.x1-e.x2)*(t.y1-t.y2)-(e.y1-e.y2)*(t.x1-t.x2);if(0==n)return 0;var i=Math.floor(((e.x1*e.y2-e.y1*e.x2)*(t.x1-t.x2)-(e.x1-e.x2)*(t.x1*t.y2-t.y1*t.x2))/n),o=Math.floor(((e.x1*e.y2-e.y1*e.x2)*(t.y1-t.y2)-(e.y1-e.y2)*(t.x1*t.y2-t.y1*t.x2))/n),s=Math.min(Math.max(e.x1,e.x2),Math.max(t.x1,t.x2)),r=Math.min(Math.max(e.y1,e.y2),Math.max(t.y1,t.y2)),a=Math.max(Math.min(e.x1,e.x2),Math.min(t.x1,t.x2)),l=Math.max(Math.min(e.y1,e.y2),Math.min(t.y1,t.y2));i>=a&&s>=i&&o>=l&&r>=o&&P(i,o)}function f(e,t){var n=Math.abs(e.x2-e.x1)<Math.abs(e.y2-e.y1),i=n?e.y1:e.x1,o=n?e.x1:e.y1,s=n?e.y2:e.x2,r=n?e.x2:e.y2,a=n?t.y:t.x,l=n?t.x:t.y,c=(r-o)/(s-i),d=o-c*i,u=o-l-c*i,h=c*c+1,d=2*u*c-2*a,t=u*u+a*a-t.r*t.r,f=d*d-4*h*t;if(0>f)return 0;var p=Math.max(i,s),m=Math.max(o,r),g=Math.min(i,s),v=Math.min(o,r);f=Math.sqrt(f);var y=Math.floor((f-d)/(2*h)),b=Math.floor(c*(y-i)+o);return y>=g&&p>=y&&b>=v&&m>=b&&(n?P(b,y):P(y,b)),0==f?1:(y=Math.floor((0-d-f)/(2*h)),b=Math.floor(c*(y-i)+o),y>=g&&p>=y&&b>=v&&m>=b&&(n?P(b,y):P(y,b)),2)}function p(e,t){var n=y(e.x,e.y,t.x,t.y),i=e.r+t.r-n;if(0>i||0==n)return 0;if(0==i){var o=(t.x-e.x)*(e.r/(e.r+t.r))+e.x,s=(t.y-e.y)*(e.r/(e.r+t.r))+e.y;return P(o,s),1}var r=(e.r*e.r-t.r*t.r+n*n)/(2*n),a=Math.sqrt(e.r*e.r-r*r),o=(t.x-e.x)*(r/n)+e.x,s=(t.y-e.y)*(r/n)+e.y,l=o-a/n*(t.y-e.y),c=o+a/n*(t.y-e.y),d=s+a/n*(t.x-e.x),u=s-a/n*(t.x-e.x);return P(l,d),P(c,u),2}function m(e,t,n,i,o){void 0!=i&&(X.strokeStyle=i),X.lineWidth=void 0!=o?o:1,X.beginPath(),X.arc(e,t,n,0,2*Math.PI,!1),X.closePath(),X.stroke()}function g(e,t,n,i){void 0==i&&(i="black"),X.beginPath(),X.arc(e,t,n,0,2*Math.PI,!1),X.closePath(),X.fillStyle=i,X.fill()}function v(e,t,n,i,o,s){void 0!=o&&(X.strokeStyle=o),X.lineWidth=void 0!=s?s:1,X.beginPath(),X.moveTo(e,t),X.lineTo(n,i),X.stroke(),X.closePath()}function y(e,t,n,i){return xdiff=e-n,ydiff=t-i,Math.sqrt(xdiff*xdiff+ydiff*ydiff)}function b(e,t,n){return y(e,t,B,q)<=n}function x(e){e="undefined"!=typeof e?e:!1,this.hidden=e,this.color="black",this.thickness=1,this.highlight=function(e){this.color=e,this.thickness=3},this.unhilight=function(){this.color="black",this.thickness=1}}function w(e){var t=e.split(":");if(t.length<2)return void 0;var n=t.shift();if("line"==n){for(var i=0;i<t.length;i++)t[i]=parseInt(t[i]);return new S(t[0],t[1],t[2],t[3])}if("circle"==n)return new E(parseInt(t[0]),parseInt(t[1]),parseFloat(t[2]));if("point"==n)return new I(parseInt(t[0]),parseInt(t[1]),t[2],parseFloat(t[3]));if("infline"==n){for(var i=0;i<t.length;i++)t[i]=parseInt(t[i]);return new S(t[0],t[1],t[2],t[3])}if("ray"==n){for(var i=0;i<t.length;i++)t[i]=parseInt(t[i]);return new S(t[0],t[1],t[2],t[3])}}function C(){ct(),u(),t()}function T(e){for(var t=0;t<rt.length;t++)if(rt[t].to_s==e.to_s)return t;return-1}function _(e){if(e instanceof S)U++;else if(e instanceof E)Y++;else if(void 0==e)return-1;return rt.push(e),C(),rt.length-1}function k(){U=G,Y=K,rt=st.slice(0),C()}function S(e,t,n,i){return e>n?new S(n,i,e,t):(x.call(this),this.x1=e,this.y1=t,this.x2=n,this.y2=i,this.num=U,this.draw=function(){v(this.x1,this.y1,this.x2,this.y2,this.color,this.thickness)},this.set_p2=function(e,t){this.x2=e,this.y2=t,this.draw=function(){v(this.x1,this.y1,e,t,"black")}},this.underMouse=function(e){void 0==e&&(e=5);var t=this.toSlopeInt(),n=this.toRevSlopeInt();return Math.abs(B*t.m+t.b-q)<e&&this.x1<B&&B<this.x2||Math.abs(q*n.m+n.b-B)<e&&Math.abs((this.y1+this.y2)/2-q<e)},this.toString=function(){return"l<sub>"+this.num+"</sub>"},this.encode=function(){return"line:"+this.x1+":"+this.y1+":"+this.x2+":"+this.y2},this.toSlopeInt=function(){var e=(this.y2-this.y1)/(this.x2-this.x1),t=this.y1-e*this.x1;return{m:e,b:t}},this.toRevSlopeInt=function(){var e=(this.x2-this.x1)/(this.y2-this.y1),t=this.x1-e*this.y1;return{m:e,b:t}},void 0)}function N(e,t,n,i){var o=new S(e,t,n,i);return _(o)}function E(e,t,n){x.call(this),this.x=e,this.y=t,this.r=n,this.num=Y,this.draw=function(){m(this.x,this.y,this.r,this.color,this.thickness)},this.underMouse=function(e){return void 0==e&&(e=3),b(this.x,this.y,this.r+e)&&!b(this.x,this.y,this.r-e)},this.toString=function(){return"c<sub>"+this.num+"</sub>"},this.encode=function(){return"circle:"+this.x+":"+this.y+":"+this.r}}function M(e,t,n){var i=new E(e,t,n);return _(i)}function I(e,t,n,i){x.call(this,!0),this.x=e,this.y=t,this.name=n,this.angle=void 0==i?45:i,this.color="black",this.r=2,this.draw=function(){var e=17-3.7*Math.abs(this.angle-2.2),t=this.x+e*Math.cos(this.angle),n=this.y+e*Math.sin(this.angle);X.fillText(this.name,t,n),g(this.x,this.y,this.r,this.col)},this.highlight=function(e){void 0==e&&(e="green"),this.color=e,this.r=7},this.unhilight=function(){this.color="black",this.r=2},this.toString=function(){return n},this.encode=function(){return"point:"+this.x+":"+this.y+":"+this.name},this.underMouse=function(){return!1}}function A(e,t,n){var i=new I(e,t,n);return _(i)}function R(e,t){this.x=e,this.y=t,this.active=!1,this.mouseDist=function(){return W==ut?W.mouse_is_down&&W.on_protractor?y(this.x,this.y,B-dt.offx,q-dt.offy):1024:y(this.x,this.y,B,q)},this.toString=function(){return"(POI "+this.x+", "+this.y+")"},this.draw=function(){g(this.x,this.y,10,"green")},this.encode=function(){return"point:"+this.x+":"+this.y+":"}}function P(e,t){at.push(new R(e,t))}function D(e){W!=bt[e]&&($(".tools div").removeClass("selected"),$(xt[e]).addClass("selected"),"undefined"!=typeof W&&W.deactivate(),"undefined"==typeof bt[e]?(alert("undefined newstate: "+e+", "+O(bt)),W=ut):W=bt[e],W.activate())}function L(){var e=parseFloat($("#circlesize").attr("value"));return isNaN(e)||0>=e?(alert("The radius on the right needs to be a positive number!"),$("#usecirclesize").prop("checked",!1),!1):e>500?(alert("Hey, that's a pretty big radius.  I don't think it will fit on the screen"),$("#usecirclesize").prop("checked",!1),!1):!0}function O(e){s="";for(var t=0;t<e.length;t++)s+=e[t]+"\n";return s}cname2=e,null==e&&(e="geocanvas",cname2="");var H=$("#"+e)[0];if(void 0==H)return void 0;var B,q,z,F,W,V=$("#"+cname2+"shapes"),X=($("#message"),H.getContext("2d")),U=1,Y=1,G=1,K=1,Q=["green","blue","purple","red","orange","yellow"],J=0,Z=1,et=2,tt=3,nt=4,it=5,ot=6,st=[],rt=[],at=[],lt=-1,ct=function(){o(),r()},dt={x:H.width/2,y:H.height/2,offx:0,offy:0,theta:0,shapes_i:-1,lastx:-1,lasty:-1,lasttheta:0,addToShapes:function(){return this.shapes_i>=0?this.shapes_i:(this.shapes_i=rt.push(this)-1,t(),this.shapes_i)},delFromShapes:function(){this.shapes_i>=0&&(rt.splice(this.shapes_i,1),t(),this.shapes_i=-1)},toString:function(){return"(Protractor at "+this.x+", "+this.y+")"},move:function(){this.x-=this.lastx-B,this.y-=this.lasty-q,this.lastx=B,this.lasty=q},rotate:function(){var e=Math.atan2(B-this.x,q-this.y);this.theta-=e-this.lasttheta,this.lasttheta=e},setLasttheta:function(){this.lasttheta=Math.atan2(B-this.x,q-this.y)},draw:function(){X.strokeStyle="black",X.lineWidth=1;{var e=50,t=100;this.x,this.y}X.beginPath(),X.arc(this.x,this.y,5,0,2*Math.PI,!0),X.closePath(),X.stroke(),X.beginPath(),X.arc(this.x,this.y,t,Math.PI+this.theta,2*Math.PI+this.theta,!1),X.arc(this.x,this.y,e,Math.PI+this.theta,2*Math.PI+this.theta,!1);for(var n=1,i=[2,9,2],o=0;o<i.length;o++){n*=i[o],theta_i=Math.PI/n,myInnerRadius=(t-e)*o/i.length+e;for(var s=1;n>s;s++){var r=s*theta_i+this.theta,a=0-Math.sin(r),l=0-Math.cos(r),c=l*myInnerRadius+this.x,d=a*myInnerRadius+this.y,u=l*t+this.x,h=a*t+this.y;X.moveTo(c,d),X.lineTo(u,h)}}var c=Math.cos(this.theta)*t+this.x,d=Math.sin(this.theta)*t+this.y,u=Math.cos(this.theta+Math.PI)*t+this.x,h=Math.sin(this.theta+Math.PI)*t+this.y;X.moveTo(c,d),X.lineTo(u,h),X.stroke()},underMouse:function(){return b(this.x,this.y,100)},setOffset:function(){this.offx=B-this.x,this.offy=q-this.y},toOffset:function(){this.x=B-this.offx,this.y=q-this.offy}},ut={tool:"protractor",on_protractor:!1,mouse_is_down:!1,activate:function(){dt.addToShapes(),$(H).css("cursor","move")},deactivate:function(){dt.delFromShapes(),$(H).css("cursor","default")},mousedown:function(){this.mouse_is_down=!0,dt.lastx=z,dt.lasty=F,this.on_protractor=dt.underMouse(),this.on_protractor?dt.setOffset():dt.setLasttheta()},mouseup:function(){this.mouse_is_down=!1},mousemove:function(){this.mouse_is_down&&(this.on_protractor?dt.move():dt.rotate())}},ht=function(){return null},ft={tool:"compass",mouse_is_down:!1,usingsetradius:!1,minicircle_i:-1,useWrittenSize:function(){$("#compass span").attr("style",""),$("#compass span").text("Compass R = "+Math.round(parseFloat($("#circlesize").attr("value")),2)),$("#circlesize").attr("disabled",!0)},useMakeSize:function(){$("#compass span").attr("style","border-right:2px solid black;"),$("#compass span").text("Compass"),$("#circlesize").attr("disabled",!1)},activate:function(){$("#circlesize").show(),$("#usecirclesize").show(),this.useMakeSize(),$(H).css("cursor","crosshair")},deactivate:function(){$(xt[Z]+" span").attr("style",""),$("#compass span").text("Compass"),$("#circlesize").hide(),$("#usecirclesize").hide(),$(H).css("cursor","default")},mousedown:function(){if(!this.usingSetRadius()){this.mouse_is_down=!0,wt.start();var e=new E(B,q,5);e.hidden=!0,this.minicircle_i=rt.push(e)}},mouseup:function(){if(this.usingsetradius){var e=parseFloat($("#circlesize").attr("value"));if(isNaN(e)||0>e||e>1e3)return alert('"'+$("#circlesize").attr("value")+'" is an invalid circle radius - it has to be a number between 0 and 1000'),void 0}else{rt.pop();var e=wt.clear()}e>4&&(M(z,F,e),t()),this.mouse_is_down=!1,$("#circlesize").attr("value",""+e)},mousemove:function(){if(this.mouse_is_down&&!this.usingsetradius){{y(B,q,z,F)}wt.follow()}},usingSetRadius:function(){return this.usingsetradius=1==$("#usecirclesize:checked").length,this.usingsetradius}},pt={mouse_is_down:!1,x:0,y:0,last_dist:"n/a",activate:ht,deactivate:ht,mousedown:function(){this.mouse_is_down=!0,this.x=B,this.y=q,wt.start()},mousemove:function(){var e;this.mouse_is_down?(e="distance from ("+this.x+", "+this.y+") to (",e+=B+", "+q+") = "+y(this.x,this.y,B,q),wt.follow()):e="("+B+", "+q+"), just measured: "+this.last_dist},mouseup:function(){this.mouse_is_down=!1;var e=wt.clear();this.last_dist=e}},mt={x1:B,y1:q,mouse_is_down:!1,activate:function(){$(H).css("cursor","crosshair")},deactivate:function(){$(H).css("cursor","default")},mousedown:function(){this.mouse_is_down=!0,this.x1=B,this.y1=q,wt.start()},mouseup:function(){this.mouse_is_down=!1,wt.clear(),y(this.x1,this.y1,B,q)>5&&(N(this.x1,this.y1,B,q),t())},mousemove:function(){this.mouse_is_down&&wt.follow()}},gt={s_i:-1,activate:function(){at=[],$(H).css("cursor","pointer")},deactivate:function(){C(),$(H).css("cursor","default")},mousedown:ht,mouseup:function(){this.s_i>=0&&(rt.splice(this.s_i,1),this.s_i=-1)},mousemove:function(){if(this.s_i>=0){var e=rt[this.s_i];if(e.underMouse())return;e.unhilight(),this.s_i=-1}this.s_i=vt.onWhichShape(),this.s_i<st.length?this.s_i=-1:rt[this.s_i].highlight()}},vt={s_i:-1,n_points_added:0,selShapes:{},old_writeShapes:void 0,activate:function(){this.old_writeShapes=ct,ct=function(){o()},ct(),$(H).css("cursor","pointer")},deactivate:function(){ct=this.old_writeShapes(),ct(),$(H).css("cursor","default")},mousedown:function(){if(lt>=0){var e=at[lt],t=e.encode();if(this.selShapes[t]){var n=rt.lastIndexOf(this.selShapes[t]);rt.splice(n,1),this.selShapes[t]=void 0}else{var i=A(e.x,e.y,"");rt[i].highlight(),this.selShapes[t]=rt[i]}}else if(this.s_i>=0){var o=rt[this.s_i],s=o.encode();this.selShapes[s]?(o.unhilight(),this.selShapes[s]=void 0):(o.highlight(),this.selShapes[s]=!0)}this.writeSelection()},mousemove:function(){if(this.s_i>=0){var e=rt[this.s_i],t=e.encode();(!e.underMouse()||lt>=0)&&(this.selShapes[t]||e.unhilight(),this.s_i=-1)}else 0>lt&&(this.s_i=this.onWhichShape(),this.s_i>=0&&rt[this.s_i].highlight())},mouseup:ht,onWhichShape:function(){for(var e=0;e<rt.length;e++)if(rt[e].underMouse())return e;return-1},writeSelection:function(){var e="";for(i in this.selShapes)this.selShapes[i]&&(e=e+i+",");$("#"+cname2+"qbans_selected").attr("value",e.replace(/,$/,""))}},yt={activate:ht,deactivate:ht,mousedown:ht,mouseup:ht,mousemove:ht},bt=[ut,ft,pt,mt,vt,gt,yt],xt=["#protractor","#compass","#ruler","#line","#selectState","#eraseState","#blank"],wt={shape_i:-1,start:function(){if(this.shape_i<0){var e=new S(B,q,B+1,q+1);e.hidden=!0,this.shape_i=rt.push(e)-1}},follow:function(){rt[this.shape_i].set_p2(B,q),t()},clear:function(){line=rt[this.shape_i];var e=y(line.x1,line.y1,line.x2,line.y2);return rt.splice(this.shape_i,1),this.shape_i=-1,t(),e}};$("#"+e).mousedown(function(){z=B,F=q,W.mousedown()}),$("#"+e).mouseup(function(){W.mouseup(),lt=-1,t()}),$("#"+e).mousemove(function(e){n(e),d(),lt>=0&&(W==ut?(dt.x=at[lt].x,dt.y=at[lt].y):(B=at[lt].x,q=at[lt].y)),W.mousemove(),t()}),$("#compass").click(function(){D(Z)}),$("#usecirclesize").click(function(){$("#usecirclesize").prop("checked")?L()&&ft.useWrittenSize():ft.useMakeSize()}),$("#protractor").click(function(){D(J)}),$("#ruler").click(function(){D(et)}),$("#line").click(function(){D(tt)}),$("#clear").click(function(){l(),D(ot)}),$("#erase").click(function(){D(it)}),l(),a(),c()}function centerFractionInts(){$(".fraction .int").each(function(){var e=$(this),t=e.parent().height();e.css("top",t/2),e.css("margin-top",(0-e.outerHeight())/2)})}function rel_mt_fields(e){return e.siblings("div").children("input")}function set_mt_field_ids(e){blank_field=e.first().attr("id").replace(/[0-9]*$/,"");for(var t=0;t<e.length;t++)e[t].id=blank_field+t,e[t].name=blank_field+t}function bind_mt_buttons(){$(".add_mt_field").unbind("click"),$(".add_mt_field").bind("click",function(){var e=rel_mt_fields($(this)),t=e.first().clone();t.attr("value",""),e.last().after(t),e=rel_mt_fields($(this)),set_mt_field_ids(e),bind_mt_fields(),e.last().select()}),$(".del_mt_field").unbind("click"),$(".del_mt_field").bind("click",function(){var e=rel_mt_fields($(this)),t=e.length;t>1&&e.last().remove(),rel_mt_fields($(this)).last().select()}),bind_mt_fields()}function bind_mt_fields(){$(".multifield div input").unbind("keydown"),$(".multifield div input").keydown(function(e){if(32!=e.keyCode&&13!=e.keyCode||!e.shiftKey&&!e.ctrlKey){if(8==e.keyCode&&""==$(this).attr("value")){var t=$(this).parent();if(t.children().length>1){$(this).remove(),set_mt_field_ids(t.children());var n=t.children('input[value=""]');n.length>0?n.last().select():t.children().last().select()}e.preventDefault()}}else $(this).parent().siblings(".add_mt_field").click(),e.preventDefault()})}function o_to_s(e){ret=[];for(var t in e)ret.push(""+t+": "+e[t]);return"{ "+ret.join(", ")+" }"}function initNumberLine(){$(".numberline").each(function(){function e(e){var t=$("#"+a).offset(),n=Math.round(t.left),i=Math.round(t.top);m=e.pageX-n,g=e.pageY-i}function n(e){f.clearRect(0,0,h.width,30),f.font="12pt Calibri",f.fillStyle="black",f.fillText(e,10,25)}function o(e,t){return 0==t?e:t>e?o(t,e):o(e-t,t)}function s(e,t,n,i){f.beginPath(),f.moveTo(e,t),f.lineTo(n,i),f.stroke(),f.closePath()}var r=$(this),a=r.attr("id"),l=r.attr("data-name"),c="true"==r.attr("data-editable"),d="true"==r.attr("data-movable"),u=r.attr("data-which"),h=r[0];console.log("WOO HOO"),console.log(a),console.log(l),console.log(c),console.log(d),console.log(u);var f=h.getContext("2d");f.clearRect(0,0,h.width,h.height);var m,g,v,y,b=!1,x=25,w=180,C={num:10,center:h.width/2,snum:10,mid:0,diff:10,bdivs:1e3,zbarc:w,initz:w,poi:[],inp:null,points:[],lines:[],zoomin:[1,.5,.25,.2,.1,.05],zoominf:[1,2,4,5,10,20],zoomout:[1,2,5,10,50,100],ewid:Math.floor((h.width-2*x)/100),lower:40,movable:d,upper:320,ldiv:20,edit:c,curnum:0,curpos:0,initpos:0,fdiff:1,movemid:function(){var e=m-v;v=m,this.center+=e},zoom:function(){},addsub:function(){if(num=parseInt($("#"+a+"_"+l).attr("value")),this.curnum=num,leftpos=0,num>=this.mid&&num<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var e=this.mid;for(ct=0;e<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(e==num){leftpos=h.width/2+ct*this.ewid;break}e+=this.diff/10,ct+=1}}if(num<this.mid&&num>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var e=this.mid;for(ct=0;e>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(e==num){leftpos=h.width/2-ct*this.ewid;break}e-=this.diff/10,ct+=1}}0!=leftpos&&(this.curpos=leftpos,fwth=16,this.drawPointer(leftpos),f.save(),f.fillStyle="white",f.textAlign="center",f.fillText(""+num,leftpos,h.height-x+17),f.restore())},drawPointer:function(e){fwth=16,this.curpos=e,s(e,h.height-x,e-fwth/2,h.height-x+7),s(e,h.height-x,e+fwth/2,h.height-x+7),f.save(),f.fillStyle="black",f.fillRect(e-fwth/2,h.height-x+7,fwth,15),f.fillStyle="white",f.strokeStyle="red",0!=this.initpos&&s(e,h.height-x,this.initpos,h.height-x),f.restore()},label:function(e,t){if(leftpos=0,e>this.mid&&e<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var n=this.mid;for(ct=0;n<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(n==e){leftpos=h.width/2+ct*this.ewid;break}n+=this.diff/10,ct+=1}}if(e<this.mid&&e>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var n=this.mid;for(ct=0;n>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(n==e){leftpos=h.width/2-ct*this.ewid;break}n-=this.diff/10,ct+=1}}0!=leftpos&&(fwth=8*(""+e).length,s(leftpos,h.height-x,leftpos-fwth/2,h.height-x+15),s(leftpos,h.height-x,leftpos+fwth/2,h.height-x+15),f.fillStyle=t,f.fillRect(leftpos-fwth/2,h.height-x+15,fwth,15),f.fillStyle="white",f.fillText(""+e,leftpos-fwth/2+2,h.height-x+24),f.fillStyle="black")},lines:function(e){if(num=e[0],leftpos=0,num>this.mid&&num<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==num){leftpos=h.width/2+ct*this.ewid;break}t+=this.diff/10,ct+=1}}if(num<this.mid&&num>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==num){leftpos=h.width/2-ct*this.ewid;break}t-=this.diff/10,ct+=1}}if(lnum1=leftpos,num=e[1],leftpos=0,num>this.mid&&num<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==num){leftpos=h.width/2+ct*this.ewid;break}t+=this.diff/10,ct+=1}}if(num<this.mid&&num>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==num){leftpos=h.width/2-ct*this.ewid;break}t-=this.diff/10,ct+=1}}lnum2=leftpos,f.strokeStyle="red",s(lnum1,h.height-x,lnum2,h.height-x),f.strokeStyle="black"},inputfield:function(e){if(leftpos=0,e>this.mid&&e<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t<=this.mid+this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==e){leftpos=h.width/2+ct*this.ewid;break}t+=this.diff/10,ct+=1}}if(e<this.mid&&e>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum)){var t=this.mid;for(ct=0;t>=this.mid-this.diff*(h.width-2*x)/(2*this.ewid*this.snum);){if(t==e){leftpos=h.width/2-ct*this.ewid;break}t-=this.diff/10,ct+=1}}0!=leftpos&&(fwth=8*(""+e).length,s(leftpos,h.height-x,leftpos-fwth/2,h.height-x+15),s(leftpos,h.height-x,leftpos+fwth/2,h.height-x+15),html="<input type=text id="+l+" name="+l+" maxlength="+(""+e).length+' style="width:'+fwth+"px; padding:0px; position:absolute; top:"+(h.height-x+15)+"px; margin-right:0px; margin-left:7px; left:"+(leftpos-fwth/2-1)+'px;">',$("#nline").append(html))},moveZBar:function(){var e=g-y;y=g,e+this.zbarc<=this.upper-this.ldiv-1&&e+this.zbarc>=this.lower+this.ldiv+1&&(this.zbarc+=e,w=this.zbarc,this.zbarc<this.initz?this.diff=this.zoomout[Math.floor((this.initz-this.zbarc)/this.ldiv)]:(this.diff=this.zoomin[Math.floor((this.zbarc-this.initz)/this.ldiv)],this.fdiff=this.zoominf[Math.floor((this.zbarc-this.initz)/this.ldiv)]))},drawZBar:function(){s(5,this.lower,5,this.upper),s(5,this.upper,15,this.upper),s(15,this.upper,15,this.lower),s(15,this.lower,5,this.lower),s(5,this.zbarc-this.ldiv,5,this.zbarc+this.ldiv),s(5,this.zbarc+this.ldiv,15,this.zbarc+this.ldiv),s(15,this.zbarc+this.ldiv,15,this.zbarc-this.ldiv),s(15,this.zbarc-this.ldiv,5,this.zbarc-this.ldiv),n("The small divs are "+this.diff/10+" and the big divs are "+this.diff)},draw:function(e){var n=h.width-x,r=x,a=0;for(i=this.center;i>=x;i-=this.ewid)i<=h.width-x&&(s(i,h.height-x,i,h.height-x-10),0==a&&(r=i),a+=1),n=i;for(a=0,i=this.center;i<=h.width-x;i+=this.ewid)i>=x&&(s(i,h.height-x,i,h.height-x-10),0==a&&n>i&&(n=i),i>r&&(r=i),a+=1);t=this.mid;var a=this.mid;for(i=this.center;i>=x;i-=this.ewid*this.snum){if(i<=h.width-x&&(s(i,h.height-x,i,h.height-x-20),this.poi.push(i),i!=this.center))if("dec"==e||this.diff>=1)f.font="9pt Calibri",(Math.round(1e3*t)/1e3).toString().length<2?f.fillText(Math.round(1e3*t)/1e3,i-3,h.height-10):(Math.round(1e3*t)/1e3).toString().length<3?f.fillText(Math.round(1e3*t)/1e3,i-6,h.height-10):(Math.round(1e3*t)/1e3).toString().length<4?f.fillText(Math.round(1e3*t)/1e3,i-9,h.height-10):(Math.round(1e3*t)/1e3).toString().length<5?f.fillText(Math.round(1e3*t)/1e3,i-12,h.height-10):f.fillText(Math.round(1e3*t)/1e3,i-15,h.height-10);else{var l=-a,c=this.fdiff,d=o(l,c);l=Math.round(l/d),c=Math.round(c/d),f.font="9pt Calibri",1!=c?(f.fillText(-l,i-9,h.height-15),f.fillText("__",i-9,h.height-15),f.fillText(c,i-9,h.height-4)):f.fillText(-l,i-9,h.height-10)}t-=this.diff,a-=1
}for(a=0,t=this.mid,i=this.center;i<=h.width-x;i+=this.ewid*this.snum){if(i>=x)if(s(i,h.height-x,i,h.height-x-20),this.poi.push(i),"dec"==e||this.diff>=1)f.font="9pt Calibri",(Math.round(1e3*t)/1e3).toString().length<2?f.fillText(Math.round(1e3*t)/1e3,i-3,h.height-10):(Math.round(1e3*t)/1e3).toString().length<3?f.fillText(Math.round(1e3*t)/1e3,i-6,h.height-10):(Math.round(1e3*t)/1e3).toString().length<4?f.fillText(Math.round(1e3*t)/1e3,i-9,h.height-10):(Math.round(1e3*t)/1e3).toString().length<5?f.fillText(Math.round(1e3*t)/1e3,i-12,h.height-10):f.fillText(Math.round(1e3*t)/1e3,i-15,h.height-10);else{var l=a,c=this.fdiff,d=o(l,c);l=Math.round(l/d),c=Math.round(c/d),f.font="9pt Calibri",1!=c?(f.fillText(l,i-9,h.height-15),f.fillText("__",i-9,h.height-15),f.fillText(c,i-9,h.height-4)):f.fillText(-l,i-9,h.height-10)}t+=this.diff,a+=1}s(n,h.height-x,r,h.height-x)}};if(C.draw("frac"),C.diff=parseInt($("#"+a+"_bigdiv").attr("value")),"inpval"==u&&C.inputfield(parseInt($("#"+a+"_inp").attr("value"))),"movinp"==u&&(C.addsub(),C.initpos=C.curpos),"label"==u){for(labs=$("#"+a+"_label").attr("value").split(","),p=0;p<labs.length;p++)0==p?C.label(labs[p],"black"):C.label(labs[p],"green");for(lines=$("#"+a+"_lines").attr("value").split(";"),p=0;p<lines.length;p++)C.lines(lines[p].split(","))}C.edit&&C.drawZBar(),$("#"+a).mousedown(function(){initdownx=m,v=m,y=g,b=!0}),$("#"+a).mouseup(function(){"movinp"==u&&(C.initpos>m?($("#"+a+"_"+l).attr("value",C.curnum+Math.round((v-initdownx)/C.ewid)),$("#"+l).attr("value",C.curnum+Math.round((v-initdownx)/C.ewid))):($("#"+a+"_"+l).attr("value",C.curnum+Math.round((v-initdownx)/C.ewid)),$("#"+l).attr("value",C.curnum+Math.round((v-initdownx)/C.ewid))),f.clearRect(0,0,h.width,h.height),C.draw("dec"),C.addsub()),b=!1}),$("#"+a).mousemove(function(t){e(t),"movinp"==u&&b&&v<C.curpos+8&&v>C.curpos-8&&y>h.height-x+7&&m>x+2&&m<h.width-x-2&&(f.clearRect(0,0,h.width,h.height),C.draw("dec"),C.drawPointer(m),v=m),b&&C.movable&&(y>h.height-75&&(C.movemid(),f.clearRect(0,0,h.width,h.height),C.draw("frac"),C.edit&&C.drawZBar()),v>5&&20>v&&y>w-25&&w+25>y&&(C.moveZBar(),f.clearRect(0,0,h.width,h.height),C.drawZBar(),C.draw("frac")))})})}function drawimage2(e,t,n,i,o,s,r,a){for(var l=$("#myCanvas_"+e),c=l[0].getContext("2d"),d=l[0].width,u=(l[0].height,o),h=i,f=0;t+n/2-n%2>f;f++)d>h+a+s?(c.drawImage(image1,h,u,s,r),h+=a+s):(h=i,u=u+a+r,c.drawImage(image1,h,u,s,r),h+=a+s);for(var f=0;n%2>f;f++)d>h+a+s/2?(c.drawImage(image2,h,u,s/2,r),h+=a+s/2):(h=i,u=u+a+r,c.drawImage(image2,h,u,s/2,r),h+=a+s/2)}function drawimage3(e,t,n,i,o,s){{var r=$("#myCanvas_"+e),a=r[0].getContext("2d"),l=r[0].width;r[0].height}0==no1[e]&&0==no2[e]?(xcordinate[e]=t,ycordinate[e]=n,a.drawImage(image1,xcordinate[e],ycordinate[e],i,o),xcordinate[e]=xcordinate[e]+(i+s)):xcordinate[e]+s+i<l?(a.drawImage(image1,xcordinate[e],ycordinate[e],i,o),xcordinate[e]=xcordinate[e]+(i+s)):(xcordinate[e]=t,ycordinate[e]=ycordinate[e]+s+o,a.drawImage(image1,xcordinate[e],ycordinate[e],i,o),xcordinate[e]=xcordinate[e]+(s+i)),no1[e]=no1[e]+1,no[e]=no[e]+1,putvalue2(e,no[e])}function drawimage4(e,t,n,i,o,s){{var r=$("#myCanvas_"+e),a=r[0].getContext("2d"),l=r[0].width;r[0].height}0==no1[e]&&0==no2[e]?(xcordinate[e]=t,ycordinate[e]=n,a.drawImage(image2,xcordinate[e],ycordinate[e],i/2,o),xcordinate[e]=xcordinate[e]+(i/2+s)):xcordinate[e]+s+i<l?(a.drawImage(image2,xcordinate[e],ycordinate[e],i/2,o),xcordinate[e]=xcordinate[e]+(i/2+s)):(xcordinate[e]=t,ycordinate[e]=ycordinate[e]+s+o,a.drawImage(image2,xcordinate[e],ycordinate[e],i/2,o),xcordinate[e]=xcordinate[e]+(s+i/2)),no2[e]=no2[e]+1,no[e]=no[e]+.5,putvalue2(e,no[e])}function putvalue2(e,t){var e=e,t=t;$("#pictogram_table tr:eq("+e+")").find("input").attr("value",t)}function input1(e,t){for(var n=document.getElementById("table"),i=n.insertRow(0),o=0;e>o;o++)for(var s=variablearray[o],r=0;t>r;r++){var a=s+s+r,l=i.insertCell(r),c=r+1;l.id=a,l.style.width="100px";var d=s+c,u=document.createElement("BUTTON"),h="<sup>"+c+"</sup>";u.setAttribute("type","button"),u.innerHTML=s+h,u.id=d,u.class="new",u.onclick=function(){myfunc(this.id)};var f=document.getElementById(a);f.appendChild(u)}}function myfunc(e,t,n){var i=n,o=document.getElementById("textfield"),s=o.innerHTML,r=e;switch(r){case"BackSpace":if(" "==s.charAt(s.length-1))o.innerHTML=s.substr(0,s.length-1);else if("+"==s.charAt(s.length-1)){o.innerHTML=s.substr(0,s.length-1);var s=o.innerHTML,a=s.lastIndexOf(" ");sign="-"==s.charAt(a-1)?1:0,deleted=1}else if("-"==s.charAt(s.length-1)){o.innerHTML=s.substr(0,s.length-1);var s=o.innerHTML,a=s.lastIndexOf(" ");sign="-"==s.charAt(a-1)?1:0,deleted=1}else if(">"==s.charAt(s.length-1)){var l=0,a=s.lastIndexOf(" ");l="-"==s.charAt(a-1)?1:0;for(var c=0,d=0;6>d;d++)c+=arrayexp[d];if(0==c){for(var u=0,h=a+1,f="",p=s.charAt(h);0==p||1==p||2==p||3==p||4==p||5==p||6==p||7==p||8==p||9==p;)f+=p,h++,p=s.charAt(h),u++;""==f&&(f=1);var m=parseInt(f);0==l||(m=-1*m);for(var g=s.charAt(h,h),v=s.charAt(h+6,h+6);h<s.length;){for(var y=parseInt(v),d=0;6>d;d++)g==variablearray[d]&&(arrayexp[d]+=y);h+=13;var g=s.charAt(h,h),v=s.charAt(h+6,h+6)}var b=getindex(6,i);arraycoeff[b]=arraycoeff[b]-m,chHTable(index);for(var d=0;6>d;d++)arrayexp[d]=0}else{for(var d=0;6>d;d++)arrayexp[d]=0;coefficient=""}o.innerHTML=s.substr(0,a)}else if(1==deleted){var l=0,a=s.lastIndexOf(" ");l="-"==s.charAt(a-1)?1:0;var u=0,h=a+1,f="",f=s.substr(h,s.length);""==f&&(f=1);var m=parseInt(f);0==l||(m=-1*m),arraycoeff[0]=arraycoeff[0]-m,chHTable(index),o.innerHTML=s.substr(0,h),coefficient=""}else o.innerHTML=s.substr(0,s.length-1),coefficient=coefficient.substr(0,coefficient.length-1);break;case"Enter":if(o.innerHTML+="<br>",intcoefficient=parseInt(coefficient),""==coefficient&&(intcoefficient=1),index=getindex(6,i),0==sign||(intcoefficient=-1*intcoefficient),""!=coefficient){void 0===arraycoeff[index]?arraycoeff[index]=intcoefficient:arraycoeff[index]+=intcoefficient,chHTable(index);for(var d=0;6>d;d++)arrayexp[d]=0}coefficient="";break;case"+ ":o.innerHTML+=r,intcoefficient=parseInt(coefficient),""==coefficient&&(intcoefficient=1),index=getindex(6,i),0==sign||(intcoefficient=-1*intcoefficient),void 0===arraycoeff[index]?arraycoeff[index]=intcoefficient:arraycoeff[index]+=intcoefficient,chHTable(index);for(var d=0;6>d;d++)arrayexp[d]=0;sign=0,coefficient="";break;case"- ":o.innerHTML+=r,intcoefficient=parseInt(coefficient),""==coefficient&&(intcoefficient=1),index=getindex(6,i),0==sign||(intcoefficient=-1*intcoefficient),void 0===arraycoeff[index]?arraycoeff[index]=intcoefficient:arraycoeff[index]+=intcoefficient,chHTable(index);for(var d=0;6>d;d++)arrayexp[d]=0;sign=1,coefficient="";break;default:if(1==r.length)o.innerHTML+=r,coefficient+=r;else{var h=r.substr(r.length-1,r.length),f=r.substr(r.length-2,r.length-1),p=parseInt(h),x="<sup>"+h+"</sup>";o.innerHTML+=f+x;for(var d=0;6>d;d++)f==variablearray[d]&&(arrayexp[d]+=p)}}}function getindex(e,t){for(var n=0,i=t,o=0;e>o;o++)n+=arrayexp[o]*Math.pow(i,o);return n}function chHTable(e){var e=e;$("#table2 tr:eq("+e+")").find("input:eq("+e+")").attr("value",arraycoeff[e])}function createshape(e,t,n,i,o){if("circle"==e){var s=t,r=n,a=i;ctx.beginPath(),ctx.arc(s,r,a,0,2*Math.PI),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="white",ctx.fill()}else if("rectangle1"==e){var l=t,c=n,d=i,u=o;ctx.beginPath(),ctx.rect(l,c,d,u),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill()}else if("rectangle2"==e){var l=t,c=n,d=i,u=o;ctx.beginPath(),ctx.rect(l,c,d,u),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill()}else if("rectangle3"==e){var l=t,c=n,d=i,u=o;ctx.beginPath(),ctx.rect(l,c,d,u),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill()}else alert("futre vu")}function slice(e,t,n,i,o,s,r,a,l){if("circle"==e){for(var c=i,d=o,u=s,h=t,f=360/h,p=h/180*Math.PI,m=p,g=0;f>g;g++)ctx.beginPath(),ctx.arc(c,d,u,0,m),ctx.lineTo(c,d),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),m+=p,colored[g]=0;m=p;for(var g=0;f>g;g++)ctx.beginPath(),ctx.arc(c,d,u,0,m),ctx.lineTo(c,d),ctx.strokeStyle="black",ctx.closePath(),ctx.stroke(),m+=p;for(var g=0;g<a.length;g++){var v=a[g];alert("slice number is "+v);var y=(v-1)*p,b=y+p;ctx.beginPath(),ctx.arc(c,d,u,y,b),ctx.lineTo(c,d),ctx.stroke(),ctx.fillStyle="red",ctx.fill(),ctx.beginPath(),ctx.arc(c,d,u,y,b),ctx.lineTo(c,d),ctx.strokeStyle="black",ctx.closePath(),ctx.stroke(),colored[v-1]=1,1==l&&putvalue(v)}}else if("rectangle1"==e){var x=i,w=o,C=s,T=r,_=t,p=C/_;ctx.beginPath(),ctx.rect(x,w,C,T),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill();for(var b=x,g=0;p>g;g++)ctx.beginPath(),ctx.moveTo(b,w),ctx.lineTo(b+_,w),ctx.lineTo(b+_,w+T),ctx.lineTo(b,w+T),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),b+=_;for(var g=0;g<a.length;g++){var v=a[g];alert("slice number is "+v);var y=(v-1)*_,b=x+y;ctx.beginPath(),ctx.moveTo(b,w),ctx.lineTo(b+_,w),ctx.lineTo(b+_,w+T),ctx.lineTo(b,w+T),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),colored[v-1]=1,1==l&&putvalue(v)}}else if("rectangle2"==e){var x=i,w=o,C=s,T=r,_=t,p=T/_;ctx.beginPath(),ctx.rect(x,w,C,C),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill();for(var b=w,g=0;p>g;g++)ctx.beginPath(),ctx.moveTo(x,b),ctx.lineTo(x,b+_),ctx.lineTo(x+C,b+_),ctx.lineTo(x+C,b),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),b+=_,colored[g]=0;alert("alert");for(var g=0;g<a.length;g++){var v=a[g];alert("slice number is "+v);var y=(v-1)*_,b=w+y;ctx.beginPath(),ctx.moveTo(x,b),ctx.lineTo(x,b+_),ctx.lineTo(x+C,b+_),ctx.lineTo(x+C,b),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),colored[v-1]=1,1==l&&putvalue(v)}}else if("rectangle3"==e){var x=i,w=o,C=s,T=r,_=t,k=n,p=C/_,f=T/k;ctx.beginPath(),ctx.rect(x,w,C,T),ctx.strokeStyle="red",ctx.stroke(),ctx.fillStyle="white",ctx.fill;for(var S=x,N=w,g=0;p>g;g++){N=w;for(var j=0;f>j;j++)ctx.beginPath(),ctx.moveTo(S,N),ctx.lineTo(S,N+k),ctx.lineTo(S+_,N+k),ctx.lineTo(S+_,N),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),N+=k;S+=_}for(var g=0;g<a.length;g++){var v=a[g];alert("slice number is "+v);var E=v%_,M=(v-E)/_+1,$=(M-1)*_+x,I=(E-1)*k+w;ctx.beginPath(),ctx.moveTo($,I),ctx.lineTo($,I+k),ctx.lineTo($+_,I+k),ctx.lineTo($+_,I),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),colored[v-1]=1,1==l&&putvalue(v)}}}function update(e,t,n,i,o,s,r,a){if("circle"==t){var l=o,c=s,d=r,u=n,h=u/180*Math.PI,f=1,p=$("#myCanvas"),m=p.offset(),g=Math.round(m.left),v=Math.round(m.top),y=e.pageX-g-l,b=e.pageY-v-c;coordinate[0]=y,coordinate[1]=b;var x=Math.atan(b/y),w=180*x/Math.PI;if(d*d>y*y+b*b){f+=b>0?w>0?Math.floor(w/u):Math.floor((w+90)/u)+Math.floor(90/u):w>0?Math.floor(w/u)+Math.floor(180/u):Math.floor((w+90)/u)+Math.floor(270/u),alert("slice number is "+f);var C=(f-1)*h,T=C+h;1==colored[f-1]?(ctx.beginPath(),ctx.arc(l,c,d,C,T),ctx.lineTo(l,c),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),ctx.beginPath(),ctx.arc(l,c,d,C,T),ctx.lineTo(l,c),ctx.strokeStyle="black",ctx.closePath(),ctx.stroke(),colored[f-1]=0,putvalue(f)):(ctx.beginPath(),ctx.arc(l,c,d,C,T),ctx.lineTo(l,c),ctx.stroke(),ctx.fillStyle="red",ctx.fill(),ctx.beginPath(),ctx.arc(l,c,d,C,T),ctx.lineTo(l,c),ctx.strokeStyle="black",ctx.closePath(),ctx.stroke(),colored[f-1]=1,putvalue(f))}else alert("outside the circle")}else if("rectangle1"==t){var _=n,f=1,k=o,S=s,N=r,j=a,p=$("#myCanvas"),m=p.offset(),g=Math.round(m.left),v=Math.round(m.top),y=e.pageX-g-k,b=e.pageY-v-S;if(coordinate[0]=y,coordinate[1]=b,y>=0&&N>=y&&b>=0&&j>=b){f+=Math.floor(y/_),alert("sliceno is "+f);var C=(f-1)*_,T=k+C;1==colored[f-1]?(ctx.beginPath(),ctx.moveTo(T,S),ctx.lineTo(T+_,S),ctx.lineTo(T+_,S+j),ctx.lineTo(T,S+j),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),colored[f-1]=0,putvalue(f)):(ctx.beginPath(),ctx.moveTo(T,S),ctx.lineTo(T+_,S),ctx.lineTo(T+_,S+j),ctx.lineTo(T,S+j),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),colored[f-1]=1,putvalue(f))}else alert("outside the rectangle")}else if("rectangle2"==t){var _=n,f=1,k=o,S=s,N=r,j=a,p=$("#myCanvas"),m=p.offset(),g=Math.round(m.left),v=Math.round(m.top),y=e.pageX-g-k,b=e.pageY-v-S;if(coordinate[0]=y,coordinate[1]=b,alert("coordinates are  "+y+"and"+b),y>=0&&N>=y&&b>=0&&j>=b){f+=Math.floor(b/_),alert("sliceno is "+f);var C=(f-1)*_,T=S+C;1==colored[f-1]?(ctx.beginPath(),ctx.moveTo(k,T),ctx.lineTo(k,T+_),ctx.lineTo(k+N,T+_),ctx.lineTo(k+N,T),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),colored[f-1]=0,putvalue(f)):(ctx.beginPath(),ctx.moveTo(k,T),ctx.lineTo(k,T+_),ctx.lineTo(k+N,T+_),ctx.lineTo(k+N,T),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),colored[f-1]=1,putvalue(f))}else alert("outside the rectangle")}else if("rectangle3"==t){var _=n,E=i,f=1,M=1,I=1,k=o,S=s,N=r,j=a,p=$("#myCanvas"),m=p.offset(),g=Math.round(m.left),v=Math.round(m.top),y=e.pageX-g-k,b=e.pageY-v-S;if(coordinate[0]=y,coordinate[1]=b,y>=0&&N>=y&&b>=0&&j>=b){I+=Math.floor(b/E),M+=Math.floor(y/_),f=_*(M-1)+I,alert("sliceno is "+f);var A=(M-1)*_+k,R=(I-1)*E+S;1==colored[f-1]?(ctx.beginPath(),ctx.moveTo(A,R),ctx.lineTo(A,R+E),ctx.lineTo(A+_,R+E),ctx.lineTo(A+_,R),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="green",ctx.fill(),colored[f-1]=0,putvalue(f)):(ctx.beginPath(),ctx.moveTo(A,R),ctx.lineTo(A,R+E),ctx.lineTo(A+_,R+E),ctx.lineTo(A+_,R),ctx.strokeStyle="red",ctx.closePath(),ctx.stroke(),ctx.fillStyle="black",ctx.fill(),colored[f-1]=1,putvalue(f))}else alert("outside the rectangle")}}function putvalue(e){var e=e-1;$("#shapetable tr:eq("+e+")").find("input").attr("value",colored[e])}function createshape1(e,t,n,i,o,s,r){if("circle"==e){var a=5*n,l=5*i,c=5*t,d=o,r=r;0==d?(ctx.beginPath(),ctx.arc(a,l,c,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.moveTo(a,l),ctx.lineTo(a+c,l),ctx.stroke(),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="white",ctx.fill(),ctx.fillStyle="blue",ctx.font=" 14px Arial"):(ctx.beginPath(),ctx.arc(a,l,c,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.moveTo(a,l),ctx.lineTo(a+c,l),ctx.stroke(),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="white",ctx.fill(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText("radius = "+c/5+r,a+5,l-5))}else if("arc_1"==e){var a=t,l=n,c=5*i,u=o,h=r;ctx.beginPath(),ctx.arc(a,l,c,u,h,!0),ctx.stroke()}else if("arc_2"==e){var a=t,l=n,c=5*i,u=o,h=r;ctx.beginPath(),ctx.arc(a,l,c,u,h,!1),ctx.stroke()}else if("arc_3"==e){var a=t,l=n,c=5*i,f=s+c,u=o,h=r,p=a+f*Math.cos(u),m=l+f*Math.sin(u),g=a+f*Math.cos(h),v=l+f*Math.sin(h);ctx.beginPath(),ctx.arc(a,l,c,u,h,!0),ctx.stroke(),ctx.beginPath(),ctx.moveTo(a,l),ctx.lineTo(p,m),ctx.stroke(),ctx.strokeStyle="black",ctx.stroke(),ctx.beginPath(),ctx.moveTo(a,l),ctx.lineTo(g,v),ctx.stroke()}else if("rectangle"==e){var y=10*i,b=10*s,f=10*t,x=10*n,r=r,d=o;0==d?(ctx.beginPath(),ctx.rect(y,b,f,x),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial"):1==d?(ctx.beginPath(),ctx.rect(y,b,f,x),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(" "+f/10+r,y+f/4,b-5)):2==d?(ctx.beginPath(),ctx.rect(y,b,f,x),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(""+x/10+r,y-40,b+x/2)):(ctx.beginPath(),ctx.rect(y,b,f,x),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(" "+f/10+r,y+f/4,b-5),ctx.fillText(""+x/10+r,y-40,b+x/2))}else if("eqtriangle"==e){var d=o;if(0==d){var y=i,b=s,f=10*t,r=r,w=f/2*Math.tan(Math.PI/3);ctx.beginPath(),ctx.moveTo(y,b),ctx.lineTo(y+f,b),ctx.lineTo(y+f/2,b-w),ctx.lineTo(y,b),ctx.strokeStyle="black",ctx.stroke(),sctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(" "+f/10+r,y+f/4,b-5),ctx.textAlign="center",ctx.fillText("Equilateral Triangle",150,295)}else{var y=i,b=s,f=10*t,r=r,w=f/2*Math.tan(Math.PI/3);ctx.beginPath(),ctx.moveTo(y,b),ctx.lineTo(y+f,b),ctx.lineTo(y+f/2,b-w),ctx.lineTo(y,b),ctx.strokeStyle="black",ctx.stroke(),ctx.beginPath(),ctx.moveTo(y+f/2,b-w),ctx.lineTo(y+f/2,b),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(" "+f/10+r,y+f/4,b-5),ctx.fillText("height = "+(w/10).toFixed(2),y+f/2,(b+(b-w))/2),ctx.textAlign="center",ctx.fillText("Equilateral Triangle",150,295)}}else if("isotriangle"==e){var d=o;if(0==d){var y=i,b=s,C=10*t,T=10*n,r=r,_=Math.acos(T/(2*C)),w=T/2*Math.tan(_);ctx.beginPath(),ctx.moveTo(y,b),ctx.lineTo(y+T,b),ctx.lineTo(y+T/2,b-w),ctx.lineTo(y,b),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="white",ctx.fill(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(" "+T/10+r,y+T/4,b-5),ctx.fillText(""+C/10+r,y,b-w/2),ctx.textAlign="center",ctx.fillText("Isoceles Triangle",150,295)}else{var y=i,b=s,C=10*t,T=10*n,r=r,_=Math.acos(T/(2*C)),w=T/2*Math.tan(_);ctx.beginPath(),ctx.moveTo(y,b),ctx.lineTo(y+T,b),ctx.lineTo(y+T/2,b-w),ctx.lineTo(y,b),ctx.strokeStyle="black",ctx.stroke(),ctx.fillStyle="white",ctx.fill(),ctx.beginPath(),ctx.moveTo(y+T/2,b-w),ctx.lineTo(y+T/2,b),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText("height = "+(w/10).toFixed(2),y+T/2,(b+(b-w))/2),ctx.fillText(" "+T/10+r,y+T/4,b-5),ctx.fillText(""+C/10+r,y,b-w/2),ctx.textAlign="center",ctx.fillText("Isoceles Triangle",150,295)}}else if("scalene"==e){var d=o,e=10*t,k=10*n,S=10*i;if(e+k>S&&k+S>e&&S+e>k)if(0!=d){var N=(k*k+S*S-e*e)/(2*k*S),j=Math.acos(N),E=Math.sin(j),c=e/(2*Math.sin(j)),M=(e*e+S*S-k*k)/(2*e*S),$=Math.acos(M),I=c*E,A=c*N,R=c*Math.cos(.5*Math.PI-(j+2*$)),P=c*Math.sin(.5*Math.PI-(j+2*$)),a=150,l=150,w=Math.abs(P-A);ctx.beginPath(),ctx.moveTo(a-I,l+A),ctx.lineTo(a+I,l+A),ctx.lineTo(a+R,l+P),ctx.lineTo(a-I,l+A),ctx.stroke(),ctx.beginPath(),ctx.moveTo(a+R,l+P),ctx.lineTo(a+R,l+A),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 12px Arial",ctx.fillText("height = "+(w/10).toFixed(2),130,282),ctx.textAlign="center",ctx.fillText(""+e/10+r,a,l+A+10),ctx.fillText(""+k/10+r,(a+I+(a+R))/2,(l+A+(l+P))/2),ctx.fillText(""+S/10+r,(a-I+(a+R))/2,(l+A+(l+P))/2),ctx.fillText("Triangle",150,295)}else{var N=(k*k+S*S-e*e)/(2*k*S),j=Math.acos(N),E=Math.sin(j),c=e/(2*Math.sin(j)),M=(e*e+S*S-k*k)/(2*e*S),$=Math.acos(M),I=c*E,A=c*N,R=c*Math.cos(.5*Math.PI-(j+2*$)),P=c*Math.sin(.5*Math.PI-(j+2*$)),a=150,l=150;ctx.beginPath(),ctx.moveTo(a-I,l+A),ctx.lineTo(a+I,l+A),ctx.lineTo(a+R,l+P),ctx.lineTo(a-I,l+A),ctx.stroke(),ctx.fillText(" "+f/10+r,y+f/4,b-5),ctx.textAlign="center",ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.fillText(""+e/10+r,a,l+A+10),ctx.fillText(""+k/10+r,(a+I+(a+R))/2,(l+A+(l+P))/2),ctx.fillText(""+S/10+r,(a-I+(a+R))/2,(l+A+(l+P))/2),ctx.fillText("Triangle",150,295)}else alert("A triangle cannot be constructed with these side lengths.")}else if("regularpolygon"==e){var d=o,D=t,f=n,y=250,b=250,L=i,r=r,O=f,D=D,_=180/D,c=O/(2*Math.sin(_));if(0==d){for(var H=0;D>H;H++)regularpoly_x[H]=c*Math.cos(2*Math.PI*H/D),regularpoly_y[H]=c*Math.sin(2*Math.PI*H/D),original2[3*H]=regularpoly_x[H],original2[3*H+1]=regularpoly_y[H],original2[3*H+2]=10;createshape2(original2,r,150,150,0),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("Regular Polygon",150,L-5)}else{for(var H=0;D>H;H++)regularpoly_x[H]=c*Math.cos(2*Math.PI*H/D),regularpoly_y[H]=c*Math.sin(2*Math.PI*H/D),original2[3*H]=regularpoly_x[H],original2[3*H+1]=regularpoly_y[H],original2[3*H+2]=10;createshape2(original2,r,250,250,0),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("side length = "+f+r,150,L-20),ctx.fillText("Regular Polygon",150,L-5)}}else if("cube"==e){var B=10*t,q=10*n,z=10*i,r=r;if(0==o){var _=Math.PI/6,k=z*Math.sin(_)*Math.sin(Math.PI/4),e=z*Math.cos(_)*Math.sin(Math.PI/4);ctx.beginPath(),ctx.moveTo(B,q),ctx.lineTo(B,q+z),ctx.lineTo(B+z,q+z),ctx.lineTo(B+z,q),ctx.lineTo(B,q),ctx.lineTo(B+e,q-k),ctx.lineTo(B+e+z,q-k),ctx.lineTo(B+z,q),ctx.moveTo(B+z,q+z),ctx.lineTo(B+e+z,q+z-k),ctx.lineTo(B+e+z,q-k),ctx.stroke()}else{var _=Math.PI/6,k=z*Math.sin(_)*Math.sin(Math.PI/4),e=z*Math.cos(_)*Math.sin(Math.PI/4);ctx.beginPath(),ctx.moveTo(B,q),ctx.lineTo(B,q+z),ctx.lineTo(B+z,q+z),ctx.lineTo(B+z,q),ctx.lineTo(B,q),ctx.lineTo(B+e,q-k),ctx.lineTo(B+e+z,q-k),ctx.lineTo(B+z,q),ctx.moveTo(B+z,q+z),ctx.lineTo(B+e+z,q+z-k),ctx.lineTo(B+e+z,q-k),ctx.stroke(),ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("length = "+z/10+r,B+z/2,q)}}else if("cuboid_1"==e){var B=10*t,q=10*n,z=10*i,F=10*o,W=10*s,_=Math.PI/6,k=F*Math.sin(_)*Math.sin(Math.PI/4),e=F*Math.cos(_)*Math.sin(Math.PI/4);ctx.beginPath(),ctx.moveTo(B,q),ctx.lineTo(B,q+W),ctx.lineTo(B+z,q+W),ctx.lineTo(B+z,q),ctx.lineTo(B,q),ctx.lineTo(B+e,q-k),ctx.lineTo(B+e+z,q-k),ctx.lineTo(B+z,q),ctx.moveTo(B+z,q+W),ctx.lineTo(B+e+z,q+W-k),ctx.lineTo(B+e+z,q-k),ctx.stroke()}else if("cuboid_2"==e){var B=10*t,q=10*n,z=10*i,F=10*o,W=10*s,r=r,_=Math.PI/6,k=F*Math.sin(_)*Math.sin(Math.PI/4),e=F*Math.cos(_)*Math.sin(Math.PI/4);ctx.beginPath(),ctx.moveTo(B,q),ctx.lineTo(B,q+W),ctx.lineTo(B+z,q+W),ctx.lineTo(B+z,q),ctx.lineTo(B,q),ctx.lineTo(B+e,q-k),ctx.lineTo(B+e+z,q-k),ctx.lineTo(B+z,q),ctx.moveTo(B+z,q+W),ctx.lineTo(B+e+z,q+W-k),ctx.lineTo(B+e+z,q-k),ctx.stroke(),ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("length="+z/10+r,B+z/2,q),ctx.fillText("height="+W/10+r,B+z,q+W/2),ctx.fillText("breadth="+F/10+r,B+z+e,q-k/2)}else if("cylinder"==e){var B=10*t,q=10*n,V=5*i,W=5*o,r=r;if(0==s){ctx.beginPath();for(var H=0*Math.PI;H<2*Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B,q+W/8),ctx.lineTo(B,q+W-W/8);for(var H=0*Math.PI;H<Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W-W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B+V,q+W/8),ctx.lineTo(B+V,q+W-W/8),ctx.stroke()}else{ctx.beginPath();for(var H=0*Math.PI;H<2*Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B,q+W/8),ctx.lineTo(B,q+W-W/8),ctx.moveTo(B+V/2,q+W/8),ctx.lineTo(B+V,q+W/8);for(var H=0*Math.PI;H<Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W-W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B+V,q+W/8),ctx.lineTo(B+V,q+W-W/8),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("radius="+V/5+r,B+3*V/4,q+W/8-3),ctx.fillText("height="+W/5+r,B+V,q+W/2)}}else if("cone"==e){var B=10*t,q=10*n,V=10*i,W=10*o,r=r;if(0==s){ctx.beginPath();for(var H=0*Math.PI;H<2*Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B,q+W/8),ctx.lineTo(B+V/2,q-W+W/8),ctx.lineTo(B+V,q+W/8),ctx.stroke()}else{ctx.beginPath();for(var H=0*Math.PI;H<2*Math.PI;H+=.001)xPos=B+V/2-V/2*Math.sin(H)*Math.sin(0*Math.PI)+V/2*Math.cos(H)*Math.cos(0*Math.PI),yPos=q+W/8+W/8*Math.cos(H)*Math.sin(0*Math.PI)+W/8*Math.sin(H)*Math.cos(0*Math.PI),0==H?ctx.moveTo(xPos,yPos):ctx.lineTo(xPos,yPos);ctx.moveTo(B,q+W/8),ctx.lineTo(B+V/2,q-W+W/8),ctx.lineTo(B+V,q+W/8),ctx.moveTo(B+V/2,q+W/8),ctx.lineTo(B+V,q+W/8),ctx.moveTo(B+V/2,q+W/8),ctx.lineTo(B+V/2,q-W+W/8),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",ctx.fillText("radius="+V/10+r,B+3*V/4,q+W/8-3),ctx.fillText("height="+W/10+r,B+V/2,q-W/2)}}else alert("Shape not created.")}function createshape2(e,t,n,i,o){var s=o,r=n,a=i,l=r+10*e[0],c=a+10*e[1],t=t;if(0==s){ctx.beginPath(),ctx.moveTo(l,c);for(var d=3;d<e.length;d+=3){var u=10*e[d],h=10*e[d+1],f=e[d-1];ctx.lineTo(r+u,a+h),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",l=r+u,c=a+h}var f=e[e.length-1];ctx.closePath(),ctx.strokeStyle="black",ctx.stroke()}else{ctx.beginPath(),ctx.moveTo(l,c);for(var d=3;d<e.length;d+=3){var u=10*e[d],h=10*e[d+1],f=e[d-1];ctx.lineTo(r+u,a+h),ctx.fillStyle="blue",ctx.font=" 14px Arial",ctx.textAlign="center",0!=d?0!=f&&ctx.fillText(""+f+t,l+(r+u-l)/2,c+(a+h-c)/2):0!=f&&ctx.fillText(""+f+t,r+(l-r)/2,c+(a+h-c)/2),l=r+u,c=a+h}var f=e[e.length-1];0!=f&&ctx.fillText(""+f+t,(l+r+10*e[0])/2,(c+a+10*e[1])/2),ctx.closePath(),ctx.strokeStyle="black",ctx.stroke()}}function createshape3(e,t,n,i,o,s,r,a,l,c){if("arc_3"==e){var d=t,u=n,h=5*i,f=s+h,p=o,m=r,g=d+f*Math.cos(p),v=u+f*Math.sin(p),y=d+f*Math.cos(m),b=u+f*Math.sin(m),x=a,w=l,C=c;ctx.beginPath(),ctx.arc(d,u,h,p,m,!0),ctx.stroke(),ctx.beginPath(),ctx.moveTo(d,u),ctx.lineTo(g,v),ctx.stroke(),ctx.strokeStyle="black",ctx.stroke(),ctx.beginPath(),ctx.moveTo(d,u),ctx.lineTo(y,b),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 18px Tahoma",ctx.fillText(""+x,d,u+12),ctx.fillText(""+w,g,v-5),ctx.fillText(""+C,y+5,b+5)}else if("arc_4"==e){var d=t,u=n,h=5*i,f=s,p=o,m=r,g=d+f*Math.cos(p),v=u+f*Math.sin(p),y=d+f*Math.cos(m),b=u+f*Math.sin(m),x=a,w=l,C=c;ctx.beginPath(),ctx.arc(d,u,h,p,m,!1),ctx.stroke(),ctx.beginPath(),ctx.moveTo(d,u),ctx.lineTo(g,v),ctx.stroke(),ctx.strokeStyle="black",ctx.stroke(),ctx.beginPath(),ctx.moveTo(d,u),ctx.lineTo(y,b),ctx.stroke(),ctx.fillStyle="blue",ctx.font=" 18px Tahoma",ctx.fillText(""+x,d,u+12),ctx.fillText(""+w,g,v-5),ctx.fillText(""+C,y+5,b+5)}}function registerAs(e){initProblemOverlay(),$("#dimmer").attr("onclick",""),$("#dimmer").click(function(){$("#new_"+e).appendTo("#hidden_registration_forms"),hideProblem()}),$("#problem_overlay").html(""),$("#new_"+e).appendTo("#problem_overlay")}function registerStudent(){registerAs("student")}function registerTeacher(){registerAs("teacher")}function registerCoach(){registerAs("coach")}function walkthrough_pset(){not_mobile=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),$("#walkthrough").pagewalkthrough({steps:[{wrapper:"",margin:0,popup:{content:"#intro_walk",type:"modal",offsetHorizontal:0,offsetVertical:0,width:"400"}},{wrapper:"#bigshelf",margin:"0",popup:{content:"#shelf_walk",type:"tooltip",position:"bottom",offsetHorizontal:0,offsetVertical:-100,width:"500",draggable:!0}},{wrapper:".dotted-border",margin:"0",popup:{content:"#history_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".problem_list_box",margin:"0",popup:{content:"#bbor_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".label-info.correct_hist",margin:"0",popup:{content:"#correct_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".label-info.incorrect_hist",margin:"0",popup:{content:"#incorrect_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#open-walkthrough",margin:"0",popup:{content:"#open_walk",type:"tooltip",position:"left",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"",margin:"0",popup:{content:"#done_walk",type:"modal",position:"",offsetHorizontal:0,offsetVertical:0,width:"400"}}],name:"Walkthrough",onLoad:not_mobile}),$(".prev-step").live("click",function(e){$.pagewalkthrough("prev",e)}),$(".next-step").live("click",function(e){$.pagewalkthrough("next",e)}),$("#open-walkthrough").live("click",function(){var e=$(this).attr("id").split("-");"parameters"!=e&&$.pagewalkthrough("show",e[1])}),$(".close-step").live("click",function(){$.pagewalkthrough("close")}),$("#jpwClose").live("click",function(){$.pagewalkthrough("close")})}function walkthrough_student(){not_mobile=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),$("#walkthrough").pagewalkthrough({steps:[{wrapper:"",margin:0,popup:{content:"#intro_walk",type:"modal",offsetHorizontal:0,offsetVertical:0,width:"400"}},{wrapper:"#bigshelf",margin:"0",popup:{content:"#shelf_walk",type:"tooltip",position:"bottom",offsetHorizontal:0,offsetVertical:-100,width:"500",draggable:!0}},{wrapper:"#account",margin:"0",popup:{content:"#account_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#points",margin:"0",popup:{content:"#points_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#notifications",margin:"0",popup:{content:"#notif_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#get_badge_1",margin:"0",popup:{content:"#shape_1_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#get_badge_2",margin:"0",popup:{content:"#shape_2_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#get_badge_3",margin:"0",popup:{content:"#shape_3_walk",type:"tooltip",position:"left",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#get_badge_4",margin:"0",popup:{content:"#shape_4_walk",type:"tooltip",position:"left",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#get_badge_5",margin:"0",popup:{content:"#shape_5_walk",type:"tooltip",position:"left",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".dotted-border",margin:"0",popup:{content:"#history_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".pset_list_box",margin:"0",popup:{content:"#bbor_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:".progress",margin:"0",popup:{content:"#pbar_walk",type:"tooltip",position:"right",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"#open-walkthrough",margin:"0",popup:{content:"#open_walk",type:"tooltip",position:"left",offsetHorizontal:0,offsetVertical:0,draggable:!0,width:"500"}},{wrapper:"",margin:"0",popup:{content:"#done_walk",type:"modal",position:"",offsetHorizontal:0,offsetVertical:0,width:"400"}}],name:"Walkthrough",onLoad:not_mobile}),$(".prev-step").live("click",function(e){$.pagewalkthrough("prev",e)}),$(".next-step").live("click",function(e){$.pagewalkthrough("next",e)}),$("#open-walkthrough").live("click",function(){var e=$(this).attr("id").split("-");"parameters"!=e&&$.pagewalkthrough("show",e[1])}),$(".close-step").live("click",function(){$.pagewalkthrough("close")})}function wysi(e,t){var n=new wysihtml5.Editor(e,{toolbar:"wysihtml5-editor-toolbar",parserRules:wysihtml5ParserRules});n.on("load",function(){var e=n.composer;e.selection.selectNode(n.composer.element.querySelector(t))})}!function(e,t){function n(e){var t,n,i=D[e]={};for(e=e.split(/\s+/),t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}function i(e,n,i){if(i===t&&1===e.nodeType){var o="data-"+n.replace(H,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:P.isNumeric(i)?+i:O.test(i)?P.parseJSON(i):i}catch(s){}P.data(e,n,i)}else i=t}return i}function o(e){for(var t in e)if(("data"!==t||!P.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(e,t,n){var i=t+"defer",o=t+"queue",s=t+"mark",r=P._data(e,i);!r||"queue"!==n&&P._data(e,o)||"mark"!==n&&P._data(e,s)||setTimeout(function(){P._data(e,o)||P._data(e,s)||(P.removeData(e,i,!0),r.fire())},0)}function r(){return!1}function a(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t,n){if(t=t||0,P.isFunction(t))return P.grep(e,function(e,i){var o=!!t.call(e,i,e);return o===n});if(t.nodeType)return P.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=P.grep(e,function(e){return 1===e.nodeType});if(dt.test(t))return P.filter(t,i,!n);t=P.filter(t,i)}return P.grep(e,function(e){return P.inArray(e,t)>=0===n})}function d(e){var t=pt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function u(e){return P.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e,t){if(1===t.nodeType&&P.hasData(e)){var n,i,o,s=P._data(e),r=P._data(t,s),a=s.events;if(a){delete r.handle,r.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)P.event.add(t,n,a[n][i])
}r.data&&(r.data=P.extend({},r.data))}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(P.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function g(e){var t=(e.nodeName||"").toLowerCase();"input"===t?m(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&P.grep(e.getElementsByTagName("input"),m)}function v(e){var t=I.createElement("div");return jt.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,o="width"===t?1:0,s=4;if(i>0){if("border"!==n)for(;s>o;o+=2)n||(i-=parseFloat(P.css(e,"padding"+Bt[o]))||0),"margin"===n?i+=parseFloat(P.css(e,n+Bt[o]))||0:i-=parseFloat(P.css(e,"border"+Bt[o]+"Width"))||0;return i+"px"}if(i=Et(e,t),(0>i||null==i)&&(i=e.style[t]),Dt.test(i))return i;if(i=parseFloat(i)||0,n)for(;s>o;o+=2)i+=parseFloat(P.css(e,"padding"+Bt[o]))||0,"padding"!==n&&(i+=parseFloat(P.css(e,"border"+Bt[o]+"Width"))||0),"margin"===n&&(i+=parseFloat(P.css(e,n+Bt[o]))||0);return i+"px"}function b(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),P.isFunction(n))for(var i,o,s,r=t.toLowerCase().split(tn),a=0,l=r.length;l>a;a++)i=r[a],s=/^\+/.test(i),s&&(i=i.substr(1)||"*"),o=e[i]=e[i]||[],o[s?"unshift":"push"](n)}}function x(e,n,i,o,s,r){s=s||n.dataTypes[0],r=r||{},r[s]=!0;for(var a,l=e[s],c=0,d=l?l.length:0,u=e===rn;d>c&&(u||!a);c++)a=l[c](n,i,o),"string"==typeof a&&(!u||r[a]?a=t:(n.dataTypes.unshift(a),a=x(e,n,i,o,a,r)));return!u&&a||r["*"]||(a=x(e,n,i,o,"*",r)),a}function w(e,n){var i,o,s=P.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:o||(o={}))[i]=n[i]);o&&P.extend(!0,e,o)}function C(e,t,n,i){if(P.isArray(t))P.each(t,function(t,o){n||Wt.test(e)?i(e,o):C(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==P.type(t))i(e,t);else for(var o in t)C(e+"["+o+"]",t[o],n,i)}function T(e,n,i){var o,s,r,a,l=e.contents,c=e.dataTypes,d=e.responseFields;for(s in d)s in i&&(n[d[s]]=i[s]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("content-type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==c[0]&&c.unshift(r),i[r]):void 0}function _(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i,o,s,r,a,l,c,d,u=e.dataTypes,h={},f=u.length,p=u[0];for(i=1;f>i;i++){if(1===i)for(o in e.converters)"string"==typeof o&&(h[o.toLowerCase()]=e.converters[o]);if(r=p,p=u[i],"*"===p)p=r;else if("*"!==r&&r!==p){if(a=r+" "+p,l=h[a]||h["* "+p],!l){d=t;for(c in h)if(s=c.split(" "),(s[0]===r||"*"===s[0])&&(d=h[s[1]+" "+p])){c=h[c],c===!0?l=d:d===!0&&(l=c);break}}l||d||P.error("No conversion from "+a.replace(" "," to ")),l!==!0&&(n=l?l(n):d(c(n)))}}return n}function k(){try{return new e.XMLHttpRequest}catch(t){}}function S(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function N(){return setTimeout(j,0),yn=P.now()}function j(){yn=t}function E(e,t){var n={};return P.each(Cn.concat.apply([],Cn.slice(0,t)),function(){n[this]=e}),n}function M(e){if(!bn[e]){var t=I.body,n=P("<"+e+">").appendTo(t),i=n.css("display");n.remove(),("none"===i||""===i)&&(mn||(mn=I.createElement("iframe"),mn.frameBorder=mn.width=mn.height=0),t.appendChild(mn),gn&&mn.createElement||(gn=(mn.contentWindow||mn.contentDocument).document,gn.write((P.support.boxModel?"<!doctype html>":"")+"<html><body>"),gn.close()),n=gn.createElement(e),gn.body.appendChild(n),i=P.css(n,"display"),t.removeChild(mn)),bn[e]=i}return bn[e]}function $(e){return P.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var I=e.document,A=e.navigator,R=e.location,P=function(){function n(){if(!a.isReady){try{I.documentElement.doScroll("left")}catch(e){return setTimeout(n,1),void 0}a.ready()}}var i,o,s,r,a=function(e,t){return new a.fn.init(e,t,i)},l=e.jQuery,c=e.$,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=/\S/,h=/^\s+/,f=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,b=/(webkit)[ \/]([\w.]+)/,x=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,T=/-([a-z]|[0-9])/gi,_=/^-ms-/,k=function(e,t){return(t+"").toUpperCase()},S=A.userAgent,N=Object.prototype.toString,j=Object.prototype.hasOwnProperty,E=Array.prototype.push,M=Array.prototype.slice,$=String.prototype.trim,R=Array.prototype.indexOf,P={};return a.fn=a.prototype={constructor:a,init:function(e,n,i){var o,s,r,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&I.body)return this.context=I,this[0]=I.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:d.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1])return n=n instanceof a?n[0]:n,l=n?n.ownerDocument||n:I,r=p.exec(e),r?a.isPlainObject(n)?(e=[I.createElement(r[1])],a.fn.attr.call(e,n,!0)):e=[l.createElement(r[1])]:(r=a.buildFragment([o[1]],[l]),e=(r.cacheable?a.clone(r.fragment):r.fragment).childNodes),a.merge(this,e);if(s=I.getElementById(o[2]),s&&s.parentNode){if(s.id!==o[2])return i.find(e);this.length=1,this[0]=s}return this.context=I,this.selector=e,this}return a.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return a.isArray(e)?E.apply(i,e):a.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),s.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,n,i,o,s,r,l=arguments[0]||{},c=1,d=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},c=2),"object"==typeof l||a.isFunction(l)||(l={}),d===c&&(l=this,--c);d>c;c++)if(null!=(e=arguments[c]))for(n in e)i=l[n],o=e[n],l!==o&&(u&&o&&(a.isPlainObject(o)||(s=a.isArray(o)))?(s?(s=!1,r=i&&a.isArray(i)?i:[]):r=i&&a.isPlainObject(i)?i:{},l[n]=a.extend(u,r,o)):o!==t&&(l[n]=o));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=c),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!I.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;s.fireWith(I,[a]),a.fn.trigger&&a(I).trigger("ready").off("ready")}},bindReady:function(){if(!s){if(s=a.Callbacks("once memory"),"complete"===I.readyState)return setTimeout(a.ready,1);if(I.addEventListener)I.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",a.ready,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",r),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(i){}I.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):P[N.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!j.call(e,"constructor")&&!j.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||j.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():(a.error("Invalid JSON: "+t),void 0)):null},parseXML:function(n){if("string"!=typeof n||!n)return null;var i,o;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&u.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(_,"ms-").replace(T,k)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var o,s=0,r=e.length,l=r===t||a.isFunction(e);if(i)if(l){for(o in e)if(n.apply(e[o],i)===!1)break}else for(;r>s&&n.apply(e[s++],i)!==!1;);else if(l){for(o in e)if(n.call(e[o],o,e[o])===!1)break}else for(;r>s&&n.call(e[s],s,e[s++])!==!1;);return e},trim:$?function(e){return null==e?"":$.call(e)}:function(e){return null==e?"":e.toString().replace(h,"").replace(f,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var i=a.type(e);null==e.length||"string"===i||"function"===i||"regexp"===i||a.isWindow(e)?E.call(n,e):a.merge(n,e)}return n},inArray:function(e,t,n){var i;if(t){if(R)return R.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=e.length,o=0;if("number"==typeof n.length)for(var s=n.length;s>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var i,o=[];n=!!n;for(var s=0,r=e.length;r>s;s++)i=!!t(e[s],s),n!==i&&o.push(e[s]);return o},map:function(e,n,i){var o,s,r=[],l=0,c=e.length,d=e instanceof a||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||a.isArray(e));if(d)for(;c>l;l++)o=n(e[l],l,i),null!=o&&(r[r.length]=o);else for(s in e)o=n(e[s],s,i),null!=o&&(r[r.length]=o);return r.concat.apply([],r)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!a.isFunction(e))return t;var o=M.call(arguments,2),s=function(){return e.apply(n,o.concat(M.call(arguments)))};return s.guid=e.guid=e.guid||s.guid||a.guid++,s},access:function(e,n,i,o,s,r,l){var c,d=null==i,u=0,h=e.length;if(i&&"object"==typeof i){for(u in i)a.access(e,n,u,i[u],1,r,o);s=1}else if(o!==t){if(c=l===t&&a.isFunction(o),d&&(c?(c=n,n=function(e,t,n){return c.call(a(e),n)}):(n.call(e,o),n=null)),n)for(;h>u;u++)n(e[u],i,c?o.call(e[u],u,n(e[u],i)):o,l);s=1}return s?e:d?n.call(e):h?n(e[0],i):r},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=b.exec(e)||x.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&C.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof a&&!(i instanceof e)&&(i=e(i)),a.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(I);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),o=a.uaMatch(S),o.browser&&(a.browser[o.browser]=!0,a.browser.version=o.version),a.browser.webkit&&(a.browser.safari=!0),u.test(" ")&&(h=/^[\s\xA0]+/,f=/[\s\xA0]+$/),i=a(I),I.addEventListener?r=function(){I.removeEventListener("DOMContentLoaded",r,!1),a.ready()}:I.attachEvent&&(r=function(){"complete"===I.readyState&&(I.detachEvent("onreadystatechange",r),a.ready())}),a}(),D={};P.Callbacks=function(e){e=e?D[e]||n(e):{};var i,o,s,r,a,l,c=[],d=[],u=function(t){var n,i,o,s;for(n=0,i=t.length;i>n;n++)o=t[n],s=P.type(o),"array"===s?u(o):"function"===s&&(e.unique&&f.has(o)||c.push(o))},h=function(t,n){for(n=n||[],i=!e.memory||[t,n],o=!0,s=!0,l=r||0,r=0,a=c.length;c&&a>l;l++)if(c[l].apply(t,n)===!1&&e.stopOnFalse){i=!0;break}s=!1,c&&(e.once?i===!0?f.disable():c=[]:d&&d.length&&(i=d.shift(),f.fireWith(i[0],i[1])))},f={add:function(){if(c){var e=c.length;u(arguments),s?a=c.length:i&&i!==!0&&(r=e,h(i[0],i[1]))}return this},remove:function(){if(c)for(var t=arguments,n=0,i=t.length;i>n;n++)for(var o=0;o<c.length&&(t[n]!==c[o]||(s&&a>=o&&(a--,l>=o&&l--),c.splice(o--,1),!e.unique));o++);return this},has:function(e){if(c)for(var t=0,n=c.length;n>t;t++)if(e===c[t])return!0;return!1},empty:function(){return c=[],this},disable:function(){return c=d=i=t,this},disabled:function(){return!c},lock:function(){return d=t,i&&i!==!0||f.disable(),this},locked:function(){return!d},fireWith:function(t,n){return d&&(s?e.once||d.push([t,n]):e.once&&i||h(t,n)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f};var L=[].slice;P.extend({Deferred:function(e){var t,n=P.Callbacks("once memory"),i=P.Callbacks("once memory"),o=P.Callbacks("memory"),s="pending",r={resolve:n,reject:i,notify:o},a={done:n.add,fail:i.add,progress:o.add,state:function(){return s},isResolved:n.fired,isRejected:i.fired,then:function(e,t,n){return l.done(e).fail(t).progress(n),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,n){return P.Deferred(function(i){P.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n,o=t[0],s=t[1];P.isFunction(o)?l[e](function(){n=o.apply(this,arguments),n&&P.isFunction(n.promise)?n.promise().then(i.resolve,i.reject,i.notify):i[s+"With"](this===l?i:this,[n])}):l[e](i[s])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},l=a.promise({});for(t in r)l[t]=r[t].fire,l[t+"With"]=r[t].fireWith;return l.done(function(){s="resolved"},i.disable,o.lock).fail(function(){s="rejected"},n.disable,o.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){i[e]=arguments.length>1?L.call(arguments,0):t,--a||l.resolveWith(l,i)}}function n(e){return function(t){r[e]=arguments.length>1?L.call(arguments,0):t,l.notifyWith(c,r)}}var i=L.call(arguments,0),o=0,s=i.length,r=new Array(s),a=s,l=1>=s&&e&&P.isFunction(e.promise)?e:P.Deferred(),c=l.promise();if(s>1){for(;s>o;o++)i[o]&&i[o].promise&&P.isFunction(i[o].promise)?i[o].promise().then(t(o),l.reject,n(o)):--a;a||l.resolveWith(l,i)}else l!==e&&l.resolveWith(l,s?[e]:[]);return c}}),P.support=function(){{var t,n,i,o,s,r,a,l,c,d,u,h=I.createElement("div");I.documentElement}if(h.setAttribute("className","t"),h.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],!n||!n.length||!i)return{};o=I.createElement("select"),s=o.appendChild(I.createElement("option")),r=h.getElementsByTagName("input")[0],t={leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===r.value,optSelected:s.selected,getSetAttribute:"t"!==h.className,enctype:!!I.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==I.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},P.boxModel=t.boxModel="CSS1Compat"===I.compatMode,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(f){t.deleteExpando=!1}if(!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick")),r=I.createElement("input"),r.value="t",r.setAttribute("type","radio"),t.radioValue="t"===r.value,r.setAttribute("checked","checked"),r.setAttribute("name","t"),h.appendChild(r),a=I.createDocumentFragment(),a.appendChild(h.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=r.checked,a.removeChild(r),a.appendChild(h),h.attachEvent)for(d in{submit:1,change:1,focusin:1})c="on"+d,u=c in h,u||(h.setAttribute(c,"return;"),u="function"==typeof h[c]),t[d+"Bubbles"]=u;return a.removeChild(h),a=o=s=h=r=null,P(function(){var n,i,o,s,r,a,c,d,f,p,m,g,v=I.getElementsByTagName("body")[0];v&&(c=1,g="padding:0;margin:0;border:",p="position:absolute;top:0;left:0;width:1px;height:1px;",m=g+"0;visibility:hidden;",d="style='"+p+g+"5px solid #000;",f="<div "+d+"display:block;'><div style='"+g+"0;display:block;overflow:hidden;'></div></div><table "+d+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",n=I.createElement("div"),n.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+c+"px",v.insertBefore(n,v.firstChild),h=I.createElement("div"),n.appendChild(h),h.innerHTML="<table><tr><td style='"+g+"0;display:none'></td><td>t</td></tr></table>",l=h.getElementsByTagName("td"),u=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=u&&0===l[0].offsetHeight,e.getComputedStyle&&(h.innerHTML="",a=I.createElement("div"),a.style.width="0",a.style.marginRight="0",h.style.width="2px",h.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof h.style.zoom&&(h.innerHTML="",h.style.width=h.style.padding="1px",h.style.border=0,h.style.overflow="hidden",h.style.display="inline",h.style.zoom=1,t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.style.overflow="visible",h.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==h.offsetWidth),h.style.cssText=p+m,h.innerHTML=f,i=h.firstChild,o=i.firstChild,s=i.nextSibling.firstChild.firstChild,r={doesNotAddBorder:5!==o.offsetTop,doesAddBorderForTableAndCells:5===s.offsetTop},o.style.position="fixed",o.style.top="20px",r.fixedPosition=20===o.offsetTop||15===o.offsetTop,o.style.position=o.style.top="",i.style.overflow="hidden",i.style.position="relative",r.subtractsBorderForOverflowNotVisible=-5===o.offsetTop,r.doesNotIncludeMarginInBodyOffset=v.offsetTop!==c,e.getComputedStyle&&(h.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(h,null)||{marginTop:0}).marginTop),"undefined"!=typeof n.style.zoom&&(n.style.zoom=1),v.removeChild(n),a=h=n=null,P.extend(t,r))}),t}();var O=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;P.extend({cache:{},uuid:0,expando:"jQuery"+(P.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?P.cache[e[P.expando]]:e[P.expando],!!e&&!o(e)},data:function(e,n,i,o){if(P.acceptData(e)){var s,r,a,l=P.expando,c="string"==typeof n,d=e.nodeType,u=d?P.cache:e,h=d?e[l]:e[l]&&l,f="events"===n;if(h&&u[h]&&(f||o||u[h].data)||!c||i!==t)return h||(d?e[l]=h=++P.uuid:h=l),u[h]||(u[h]={},d||(u[h].toJSON=P.noop)),("object"==typeof n||"function"==typeof n)&&(o?u[h]=P.extend(u[h],n):u[h].data=P.extend(u[h].data,n)),s=r=u[h],o||(r.data||(r.data={}),r=r.data),i!==t&&(r[P.camelCase(n)]=i),f&&!r[n]?s.events:(c?(a=r[n],null==a&&(a=r[P.camelCase(n)])):a=r,a)}},removeData:function(e,t,n){if(P.acceptData(e)){var i,s,r,a=P.expando,l=e.nodeType,c=l?P.cache:e,d=l?e[a]:a;if(c[d]){if(t&&(i=n?c[d]:c[d].data)){P.isArray(t)||(t in i?t=[t]:(t=P.camelCase(t),t=t in i?[t]:t.split(" ")));for(s=0,r=t.length;r>s;s++)delete i[t[s]];if(!(n?o:P.isEmptyObject)(i))return}(n||(delete c[d].data,o(c[d])))&&(P.support.deleteExpando||!c.setInterval?delete c[d]:c[d]=null,l&&(P.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,n){return P.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=P.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),P.fn.extend({data:function(e,n){var o,s,r,a,l,c=this[0],d=0,u=null;if(e===t){if(this.length&&(u=P.data(c),1===c.nodeType&&!P._data(c,"parsedAttrs"))){for(r=c.attributes,l=r.length;l>d;d++)a=r[d].name,0===a.indexOf("data-")&&(a=P.camelCase(a.substring(5)),i(c,a,u[a]));P._data(c,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){P.data(this,e)}):(o=e.split(".",2),o[1]=o[1]?"."+o[1]:"",s=o[1]+"!",P.access(this,function(n){return n===t?(u=this.triggerHandler("getData"+s,[o[0]]),u===t&&c&&(u=P.data(c,e),u=i(c,e,u)),u===t&&o[1]?this.data(o[0]):u):(o[1]=n,this.each(function(){var t=P(this);t.triggerHandler("setData"+s,o),P.data(this,e,n),t.triggerHandler("changeData"+s,o)}),void 0)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){P.removeData(this,e)})}}),P.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",P._data(e,t,(P._data(e,t)||0)+1))},_unmark:function(e,t,n){if(e!==!0&&(n=t,t=e,e=!1),t){n=n||"fx";var i=n+"mark",o=e?0:(P._data(t,i)||1)-1;o?P._data(t,i,o):(P.removeData(t,i,!0),s(t,n,"mark"))}},queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=P._data(e,t),n&&(!i||P.isArray(n)?i=P._data(e,t,P.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=P.queue(e,t),i=n.shift(),o={};"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),P._data(e,t+".run",o),i.call(e,function(){P.dequeue(e,t)},o)),n.length||(P.removeData(e,t+"queue "+t+".run",!0),s(e,t,"queue"))}}),P.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?P.queue(this[0],e):n===t?this:this.each(function(){var t=P.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&P.dequeue(this,e)})},dequeue:function(e){return this.each(function(){P.dequeue(this,e)})},delay:function(e,t){return e=P.fx?P.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function i(){--l||s.resolveWith(r,[r])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var o,s=P.Deferred(),r=this,a=r.length,l=1,c=e+"defer",d=e+"queue",u=e+"mark";a--;)(o=P.data(r[a],c,t,!0)||(P.data(r[a],d,t,!0)||P.data(r[a],u,t,!0))&&P.data(r[a],c,P.Callbacks("once memory"),!0))&&(l++,o.add(i));return i(),s.promise(n)}});var B,q,z,F=/[\n\t\r]/g,W=/\s+/,V=/\r/g,X=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,Y=/^a(?:rea)?$/i,G=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,K=P.support.getSetAttribute;P.fn.extend({attr:function(e,t){return P.access(this,P.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){P.removeAttr(this,e)})},prop:function(e,t){return P.access(this,P.prop,e,t,arguments.length>1)},removeProp:function(e){return e=P.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,s,r,a;if(P.isFunction(e))return this.each(function(t){P(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(W),n=0,i=this.length;i>n;n++)if(o=this[n],1===o.nodeType)if(o.className||1!==t.length){for(s=" "+o.className+" ",r=0,a=t.length;a>r;r++)~s.indexOf(" "+t[r]+" ")||(s+=t[r]+" ");o.className=P.trim(s)}else o.className=e;return this},removeClass:function(e){var n,i,o,s,r,a,l;if(P.isFunction(e))return this.each(function(t){P(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(W),i=0,o=this.length;o>i;i++)if(s=this[i],1===s.nodeType&&s.className)if(e){for(r=(" "+s.className+" ").replace(F," "),a=0,l=n.length;l>a;a++)r=r.replace(" "+n[a]+" "," ");s.className=P.trim(r)}else s.className="";return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return P.isFunction(e)?this.each(function(n){P(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,s=0,r=P(this),a=t,l=e.split(W);o=l[s++];)a=i?a:!r.hasClass(o),r[a?"addClass":"removeClass"](o);else("undefined"===n||"boolean"===n)&&(this.className&&P._data(this,"__className__",this.className),this.className=this.className||e===!1?"":P._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(F," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,i,o,s=this[0];{if(arguments.length)return o=P.isFunction(e),this.each(function(i){var s,r=P(this);1===this.nodeType&&(s=o?e.call(this,i,r.val()):e,null==s?s="":"number"==typeof s?s+="":P.isArray(s)&&(s=P.map(s,function(e){return null==e?"":e+""})),n=P.valHooks[this.type]||P.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=P.valHooks[s.type]||P.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(V,""):null==i?"":i)}}}),P.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,o,s=e.selectedIndex,r=[],a=e.options,l="select-one"===e.type;if(0>s)return null;for(n=l?s:0,i=l?s+1:a.length;i>n;n++)if(o=a[n],!(!o.selected||(P.support.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&P.nodeName(o.parentNode,"optgroup"))){if(t=P(o).val(),l)return t;r.push(t)}return l&&!r.length&&a.length?P(a[s]).val():r},set:function(e,t){var n=P.makeArray(t);return P(e).find("option").each(function(){this.selected=P.inArray(P(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,i,o){var s,r,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&n in P.attrFn?P(e)[n](i):"undefined"==typeof e.getAttribute?P.prop(e,n,i):(a=1!==l||!P.isXMLDoc(e),a&&(n=n.toLowerCase(),r=P.attrHooks[n]||(G.test(n)?q:B)),i!==t?null===i?(P.removeAttr(e,n),void 0):r&&"set"in r&&a&&(s=r.set(e,i,n))!==t?s:(e.setAttribute(n,""+i),i):r&&"get"in r&&a&&null!==(s=r.get(e,n))?s:(s=e.getAttribute(n),null===s?t:s))},removeAttr:function(e,t){var n,i,o,s,r,a=0;if(t&&1===e.nodeType)for(i=t.toLowerCase().split(W),s=i.length;s>a;a++)o=i[a],o&&(n=P.propFix[o]||o,r=G.test(o),r||P.attr(e,o,""),e.removeAttribute(K?o:n),r&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(X.test(e.nodeName)&&e.parentNode)P.error("type property can't be changed");else if(!P.support.radioValue&&"radio"===t&&P.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return B&&P.nodeName(e,"button")?B.get(e,t):t in e?e.value:null},set:function(e,t,n){return B&&P.nodeName(e,"button")?B.set(e,t,n):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,s,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!P.isXMLDoc(e),r&&(n=P.propFix[n]||n,s=P.propHooks[n]),i!==t?s&&"set"in s&&(o=s.set(e,i,n))!==t?o:e[n]=i:s&&"get"in s&&null!==(o=s.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):U.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),P.attrHooks.tabindex=P.propHooks.tabIndex,q={get:function(e,n){var i,o=P.prop(e,n);return o===!0||"boolean"!=typeof o&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?P.removeAttr(e,n):(i=P.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},K||(z={name:!0,id:!0,coords:!0},B=P.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(z[n]?""!==i.nodeValue:i.specified)?i.nodeValue:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=I.createAttribute(n),e.setAttributeNode(i)),i.nodeValue=t+""}},P.attrHooks.tabindex.set=B.set,P.each(["width","height"],function(e,t){P.attrHooks[t]=P.extend(P.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),P.attrHooks.contenteditable={get:B.get,set:function(e,t,n){""===t&&(t="false"),B.set(e,t,n)}}),P.support.hrefNormalized||P.each(["href","src","width","height"],function(e,n){P.attrHooks[n]=P.extend(P.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),P.support.style||(P.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),P.support.optSelected||(P.propHooks.selected=P.extend(P.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),P.support.enctype||(P.propFix.enctype="encoding"),P.support.checkOn||P.each(["radio","checkbox"],function(){P.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),P.each(["radio","checkbox"],function(){P.valHooks[this]=P.extend(P.valHooks[this],{set:function(e,t){return P.isArray(t)?e.checked=P.inArray(P(e).val(),t)>=0:void 0}})});var Q=/^(?:textarea|input|select)$/i,J=/^([^\.]*)?(?:\.(.+))?$/,Z=/(?:^|\s)hover(\.\S+)?\b/,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ot=function(e){var t=it.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},st=function(e,t){var n=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(n.id||{}).value!==t[2]||t[3]&&!t[3].test((n["class"]||{}).value))},rt=function(e){return P.event.special.hover?e:e.replace(Z,"mouseenter$1 mouseleave$1")};P.event={add:function(e,n,i,o,s){var r,a,l,c,d,u,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(r=P._data(e))){for(i.handler&&(p=i,i=p.handler,s=p.selector),i.guid||(i.guid=P.guid++),l=r.events,l||(r.events=l={}),a=r.handle,a||(r.handle=a=function(e){return"undefined"==typeof P||e&&P.event.triggered===e.type?t:P.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=P.trim(rt(n)).split(" "),c=0;c<n.length;c++)d=J.exec(n[c])||[],u=d[1],h=(d[2]||"").split(".").sort(),g=P.event.special[u]||{},u=(s?g.delegateType:g.bindType)||u,g=P.event.special[u]||{},f=P.extend({type:u,origType:d[1],data:o,handler:i,guid:i.guid,selector:s,quick:s&&ot(s),namespace:h.join(".")},p),m=l[u],m||(m=l[u]=[],m.delegateCount=0,g.setup&&g.setup.call(e,o,h,a)!==!1||(e.addEventListener?e.addEventListener(u,a,!1):e.attachEvent&&e.attachEvent("on"+u,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),s?m.splice(m.delegateCount++,0,f):m.push(f),P.event.global[u]=!0;e=null}},global:{},remove:function(e,t,n,i,o){var s,r,a,l,c,d,u,h,f,p,m,g,v=P.hasData(e)&&P._data(e);if(v&&(h=v.events)){for(t=P.trim(rt(t||"")).split(" "),s=0;s<t.length;s++)if(r=J.exec(t[s])||[],a=l=r[1],c=r[2],a){for(f=P.event.special[a]||{},a=(i?f.delegateType:f.bindType)||a,m=h[a]||[],d=m.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=0;u<m.length;u++)g=m[u],!o&&l!==g.origType||n&&n.guid!==g.guid||c&&!c.test(g.namespace)||i&&i!==g.selector&&("**"!==i||!g.selector)||(m.splice(u--,1),g.selector&&m.delegateCount--,f.remove&&f.remove.call(e,g));0===m.length&&d!==m.length&&(f.teardown&&f.teardown.call(e,c)!==!1||P.removeEvent(e,a,v.handle),delete h[a])}else for(a in h)P.event.remove(e,a+t[s],n,i,!0);P.isEmptyObject(h)&&(p=v.handle,p&&(p.elem=null),P.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,o,s){if(!o||3!==o.nodeType&&8!==o.nodeType){var r,a,l,c,d,u,h,f,p,m,g=n.type||n,v=[];
if(!nt.test(g+P.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),o&&!P.event.customEvent[g]||P.event.global[g]))if(n="object"==typeof n?n[P.expando]?n:new P.Event(g,n):new P.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=a,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=g.indexOf(":")<0?"on"+g:"",o){if(n.result=t,n.target||(n.target=o),i=null!=i?P.makeArray(i):[],i.unshift(n),h=P.event.special[g]||{},!h.trigger||h.trigger.apply(o,i)!==!1){if(p=[[o,h.bindType||g]],!s&&!h.noBubble&&!P.isWindow(o)){for(m=h.delegateType||g,c=nt.test(m+g)?o:o.parentNode,d=null;c;c=c.parentNode)p.push([c,m]),d=c;d&&d===o.ownerDocument&&p.push([d.defaultView||d.parentWindow||e,m])}for(l=0;l<p.length&&!n.isPropagationStopped();l++)c=p[l][0],n.type=p[l][1],f=(P._data(c,"events")||{})[n.type]&&P._data(c,"handle"),f&&f.apply(c,i),f=u&&c[u],f&&P.acceptData(c)&&f.apply(c,i)===!1&&n.preventDefault();return n.type=g,s||n.isDefaultPrevented()||h._default&&h._default.apply(o.ownerDocument,i)!==!1||"click"===g&&P.nodeName(o,"a")||!P.acceptData(o)||u&&o[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!P.isWindow(o)&&(d=o[u],d&&(o[u]=null),P.event.triggered=g,o[g](),P.event.triggered=t,d&&(o[u]=d)),n.result}}else{r=P.cache;for(l in r)r[l].events&&r[l].events[g]&&P.event.trigger(n,i,r[l].handle.elem,!0)}}},dispatch:function(n){n=P.event.fix(n||e.event);var i,o,s,r,a,l,c,d,u,h,f=(P._data(this,"events")||{})[n.type]||[],p=f.delegateCount,m=[].slice.call(arguments,0),g=!n.exclusive&&!n.namespace,v=P.event.special[n.type]||{},y=[];if(m[0]=n,n.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,n)!==!1){if(p&&(!n.button||"click"!==n.type))for(r=P(this),r.context=this.ownerDocument||this,s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0){for(l={},d=[],r[0]=s,i=0;p>i;i++)u=f[i],h=u.selector,l[h]===t&&(l[h]=u.quick?st(s,u.quick):r.is(h)),l[h]&&d.push(u);d.length&&y.push({elem:s,matches:d})}for(f.length>p&&y.push({elem:this,matches:f.slice(p)}),i=0;i<y.length&&!n.isPropagationStopped();i++)for(c=y[i],n.currentTarget=c.elem,o=0;o<c.matches.length&&!n.isImmediatePropagationStopped();o++)u=c.matches[o],(g||!n.namespace&&!u.namespace||n.namespace_re&&n.namespace_re.test(u.namespace))&&(n.data=u.data,n.handleObj=u,a=((P.event.special[u.origType]||{}).handle||u.handler).apply(c.elem,m),a!==t&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,s,r=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||I,o=i.documentElement,s=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[P.expando])return e;var n,i,o=e,s=P.event.fixHooks[e.type]||{},r=s.props?this.props.concat(s.props):this.props;for(e=P.Event(o),n=r.length;n;)i=r[--n],e[i]=o[i];return e.target||(e.target=o.srcElement||I),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),s.filter?s.filter(e,o):e},special:{ready:{setup:P.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){P.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var o=P.extend(new P.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?P.event.trigger(o,null,t):P.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},P.event.handle=P.event.dispatch,P.removeEvent=I.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},P.Event=function(e,t){return this instanceof P.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:r):this.type=e,t&&P.extend(this,t),this.timeStamp=e&&e.timeStamp||P.now(),this[P.expando]=!0,void 0):new P.Event(e,t)},P.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},P.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){P.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var n,i=this,o=e.relatedTarget,s=e.handleObj;s.selector}return(!o||o!==i&&!P.contains(i,o))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),P.support.submitBubbles||(P.event.special.submit={setup:function(){return P.nodeName(this,"form")?!1:(P.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=P.nodeName(n,"input")||P.nodeName(n,"button")?n.form:t;i&&!i._submit_attached&&(P.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),i._submit_attached=!0)}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&P.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return P.nodeName(this,"form")?!1:(P.event.remove(this,"._submit"),void 0)}}),P.support.changeBubbles||(P.event.special.change={setup:function(){return Q.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(P.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),P.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,P.event.simulate("change",this,e,!0))})),!1):(P.event.add(this,"beforeactivate._change",function(e){var t=e.target;Q.test(t.nodeName)&&!t._change_attached&&(P.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||P.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return P.event.remove(this,"._change"),Q.test(this.nodeName)}}),P.support.focusinBubbles||P.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){P.event.simulate(t,e.target,P.event.fix(e),!0)};P.event.special[t]={setup:function(){0===n++&&I.addEventListener(e,i,!0)},teardown:function(){0===--n&&I.removeEventListener(e,i,!0)}}}),P.fn.extend({on:function(e,n,i,o,s){var a,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],s);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),o===!1)o=r;else if(!o)return this;return 1===s&&(a=o,o=function(e){return P().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=P.guid++)),this.each(function(){P.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){if(e&&e.preventDefault&&e.handleObj){var o=e.handleObj;return P(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this}if("object"==typeof e){for(var s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=r),this.each(function(){P.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return P(this.context).on(e,this.selector,t,n),this},die:function(e,t){return P(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){P.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?P.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||P.guid++,i=0,o=function(n){var o=(P._data(this,"lastToggle"+e.guid)||0)%i;return P._data(this,"lastToggle"+e.guid,o+1),n.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=n;i<t.length;)t[i++].guid=n;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),P.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){P.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},P.attrFn&&(P.attrFn[t]=!0),et.test(t)&&(P.event.fixHooks[t]=P.event.keyHooks),tt.test(t)&&(P.event.fixHooks[t]=P.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
function(){function e(e,t,n,i,s,r){for(var a=0,l=i.length;l>a;a++){var c=i[a];if(c){var d=!1;for(c=c[e];c;){if(c[o]===n){d=i[c.sizset];break}if(1!==c.nodeType||r||(c[o]=n,c.sizset=a),c.nodeName.toLowerCase()===t){d=c;break}c=c[e]}i[a]=d}}}function n(e,t,n,i,s,r){for(var a=0,l=i.length;l>a;a++){var c=i[a];if(c){var d=!1;for(c=c[e];c;){if(c[o]===n){d=i[c.sizset];break}if(1===c.nodeType)if(r||(c[o]=n,c.sizset=a),"string"!=typeof t){if(c===t){d=!0;break}}else if(h.filter(t,[c]).length>0){d=c;break}c=c[e]}i[a]=d}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o="sizcache"+(Math.random()+"").replace(".",""),s=0,r=Object.prototype.toString,a=!1,l=!0,c=/\\/g,d=/\r\n/g,u=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(e,t,n,o){n=n||[],t=t||I;var s=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var a,l,c,d,u,f,g,v,b=!0,x=h.isXML(t),w=[],T=e;do if(i.exec(""),a=i.exec(T),a&&(T=a[3],w.push(a[1]),a[2])){d=a[3];break}while(a);if(w.length>1&&m.exec(e))if(2===w.length&&p.relative[w[0]])l=C(w[0]+w[1],t,o);else for(l=p.relative[w[0]]?[t]:h(w.shift(),t);w.length;)e=w.shift(),p.relative[e]&&(e+=w.shift()),l=C(e,l,o);else if(!o&&w.length>1&&9===t.nodeType&&!x&&p.match.ID.test(w[0])&&!p.match.ID.test(w[w.length-1])&&(u=h.find(w.shift(),t,x),t=u.expr?h.filter(u.expr,u.set)[0]:u.set[0]),t)for(u=o?{expr:w.pop(),set:y(o)}:h.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!t.parentNode?t:t.parentNode,x),l=u.expr?h.filter(u.expr,u.set):u.set,w.length>0?c=y(l):b=!1;w.length;)f=w.pop(),g=f,p.relative[f]?g=w.pop():f="",null==g&&(g=t),p.relative[f](c,g,x);else c=w=[];if(c||(c=l),c||h.error(f||e),"[object Array]"===r.call(c))if(b)if(t&&1===t.nodeType)for(v=0;null!=c[v];v++)c[v]&&(c[v]===!0||1===c[v].nodeType&&h.contains(t,c[v]))&&n.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&n.push(l[v]);else n.push.apply(n,c);else y(c,n);return d&&(h(d,s,n,o),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(x&&(a=l,e.sort(x),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var i,o,s,r,a,l;if(!e)return[];for(o=0,s=p.order.length;s>o;o++)if(a=p.order[o],(r=p.leftMatch[a].exec(e))&&(l=r[1],r.splice(1,1),"\\"!==l.substr(l.length-1)&&(r[1]=(r[1]||"").replace(c,""),i=p.find[a](r,t,n),null!=i))){e=e.replace(p.match[a],"");break}return i||(i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:i,expr:e}},h.filter=function(e,n,i,o){for(var s,r,a,l,c,d,u,f,m,g=e,v=[],y=n,b=n&&n[0]&&h.isXML(n[0]);e&&n.length;){for(a in p.filter)if(null!=(s=p.leftMatch[a].exec(e))&&s[2]){if(d=p.filter[a],u=s[1],r=!1,s.splice(1,1),"\\"===u.substr(u.length-1))continue;if(y===v&&(v=[]),p.preFilter[a])if(s=p.preFilter[a](s,y,i,v,o,b)){if(s===!0)continue}else r=l=!0;if(s)for(f=0;null!=(c=y[f]);f++)c&&(l=d(c,s,f,y),m=o^l,i&&null!=l?m?r=!0:y[f]=!1:m&&(v.push(c),r=!0));if(l!==t){if(i||(y=v),e=e.replace(p.match[a],""),!r)return[];break}}if(e===g){if(null!=r)break;h.error(e)}g=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var f=h.getText=function(e){var t,n,i=e.nodeType,o="";if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(d,"");for(e=e.firstChild;e;e=e.nextSibling)o+=f(e)}else if(3===i||4===i)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(o+=f(n));return o},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!u.test(t),o=n&&!i;i&&(t=t.toLowerCase());for(var s,r=0,a=e.length;a>r;r++)if(s=e[r]){for(;(s=s.previousSibling)&&1!==s.nodeType;);e[r]=o||s&&s.nodeName.toLowerCase()===t?s||!1:s===t}o&&h.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,o=0,s=e.length;if(i&&!u.test(t)){for(t=t.toLowerCase();s>o;o++)if(n=e[o]){var r=n.parentNode;e[o]=r.nodeName.toLowerCase()===t?r:!1}}else{for(;s>o;o++)n=e[o],n&&(e[o]=i?n.parentNode:n.parentNode===t);i&&h.filter(t,e,!0)}},"":function(t,i,o){var r,a=s++,l=n;"string"!=typeof i||u.test(i)||(i=i.toLowerCase(),r=i,l=e),l("parentNode",i,a,t,r,o)},"~":function(t,i,o){var r,a=s++,l=n;"string"!=typeof i||u.test(i)||(i=i.toLowerCase(),r=i,l=e),l("previousSibling",i,a,t,r,o)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var i=t.getElementById(e[1]);return i&&i.parentNode?[i]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],i=t.getElementsByName(e[1]),o=0,s=i.length;s>o;o++)i[o].getAttribute("name")===e[1]&&n.push(i[o]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,i,o,s){if(e=" "+e[1].replace(c,"")+" ",s)return e;for(var r,a=0;null!=(r=t[a]);a++)r&&(o^(r.className&&(" "+r.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||i.push(r):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=s++,e},ATTR:function(e,t,n,i,o,s){var r=e[1]=e[1].replace(c,"");return!s&&p.attrMap[r]&&(e[1]=p.attrMap[r]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,o,s){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var r=h.filter(e[3],t,n,!0^s);return n||o.push.apply(o,r),!1}e[3]=h(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var o=t[1],s=p.filters[o];if(s)return s(e,n,t,i);if("contains"===o)return(e.textContent||e.innerText||f([e])||"").indexOf(t[3])>=0;if("not"===o){for(var r=t[3],a=0,l=r.length;l>a;a++)if(r[a]===e)return!1;return!0}h.error(o)},CHILD:function(e,t){var n,i,s,r,a,l,c=t[1],d=e;switch(c){case"only":case"first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===c)return!0;d=e;case"last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case"nth":if(n=t[2],i=t[3],1===n&&0===i)return!0;if(s=t[0],r=e.parentNode,r&&(r[o]!==s||!e.nodeIndex)){for(a=0,d=r.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++a);r[o]=s}return l=e.nodeIndex-i,0===n?0===l:l%n===0&&l/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=h.attr?h.attr(e,n):p.attrHandle[n]?p.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),o=i+"",s=t[2],r=t[4];return null==i?"!="===s:!s&&h.attr?null!=i:"="===s?o===r:"*="===s?o.indexOf(r)>=0:"~="===s?(" "+o+" ").indexOf(r)>=0:r?"!="===s?o!==r:"^="===s?0===o.indexOf(r):"$="===s?o.substr(o.length-r.length)===r:"|="===s?o===r||o.substr(0,r.length+1)===r+"-":!1:o&&i!==!1},POS:function(e,t,n,i){var o=t[2],s=p.setFilters[o];return s?s(e,n,t,i):void 0}}},m=p.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,g));p.match.globalPOS=m;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(I.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,i=t||[];if("[object Array]"===r.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var o=e.length;o>n;n++)i.push(e[n]);else for(;e[n];n++)i.push(e[n]);return i}}var x,w;I.documentElement.compareDocumentPosition?x=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(x=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,o=[],s=[],r=e.parentNode,l=t.parentNode,c=r;if(r===l)return w(e,t);if(!r)return-1;if(!l)return 1;for(;c;)o.unshift(c),c=c.parentNode;for(c=l;c;)s.unshift(c),c=c.parentNode;n=o.length,i=s.length;for(var d=0;n>d&&i>d;d++)if(o[d]!==s[d])return w(o[d],s[d]);return d===n?w(e,s[d],-1):w(o[d],t,1)},w=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}),function(){var e=I.createElement("div"),n="script"+(new Date).getTime(),i=I.documentElement;e.innerHTML="<a name='"+n+"'/>",i.insertBefore(e,i.firstChild),I.getElementById(n)&&(p.find.ID=function(e,n,i){if("undefined"!=typeof n.getElementById&&!i){var o=n.getElementById(e[1]);return o?o.id===e[1]||"undefined"!=typeof o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:t:[]}},p.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=I.createElement("div");e.appendChild(I.createComment("")),e.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],o=0;n[o];o++)1===n[o].nodeType&&i.push(n[o]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),I.querySelectorAll&&!function(){var e=h,t=I.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,i,o,s){if(i=i||I,!s&&!h.isXML(i)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(r&&(1===i.nodeType||9===i.nodeType)){if(r[1])return y(i.getElementsByTagName(t),o);if(r[2]&&p.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(r[2]),o)}if(9===i.nodeType){if("body"===t&&i.body)return y([i.body],o);if(r&&r[3]){var a=i.getElementById(r[3]);if(!a||!a.parentNode)return y([],o);if(a.id===r[3])return y([a],o)}try{return y(i.querySelectorAll(t),o)}catch(l){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var c=i,d=i.getAttribute("id"),u=d||n,f=i.parentNode,m=/^\s*[+~]/.test(t);d?u=u.replace(/'/g,"\\$&"):i.setAttribute("id",u),m&&f&&(i=i.parentNode);try{if(!m||f)return y(i.querySelectorAll("[id='"+u+"'] "+t),o)}catch(g){}finally{d||c.removeAttribute("id")}}}return e(t,i,o,s)};for(var i in e)h[i]=e[i];t=null}}(),function(){var e=I.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(I.createElement("div"),"div"),i=!1;try{t.call(I.documentElement,"[test!='']:sizzle")}catch(o){i=!0}h.matchesSelector=function(e,o){if(o=o.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(i||!p.match.PSEUDO.test(o)&&!/!=/.test(o)){var s=t.call(e,o);if(s||!n||e.document&&11!==e.document.nodeType)return s}}catch(r){}return h(o,null,null,[e]).length>0}}}(),function(){var e=I.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}(),h.contains=I.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:I.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var C=function(e,t,n){for(var i,o=[],s="",r=t.nodeType?[t]:t;i=p.match.PSEUDO.exec(e);)s+=i[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var a=0,l=r.length;l>a;a++)h(e,r[a],o,n);return h.filter(s,o)};h.attr=P.attr,h.selectors.attrMap={},P.find=h,P.expr=h.selectors,P.expr[":"]=P.expr.filters,P.unique=h.uniqueSort,P.text=h.getText,P.isXMLDoc=h.isXML,P.contains=h.contains}();var at=/Until$/,lt=/^(?:parents|prevUntil|prevAll)/,ct=/,/,dt=/^.[^:#\[\.,]*$/,ut=Array.prototype.slice,ht=P.expr.match.globalPOS,ft={children:!0,contents:!0,next:!0,prev:!0};P.fn.extend({find:function(e){var t,n,i=this;if("string"!=typeof e)return P(e).filter(function(){for(t=0,n=i.length;n>t;t++)if(P.contains(i[t],this))return!0});var o,s,r,a=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(o=a.length,P.find(e,this[t],a),t>0)for(s=o;s<a.length;s++)for(r=0;o>r;r++)if(a[r]===a[s]){a.splice(s--,1);break}return a},has:function(e){var t=P(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(P.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ht.test(e)?P(e,this.context).index(this[0])>=0:P.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i,o=[],s=this[0];if(P.isArray(e)){for(var r=1;s&&s.ownerDocument&&s!==t;){for(n=0;n<e.length;n++)P(s).is(e[n])&&o.push({selector:e[n],elem:s,level:r});s=s.parentNode,r++}return o}var a=ht.test(e)||"string"!=typeof e?P(e,t||this.context):0;for(n=0,i=this.length;i>n;n++)for(s=this[n];s;){if(a?a.index(s)>-1:P.find.matchesSelector(s,e)){o.push(s);break}if(s=s.parentNode,!s||!s.ownerDocument||s===t||11===s.nodeType)break}return o=o.length>1?P.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?P.inArray(this[0],P(e)):P.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?P(e,t):P.makeArray(e&&e.nodeType?[e]:e),i=P.merge(this.get(),n);return this.pushStack(l(n[0])||l(i[0])?i:P.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),P.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P.dir(e,"parentNode")},parentsUntil:function(e,t,n){return P.dir(e,"parentNode",n)},next:function(e){return P.nth(e,2,"nextSibling")},prev:function(e){return P.nth(e,2,"previousSibling")},nextAll:function(e){return P.dir(e,"nextSibling")},prevAll:function(e){return P.dir(e,"previousSibling")},nextUntil:function(e,t,n){return P.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return P.dir(e,"previousSibling",n)},siblings:function(e){return P.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return P.sibling(e.firstChild)},contents:function(e){return P.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:P.makeArray(e.childNodes)}},function(e,t){P.fn[e]=function(n,i){var o=P.map(this,t,n);return at.test(e)||(i=n),i&&"string"==typeof i&&(o=P.filter(i,o)),o=this.length>1&&!ft[e]?P.unique(o):o,(this.length>1||ct.test(i))&&lt.test(e)&&(o=o.reverse()),this.pushStack(o,e,ut.call(arguments).join(","))}}),P.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?P.find.matchesSelector(t[0],e)?[t[0]]:[]:P.find.matches(e,t)},dir:function(e,n,i){for(var o=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!P(s).is(i));)1===s.nodeType&&o.push(s),s=s[n];return o},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var pt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,yt=/<([\w:]+)/,bt=/<tbody/i,xt=/<|&#?\w+;/,wt=/<(?:script|style)/i,Ct=/<(?:script|object|embed|option|style)/i,Tt=new RegExp("<(?:"+pt+")[\\s/>]","i"),_t=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/\/(java|ecma)script/i,St=/^\s*<!(?:\[CDATA\[|\-\-)/,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},jt=d(I);Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,P.support.htmlSerialize||(Nt._default=[1,"div<div>","</div>"]),P.fn.extend({text:function(e){return P.access(this,function(e){return e===t?P.text(this):this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(P.isFunction(e))return this.each(function(t){P(this).wrapAll(e.call(this,t))});if(this[0]){var t=P(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return P.isFunction(e)?this.each(function(t){P(this).wrapInner(e.call(this,t))}):this.each(function(){var t=P(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=P.isFunction(e);return this.each(function(n){P(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){P.nodeName(this,"body")||P(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=P.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,P.clean(arguments)),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||P.filter(e,[n]).length)&&(t||1!==n.nodeType||(P.cleanData(n.getElementsByTagName("*")),P.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&P.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return P.clone(this,e,t)})},html:function(e){return P.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(mt,""):null;if(!("string"!=typeof e||wt.test(e)||!P.support.leadingWhitespace&&gt.test(e)||Nt[(yt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(P.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?P.isFunction(e)?this.each(function(t){var n=P(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=P(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;P(this).remove(),t?P(t).before(e):P(n).append(e)})):this.length?this.pushStack(P(P.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var o,s,r,a,l=e[0],c=[];if(!P.support.checkClone&&3===arguments.length&&"string"==typeof l&&_t.test(l))return this.each(function(){P(this).domManip(e,n,i,!0)});if(P.isFunction(l))return this.each(function(o){var s=P(this);e[0]=l.call(this,o,n?s.html():t),s.domManip(e,n,i)});if(this[0]){if(a=l&&l.parentNode,o=P.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:P.buildFragment(e,this,c),r=o.fragment,s=1===r.childNodes.length?r=r.firstChild:r.firstChild){n=n&&P.nodeName(s,"tr");for(var d=0,h=this.length,f=h-1;h>d;d++)i.call(n?u(this[d],s):this[d],o.cacheable||h>1&&f>d?P.clone(r,!0,!0):r)}c.length&&P.each(c,function(e,t){t.src?P.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):P.globalEval((t.text||t.textContent||t.innerHTML||"").replace(St,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),P.buildFragment=function(e,t,n){var i,o,s,r,a=e[0];return t&&t[0]&&(r=t[0].ownerDocument||t[0]),r.createDocumentFragment||(r=I),!(1===e.length&&"string"==typeof a&&a.length<512&&r===I&&"<"===a.charAt(0))||Ct.test(a)||!P.support.checkClone&&_t.test(a)||!P.support.html5Clone&&Tt.test(a)||(o=!0,s=P.fragments[a],s&&1!==s&&(i=s)),i||(i=r.createDocumentFragment(),P.clean(e,r,i,n)),o&&(P.fragments[a]=s?i:1),{fragment:i,cacheable:o}},P.fragments={},P.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){P.fn[e]=function(n){var i=[],o=P(n),s=1===this.length&&this[0].parentNode;if(s&&11===s.nodeType&&1===s.childNodes.length&&1===o.length)return o[t](this[0]),this;for(var r=0,a=o.length;a>r;r++){var l=(r>0?this.clone(!0):this).get();P(o[r])[t](l),i=i.concat(l)}return this.pushStack(i,e,o.selector)}}),P.extend({clone:function(e,t,n){var i,o,s,r=P.support.html5Clone||P.isXMLDoc(e)||!Tt.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(P.support.noCloneEvent&&P.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||P.isXMLDoc(e)))for(f(e,r),i=p(e),o=p(r),s=0;i[s];++s)o[s]&&f(i[s],o[s]);if(t&&(h(e,r),n))for(i=p(e),o=p(r),s=0;i[s];++s)h(i[s],o[s]);return i=o=null,r},clean:function(e,t,n,i){var o,s,r,a=[];t=t||I,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||I);for(var l,c=0;null!=(l=e[c]);c++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(xt.test(l)){l=l.replace(vt,"<$1></$2>");var u,h=(yt.exec(l)||["",""])[1].toLowerCase(),f=Nt[h]||Nt._default,p=f[0],m=t.createElement("div"),v=jt.childNodes;for(t===I?jt.appendChild(m):d(t).appendChild(m),m.innerHTML=f[1]+l+f[2];p--;)m=m.lastChild;if(!P.support.tbody){var y=bt.test(l),b="table"!==h||y?"<table>"!==f[1]||y?[]:m.childNodes:m.firstChild&&m.firstChild.childNodes;for(r=b.length-1;r>=0;--r)P.nodeName(b[r],"tbody")&&!b[r].childNodes.length&&b[r].parentNode.removeChild(b[r])}!P.support.leadingWhitespace&&gt.test(l)&&m.insertBefore(t.createTextNode(gt.exec(l)[0]),m.firstChild),l=m.childNodes,m&&(m.parentNode.removeChild(m),v.length>0&&(u=v[v.length-1],u&&u.parentNode&&u.parentNode.removeChild(u)))}else l=t.createTextNode(l);var x;if(!P.support.appendChecked)if(l[0]&&"number"==typeof(x=l.length))for(r=0;x>r;r++)g(l[r]);else g(l);l.nodeType?a.push(l):a=P.merge(a,l)}if(n)for(o=function(e){return!e.type||kt.test(e.type)},c=0;a[c];c++)if(s=a[c],i&&P.nodeName(s,"script")&&(!s.type||kt.test(s.type)))i.push(s.parentNode?s.parentNode.removeChild(s):s);else{if(1===s.nodeType){var w=P.grep(s.getElementsByTagName("script"),o);a.splice.apply(a,[c+1,0].concat(w))}n.appendChild(s)}return a},cleanData:function(e){for(var t,n,i,o=P.cache,s=P.event.special,r=P.support.deleteExpando,a=0;null!=(i=e[a]);a++)if((!i.nodeName||!P.noData[i.nodeName.toLowerCase()])&&(n=i[P.expando])){if(t=o[n],t&&t.events){for(var l in t.events)s[l]?P.event.remove(i,l):P.removeEvent(i,l,t.handle);t.handle&&(t.handle.elem=null)}r?delete i[P.expando]:i.removeAttribute&&i.removeAttribute(P.expando),delete o[n]}}});var Et,Mt,$t,It=/alpha\([^)]*\)/i,At=/opacity=([^)]*)/,Rt=/([A-Z]|^ms)/g,Pt=/^[\-+]?(?:\d*\.)?\d+$/i,Dt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Lt=/^([\-+])=([\-+.\de]+)/,Ot=/^margin/,Ht={position:"absolute",visibility:"hidden",display:"block"},Bt=["Top","Right","Bottom","Left"];P.fn.css=function(e,n){return P.access(this,function(e,n,i){return i!==t?P.style(e,n,i):P.css(e,n)},e,n,arguments.length>1)},P.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Et(e,"opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":P.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,a=P.camelCase(n),l=e.style,c=P.cssHooks[a];if(n=P.cssProps[a]||a,i===t)return c&&"get"in c&&(s=c.get(e,!1,o))!==t?s:l[n];if(r=typeof i,"string"===r&&(s=Lt.exec(i))&&(i=+(s[1]+1)*+s[2]+parseFloat(P.css(e,n)),r="number"),!(null==i||"number"===r&&isNaN(i)||("number"!==r||P.cssNumber[a]||(i+="px"),c&&"set"in c&&(i=c.set(e,i))===t)))try{l[n]=i}catch(d){}}},css:function(e,n,i){var o,s;return n=P.camelCase(n),s=P.cssHooks[n],n=P.cssProps[n]||n,"cssFloat"===n&&(n="float"),s&&"get"in s&&(o=s.get(e,!0,i))!==t?o:Et?Et(e,n):void 0},swap:function(e,t,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.call(e);for(o in t)e.style[o]=s[o];return i}}),P.curCSS=P.css,I.defaultView&&I.defaultView.getComputedStyle&&(Mt=function(e,t){var n,i,o,s,r=e.style;return t=t.replace(Rt,"-$1").toLowerCase(),(i=e.ownerDocument.defaultView)&&(o=i.getComputedStyle(e,null))&&(n=o.getPropertyValue(t),""!==n||P.contains(e.ownerDocument.documentElement,e)||(n=P.style(e,t))),!P.support.pixelMargin&&o&&Ot.test(t)&&Dt.test(n)&&(s=r.width,r.width=n,n=o.width,r.width=s),n}),I.documentElement.currentStyle&&($t=function(e,t){var n,i,o,s=e.currentStyle&&e.currentStyle[t],r=e.style;return null==s&&r&&(o=r[t])&&(s=o),Dt.test(s)&&(n=r.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":s,s=r.pixelLeft+"px",r.left=n,i&&(e.runtimeStyle.left=i)),""===s?"auto":s}),Et=Mt||$t,P.each(["height","width"],function(e,t){P.cssHooks[t]={get:function(e,n,i){return n?0!==e.offsetWidth?y(e,t,i):P.swap(e,Ht,function(){return y(e,t,i)}):void 0},set:function(e,t){return Pt.test(t)?t+"px":t}}}),P.support.opacity||(P.cssHooks.opacity={get:function(e,t){return At.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=P.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===P.trim(s.replace(It,""))&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=It.test(s)?s.replace(It,o):s+" "+o)}}),P(function(){P.support.reliableMarginRight||(P.cssHooks.marginRight={get:function(e,t){return P.swap(e,{display:"inline-block"},function(){return t?Et(e,"margin-right"):e.style.marginRight})}})}),P.expr&&P.expr.filters&&(P.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!P.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||P.css(e,"display"))},P.expr.filters.visible=function(e){return!P.expr.filters.hidden(e)}),P.each({margin:"",padding:"",border:"Width"},function(e,t){P.cssHooks[e+t]={expand:function(n){var i,o="string"==typeof n?n.split(" "):[n],s={};for(i=0;4>i;i++)s[e+Bt[i]+t]=o[i]||o[i-2]||o[0];return s}}});var qt,zt,Ft=/%20/g,Wt=/\[\]$/,Vt=/\r?\n/g,Xt=/#.*$/,Ut=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Yt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Gt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Jt=/\?/,Zt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,en=/^(?:select|textarea)/i,tn=/\s+/,nn=/([?&])_=[^&]*/,on=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,sn=P.fn.load,rn={},an={},ln=["*/"]+["*"];try{qt=R.href}catch(cn){qt=I.createElement("a"),qt.href="",qt=qt.href}zt=on.exec(qt.toLowerCase())||[],P.fn.extend({load:function(e,n,i){if("string"!=typeof e&&sn)return sn.apply(this,arguments);if(!this.length)return this;var o=e.indexOf(" ");if(o>=0){var s=e.slice(o,e.length);e=e.slice(0,o)}var r="GET";n&&(P.isFunction(n)?(i=n,n=t):"object"==typeof n&&(n=P.param(n,P.ajaxSettings.traditional),r="POST"));var a=this;return P.ajax({url:e,type:r,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(s?P("<div>").append(n.replace(Zt,"")).find(s):n)),i&&a.each(i,[n,t,e])}}),this},serialize:function(){return P.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?P.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||en.test(this.nodeName)||Yt.test(this.type))}).map(function(e,t){var n=P(this).val();return null==n?null:P.isArray(n)?P.map(n,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:n.replace(Vt,"\r\n")}}).get()}}),P.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){P.fn[t]=function(e){return this.on(t,e)}}),P.each(["get","post"],function(e,n){P[n]=function(e,i,o,s){return P.isFunction(i)&&(s=s||o,o=i,i=t),P.ajax({type:n,url:e,data:i,success:o,dataType:s})}}),P.extend({getScript:function(e,n){return P.get(e,t,n,"script")},getJSON:function(e,t,n){return P.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?w(e,P.ajaxSettings):(t=e,e=P.ajaxSettings),w(e,t),e},ajaxSettings:{url:qt,isLocal:Gt.test(zt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ln},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":P.parseJSON,"text xml":P.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b(rn),ajaxTransport:b(an),ajax:function(e,n){function i(e,n,i,r){if(2!==w){w=2,l&&clearTimeout(l),a=t,s=r||"",C.readyState=e>0?4:0;var c,u,y,b,x,k=n,S=i?T(h,C,i):t;if(e>=200&&300>e||304===e)if(h.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(P.lastModified[o]=b),(x=C.getResponseHeader("Etag"))&&(P.etag[o]=x)),304===e)k="notmodified",c=!0;
else try{u=_(h,S),k="success",c=!0}catch(N){k="parsererror",y=N}else y=k,(!k||e)&&(k="error",0>e&&(e=0));C.status=e,C.statusText=""+(n||k),c?m.resolveWith(f,[u,k,C]):m.rejectWith(f,[C,k,y]),C.statusCode(v),v=t,d&&p.trigger("ajax"+(c?"Success":"Error"),[C,h,c?u:y]),g.fireWith(f,[C,k]),d&&(p.trigger("ajaxComplete",[C,h]),--P.active||P.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var o,s,r,a,l,c,d,u,h=P.ajaxSetup({},n),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof P)?P(f):P.event,m=P.Deferred(),g=P.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,C={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===w?s:null},getResponseHeader:function(e){var n;if(2===w){if(!r)for(r={};n=Ut.exec(s);)r[n[1].toLowerCase()]=n[2];n=r[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),i(0,e),this}};if(m.promise(C),C.success=C.done,C.error=C.fail,C.complete=g.add,C.statusCode=function(e){if(e){var t;if(2>w)for(t in e)v[t]=[v[t],e[t]];else t=e[C.status],C.then(t,t)}return this},h.url=((e||h.url)+"").replace(Xt,"").replace(Qt,zt[1]+"//"),h.dataTypes=P.trim(h.dataType||"*").toLowerCase().split(tn),null==h.crossDomain&&(c=on.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==zt[1]&&c[2]==zt[2]&&(c[3]||("http:"===c[1]?80:443))==(zt[3]||("http:"===zt[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=P.param(h.data,h.traditional)),x(rn,h,n,C),2===w)return!1;if(d=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Kt.test(h.type),d&&0===P.active++&&P.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Jt.test(h.url)?"&":"?")+h.data,delete h.data),o=h.url,h.cache===!1)){var k=P.now(),S=h.url.replace(nn,"$1_="+k);h.url=S+(S===h.url?(Jt.test(h.url)?"&":"?")+"_="+k:"")}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(o=o||h.url,P.lastModified[o]&&C.setRequestHeader("If-Modified-Since",P.lastModified[o]),P.etag[o]&&C.setRequestHeader("If-None-Match",P.etag[o])),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+ln+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)C.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(f,C,h)===!1||2===w))return C.abort(),!1;for(u in{success:1,error:1,complete:1})C[u](h[u]);if(a=x(an,h,n,C)){C.readyState=1,d&&p.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},h.timeout));try{w=1,a.send(y,i)}catch(N){if(!(2>w))throw N;i(-1,N)}}else i(-1,"No Transport");return C},param:function(e,n){var i=[],o=function(e,t){t=P.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=P.ajaxSettings.traditional),P.isArray(e)||e.jquery&&!P.isPlainObject(e))P.each(e,function(){o(this.name,this.value)});else for(var s in e)C(s,e[s],n,o);return i.join("&").replace(Ft,"+")}}),P.extend({active:0,lastModified:{},etag:{}});var dn=P.now(),un=/(\=)\?(&|$)|\?\?/i;P.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return P.expando+"_"+dn++}}),P.ajaxPrefilter("json jsonp",function(t,n,i){var o="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(un.test(t.url)||o&&un.test(t.data))){var s,r=t.jsonpCallback=P.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[r],l=t.url,c=t.data,d="$1"+r+"$2";return t.jsonp!==!1&&(l=l.replace(un,d),t.url===l&&(o&&(c=c.replace(un,d)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+r))),t.url=l,t.data=c,e[r]=function(e){s=[e]},i.always(function(){e[r]=a,s&&P.isFunction(a)&&e[r](s[0])}),t.converters["script json"]=function(){return s||P.error(r+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),P.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return P.globalEval(e),e}}}),P.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),P.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(o,s){n=I.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,o){(o||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,o||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var hn,fn=e.ActiveXObject?function(){for(var e in hn)hn[e](0,1)}:!1,pn=0;P.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&k()||S()}:k,function(e){P.extend(P.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(P.ajaxSettings.xhr()),P.support.ajax&&P.ajaxTransport(function(n){if(!n.crossDomain||P.support.cors){var i;return{send:function(o,s){var r,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,o){var a,c,d,u,h;try{if(i&&(o||4===l.readyState))if(i=t,r&&(l.onreadystatechange=P.noop,fn&&delete hn[r]),o)4!==l.readyState&&l.abort();else{a=l.status,d=l.getAllResponseHeaders(),u={},h=l.responseXML,h&&h.documentElement&&(u.xml=h);try{u.text=l.responseText}catch(e){}try{c=l.statusText}catch(f){c=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(p){o||s(-1,p)}u&&s(a,c,u,d)},n.async&&4!==l.readyState?(r=++pn,fn&&(hn||(hn={},P(e).unload(fn)),hn[r]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var mn,gn,vn,yn,bn={},xn=/^(?:toggle|show|hide)$/,wn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Cn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];P.fn.extend({show:function(e,t,n){var i,o;if(e||0===e)return this.animate(E("show",3),e,t,n);for(var s=0,r=this.length;r>s;s++)i=this[s],i.style&&(o=i.style.display,P._data(i,"olddisplay")||"none"!==o||(o=i.style.display=""),(""===o&&"none"===P.css(i,"display")||!P.contains(i.ownerDocument.documentElement,i))&&P._data(i,"olddisplay",M(i.nodeName)));for(s=0;r>s;s++)i=this[s],i.style&&(o=i.style.display,(""===o||"none"===o)&&(i.style.display=P._data(i,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(E("hide",3),e,t,n);for(var i,o,s=0,r=this.length;r>s;s++)i=this[s],i.style&&(o=P.css(i,"display"),"none"===o||P._data(i,"olddisplay")||P._data(i,"olddisplay",o));for(s=0;r>s;s++)this[s].style&&(this[s].style.display="none");return this},_toggle:P.fn.toggle,toggle:function(e,t,n){var i="boolean"==typeof e;return P.isFunction(e)&&P.isFunction(t)?this._toggle.apply(this,arguments):null==e||i?this.each(function(){var t=i?e:P(this).is(":hidden");P(this)[t?"show":"hide"]()}):this.animate(E("toggle",3),e,t,n),this},fadeTo:function(e,t,n,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){function o(){s.queue===!1&&P._mark(this);var t,n,i,o,r,a,l,c,d,u,h,f=P.extend({},s),p=1===this.nodeType,m=p&&P(this).is(":hidden");f.animatedProperties={};for(i in e)if(t=P.camelCase(i),i!==t&&(e[t]=e[i],delete e[i]),(r=P.cssHooks[t])&&"expand"in r){a=r.expand(e[t]),delete e[t];for(i in a)i in e||(e[i]=a[i])}for(t in e){if(n=e[t],P.isArray(n)?(f.animatedProperties[t]=n[1],n=e[t]=n[0]):f.animatedProperties[t]=f.specialEasing&&f.specialEasing[t]||f.easing||"swing","hide"===n&&m||"show"===n&&!m)return f.complete.call(this);!p||"height"!==t&&"width"!==t||(f.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===P.css(this,"display")&&"none"===P.css(this,"float")&&(P.support.inlineBlockNeedsLayout&&"inline"!==M(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=f.overflow&&(this.style.overflow="hidden");for(i in e)o=new P.fx(this,f,i),n=e[i],xn.test(n)?(h=P._data(this,"toggle"+i)||("toggle"===n?m?"show":"hide":0),h?(P._data(this,"toggle"+i,"show"===h?"hide":"show"),o[h]()):o[n]()):(l=wn.exec(n),c=o.cur(),l?(d=parseFloat(l[2]),u=l[3]||(P.cssNumber[i]?"":"px"),"px"!==u&&(P.style(this,i,(d||1)+u),c=(d||1)/o.cur()*c,P.style(this,i,c+u)),l[1]&&(d=("-="===l[1]?-1:1)*d+c),o.custom(c,d,u)):o.custom(c,n,""));return!0}var s=P.speed(t,n,i);return P.isEmptyObject(e)?this.each(s.complete,[!1]):(e=P.extend({},e),s.queue===!1?this.each(o):this.queue(s.queue,o))},stop:function(e,n,i){return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var o=t[n];P.removeData(e,n,!0),o.stop(i)}var n,o=!1,s=P.timers,r=P._data(this);if(i||P._unmark(!0,this),null==e)for(n in r)r[n]&&r[n].stop&&n.indexOf(".run")===n.length-4&&t(this,r,n);else r[n=e+".run"]&&r[n].stop&&t(this,r,n);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(i?s[n](!0):s[n].saveState(),o=!0,s.splice(n,1));i&&o||P.dequeue(this,e)})}}),P.each({slideDown:E("show",1),slideUp:E("hide",1),slideToggle:E("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){P.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),P.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?P.extend({},e):{complete:n||!n&&t||P.isFunction(e)&&e,duration:e,easing:n&&t||t&&!P.isFunction(t)&&t};return i.duration=P.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in P.fx.speeds?P.fx.speeds[i.duration]:P.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(e){P.isFunction(i.old)&&i.old.call(this),i.queue?P.dequeue(this,i.queue):e!==!1&&P._unmark(this)},i},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),P.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(P.fx.step[this.prop]||P.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=P.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,n,i){function o(e){return s.step(e)}var s=this,r=P.fx;this.startTime=yn||N(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=i||this.unit||(P.cssNumber[this.prop]?"":"px"),o.queue=this.options.queue,o.elem=this.elem,o.saveState=function(){P._data(s.elem,"fxshow"+s.prop)===t&&(s.options.hide?P._data(s.elem,"fxshow"+s.prop,s.start):s.options.show&&P._data(s.elem,"fxshow"+s.prop,s.end))},o()&&P.timers.push(o)&&!vn&&(vn=setInterval(r.tick,r.interval))},show:function(){var e=P._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||P.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),P(this.elem).show()},hide:function(){this.options.orig[this.prop]=P._data(this.elem,"fxshow"+this.prop)||P.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,i,o=yn||N(),s=!0,r=this.elem,a=this.options;if(e||o>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(s=!1);if(s){if(null==a.overflow||P.support.shrinkWrapBlocks||P.each(["","X","Y"],function(e,t){r.style["overflow"+t]=a.overflow[e]}),a.hide&&P(r).hide(),a.hide||a.show)for(t in a.animatedProperties)P.style(r,t,a.orig[t]),P.removeData(r,"fxshow"+t,!0),P.removeData(r,"toggle"+t,!0);i=a.complete,i&&(a.complete=!1,i.call(r))}return!1}return 1/0==a.duration?this.now=o:(n=o-this.startTime,this.state=n/a.duration,this.pos=P.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},P.extend(P.fx,{tick:function(){for(var e,t=P.timers,n=0;n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||P.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){P.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),P.each(Cn.concat.apply([],Cn),function(e,t){t.indexOf("margin")&&(P.fx.step[t]=function(e){P.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),P.expr&&P.expr.filters&&(P.expr.filters.animated=function(e){return P.grep(P.timers,function(t){return e===t.elem}).length});var Tn,_n=/^t(?:able|d|h)$/i,kn=/^(?:body|html)$/i;Tn="getBoundingClientRect"in I.documentElement?function(e,t,n,i){try{i=e.getBoundingClientRect()}catch(o){}if(!i||!P.contains(n,e))return i?{top:i.top,left:i.left}:{top:0,left:0};var s=t.body,r=$(t),a=n.clientTop||s.clientTop||0,l=n.clientLeft||s.clientLeft||0,c=r.pageYOffset||P.support.boxModel&&n.scrollTop||s.scrollTop,d=r.pageXOffset||P.support.boxModel&&n.scrollLeft||s.scrollLeft,u=i.top+c-a,h=i.left+d-l;return{top:u,left:h}}:function(e,t,n){for(var i,o=e.offsetParent,s=e,r=t.body,a=t.defaultView,l=a?a.getComputedStyle(e,null):e.currentStyle,c=e.offsetTop,d=e.offsetLeft;(e=e.parentNode)&&e!==r&&e!==n&&(!P.support.fixedPosition||"fixed"!==l.position);)i=a?a.getComputedStyle(e,null):e.currentStyle,c-=e.scrollTop,d-=e.scrollLeft,e===o&&(c+=e.offsetTop,d+=e.offsetLeft,!P.support.doesNotAddBorder||P.support.doesAddBorderForTableAndCells&&_n.test(e.nodeName)||(c+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),s=o,o=e.offsetParent),P.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(c+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),l=i;return("relative"===l.position||"static"===l.position)&&(c+=r.offsetTop,d+=r.offsetLeft),P.support.fixedPosition&&"fixed"===l.position&&(c+=Math.max(n.scrollTop,r.scrollTop),d+=Math.max(n.scrollLeft,r.scrollLeft)),{top:c,left:d}},P.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){P.offset.setOffset(this,e,t)});var n=this[0],i=n&&n.ownerDocument;return i?n===i.body?P.offset.bodyOffset(n):Tn(n,i,i.documentElement):null},P.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return P.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(P.css(e,"marginTop"))||0,n+=parseFloat(P.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=P.css(e,"position");"static"===i&&(e.style.position="relative");var o,s,r=P(e),a=r.offset(),l=P.css(e,"top"),c=P.css(e,"left"),d=("absolute"===i||"fixed"===i)&&P.inArray("auto",[l,c])>-1,u={},h={};d?(h=r.position(),o=h.top,s=h.left):(o=parseFloat(l)||0,s=parseFloat(c)||0),P.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(u.top=t.top-a.top+o),null!=t.left&&(u.left=t.left-a.left+s),"using"in t?t.using.call(e,u):r.css(u)}},P.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=kn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(P.css(e,"marginTop"))||0,n.left-=parseFloat(P.css(e,"marginLeft"))||0,i.top+=parseFloat(P.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(P.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||I.body;e&&!kn.test(e.nodeName)&&"static"===P.css(e,"position");)e=e.offsetParent;return e})}}),P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);P.fn[e]=function(o){return P.access(this,function(e,o,s){var r=$(e);return s===t?r?n in r?r[n]:P.support.boxModel&&r.document.documentElement[o]||r.document.body[o]:e[o]:(r?r.scrollTo(i?P(r).scrollLeft():s,i?s:P(r).scrollTop()):e[o]=s,void 0)},e,o,arguments.length,null)}}),P.each({Height:"height",Width:"width"},function(e,n){var i="client"+e,o="scroll"+e,s="offset"+e;P.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(P.css(e,n,"padding")):this[n]():null},P.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(P.css(t,n,e?"margin":"border")):this[n]():null},P.fn[n]=function(e){return P.access(this,function(e,n,r){var a,l,c,d;return P.isWindow(e)?(a=e.document,l=a.documentElement[i],P.support.boxModel&&l||a.body&&a.body[i]||l):9===e.nodeType?(a=e.documentElement,a[i]>=a[o]?a[i]:Math.max(e.body[o],a[o],e.body[s],a[s])):r===t?(c=P.css(e,n),d=parseFloat(c),P.isNumeric(d)?d:c):(P(e).css(n,r),void 0)},n,e,arguments.length,null)}}),e.jQuery=e.$=P,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return P})}(window),function(e,t){var n=function(){var t=e(document).data("events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};n()&&e.error("jquery-ujs has already been loaded!");var i;e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var o=e.Event(n);return t.trigger(o,i),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var o,s,r,a,l,c,d,u;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===t?null:a,c=n.data("with-credentials")||null,d=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),s=n.attr("action"),r=n.serializeArray();var h=n.data("ujs:submit-button");h&&(r.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(o=n.data("method"),s=i.href(n),r=n.data("params")||null);u={type:o||"GET",data:r,dataType:d,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[e,o])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},xhrFields:{withCredentials:c},crossDomain:l},s&&(u.url=s);var f=i.ajax(u);return n.trigger("ajax:send",f),f}return!1},handleMethod:function(n){var o=i.href(n),s=n.data("method"),r=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+o+'"></form>'),d='<input name="_method" value="'+s+'" type="hidden" />';l!==t&&a!==t&&(d+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(d).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),o=!1;return n?(i.fire(e,"confirm")&&(o=i.confirm(n),t=i.fire(e,"confirm:complete",[o])),o&&t):!0},blankInputs:function(t,n,i){var o,s,r=e(),a=n||"input,textarea";return t.find(a).each(function(){o=e(this),s=o.is(":checkbox,:radio")?o.is(":checked"):o.val(),s==!!i&&(r=r.add(o))}),r.length?r:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,i){var o=n.data("events"),s=!0;return o!==t&&o.submit!==t&&e.each(o.submit,function(e,t){return"function"==typeof t.handler?s=t.handler(i):void 0}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},i.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),e(document).delegate(i.linkClickSelector,"click.rails",function(n){var o=e(this),s=o.data("method"),r=o.data("params");return i.allowAction(o)?(o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==t?!n.metaKey&&!n.ctrlKey||s&&"GET"!==s||r?(i.handleRemote(o)===!1&&i.enableElement(o),!1):!0:o.data("method")?(i.handleMethod(o),!1):void 0):i.stopEverything(n)}),e(document).delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),e(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var o=e(this),s=o.data("remote")!==t,r=i.blankInputs(o,i.requiredInputSelector),a=i.nonBlankInputs(o,i.fileInputSelector);return i.allowAction(o)?r&&o.attr("novalidate")==t&&i.fire(o,"ajax:aborted:required",[r])?i.stopEverything(n):s?a?(setTimeout(function(){i.disableFormElements(o)},13),i.fire(o,"ajax:aborted:file",[a])):!e.support.submitBubbles&&e().jquery<"1.7"&&i.callFormSubmitBindings(o,n)===!1?i.stopEverything(n):(i.handleRemote(o),!1):(setTimeout(function(){i.disableFormElements(o)},13),void 0):i.stopEverything(n)}),e(document).delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var o=n.attr("name"),s=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),e(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/* ===================================================
 * bootstrap-transition.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){e(function(){"use strict";e.support.transition=function(){var t=document.body||document.documentElement,n=t.style,i=void 0!==n.transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition;return i&&{end:function(){var t="TransitionEnd";return e.browser.webkit?t="webkitTransitionEnd":e.browser.mozilla?t="transitionend":e.browser.opera&&(t="oTransitionEnd"),t}()}}()})}(window.jQuery),/* ==========================================================
 * bootstrap-alert.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype={constructor:n,close:function(t){function n(){i.trigger("closed").remove()}var i,o=e(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=e(s),i.trigger("close"),t&&t.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger("close").removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n()}},e.fn.alert=function(t){return this.each(function(){var i=e(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype={constructor:t,setState:function(e){var t="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},toggle:function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")}},e.fn.button=function(n){return this.each(function(){var i=e(this),o=i.data("button"),s="object"==typeof n&&n;o||i.data("button",o=new t(this,s)),"toggle"==n?o.toggle():n&&o.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),/* ==========================================================
 * bootstrap-carousel.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.carousel.defaults,n),this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(){return this.interval=setInterval(e.proxy(this.next,this),this.options.interval),this},to:function(t){var n=this.$element.find(".active"),i=n.parent().children(),o=i.index(n),s=this;if(!(t>i.length-1||0>t))return this.sliding?this.$element.one("slid",function(){s.to(t)}):o==t?this.pause().cycle():this.slide(t>o?"next":"prev",e(i[t]))},pause:function(){return clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i=this.$element.find(".active"),o=n||i[t](),s=this.interval,r="next"==t?"left":"right",a="next"==t?"first":"last",l=this;return this.sliding=!0,s&&this.pause(),o=o.length?o:this.$element.find(".item")[a](),o.hasClass("active")?void 0:(!e.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(o.addClass(t),o[0].offsetWidth,i.addClass(r),o.addClass(r),this.$element.trigger("slide"),this.$element.one(e.support.transition.end,function(){o.removeClass([t,r].join(" ")).addClass("active"),i.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})),s&&this.cycle(),this)}},e.fn.carousel=function(n){return this.each(function(){var i=e(this),o=i.data("carousel"),s="object"==typeof n&&n;o||i.data("carousel",o=new t(this,s)),"number"==typeof n?o.to(n):"string"==typeof n||(n=s.slide)?o[n]():o.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n,i=e(this),o=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=!o.data("modal")&&e.extend({},o.data(),i.data());o.carousel(s),t.preventDefault()})})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n=this.dimension(),i=e.camelCase(["scroll",n].join("-")),o=this.$parent&&this.$parent.find(".in");o&&o.length&&(t=o.data("collapse"),o.collapse("hide"),t||o.data("collapse",null)),this.$element[n](0),this.transition("addClass","show","shown"),this.$element[n](this.$element[0][i])},hide:function(){var e=this.dimension();this.reset(this.$element[e]()),this.transition("removeClass","hide","hidden"),this.$element[e](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var o=this,s=function(){"show"==n&&o.reset(),o.$element.trigger(i)};this.$element.trigger(n)[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("collapse"),s="object"==typeof n&&n;o||i.data("collapse",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(o).data("collapse")?"toggle":i.data();e(o).collapse(s)})})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){e(n).parent().removeClass("open")}var n='[data-toggle="dropdown"]',i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,o=e(this),s=o.attr("data-target");return s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),n=e(s),n.length||(n=o.parent()),i=n.hasClass("open"),t(),!i&&n.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),o=n.data("dropdown");o||n.data("dropdown",o=new i(this)),"string"==typeof t&&o[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api",t),e("body").on("click.dropdown.data-api",n,i.prototype.toggle)})}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){"use strict";function t(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),n.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),n.call(t)})}function n(){this.$element.hide().trigger("hidden"),i.call(this)}function i(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(o,this)):o.call(this)):t&&t()}function o(){this.$backdrop.remove(),this.$backdrop=null}function s(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var r=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};r.prototype={constructor:r,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this;this.isShown||(e("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),s.call(this),i.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");!t.$element.parent().length&&t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(i){if(i&&i.preventDefault(),this.isShown){this.isShown=!1,e("body").removeClass("modal-open"),s.call(this),this.$element.trigger("hide").removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?t.call(this):n.call(this)}}},e.fn.modal=function(t){return this.each(function(){var n=e(this),i=n.data("modal"),o=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof t&&t);i||n.data("modal",i=new r(this,o)),"string"==typeof t?i[t]():o.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=r,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n,i=e(this),o=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":e.extend({},o.data(),i.data());t.preventDefault(),o.modal(s)})})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var o,s;this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,"manual"!=this.options.trigger&&(o="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(o,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n.options.delay&&n.options.delay.show?(n.hoverState="in",setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n.options.delay&&n.options.delay.hide?(n.hoverState="out",setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},show:function(){var e,t,n,i,o,s,r;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),i=e[0].offsetWidth,o=e[0].offsetHeight,t?s.split(" ")[1]:s){case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":r={top:n.top-o,left:n.left+n.width/2-i/2};break;case"left":r={top:n.top+n.height/2-o/2,left:n.left-i};break;case"right":r={top:n.top+n.height/2-o/2,left:n.left+n.width}}e.css(r).addClass(s).addClass("in")}},setContent:function(){var e=this.tip();e.find(".tooltip-inner").html(this.getTitle()),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title),e=(e||"").toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(n){return this.each(function(){var i=e(this),o=i.data("tooltip"),s="object"==typeof n&&n;o||i.data("tooltip",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),/* ===========================================================
 * bootstrap-popover.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var t=this.tip(),n=this.getTitle(),i=this.getContent();t.find(".popover-title")["object"==e.type(n)?"append":"html"](n),t.find(".popover-content > *")["object"==e.type(i)?"append":"html"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content),e=e.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip}}),e.fn.popover=function(n){return this.each(function(){var i=e(this),o=i.data("popover"),s="object"==typeof n&&n;o||i.data("popover",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),/* =============================================================
 * bootstrap-scrollspy.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */
!function(e){"use strict";function t(t,n){var i,o=e.proxy(this.process,this),s=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll.data-api",o),this.selector=(this.options.target||(i=e(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body").on("click.scroll.data-api",this.selector,o),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var t=e(this).attr("href");return/^#\w/.test(t)&&e(t).length?t:null}),this.offsets=e.map(this.targets,function(t){return e(t).position().top})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.offsets,i=this.targets,o=this.activeTarget;for(e=n.length;e--;)o!=i[e]&&t>=n[e]&&(!n[e+1]||t<=n[e+1])&&this.activate(i[e])},activate:function(e){var t;this.activeTarget=e,this.$body.find(this.selector).parent(".active").removeClass("active"),t=this.$body.find(this.selector+'[href="'+e+'"]').parent("li").addClass("active"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active")}},e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),o=i.data("scrollspy"),s="object"==typeof n&&n;o||i.data("scrollspy",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i=this.element,o=i.closest("ul:not(.dropdown-menu)"),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i.parent("li").hasClass("active")||(t=o.find(".active a").last()[0],i.trigger({type:"show",relatedTarget:t}),n=e(s),this.activate(i.parent("li"),o),this.activate(n,n.parent(),function(){i.trigger({type:"shown",relatedTarget:t})}))},activate:function(t,n,i){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),r=i&&e.support.transition&&s.hasClass("fade");r?s.one(e.support.transition.end,o):o(),s.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var i=e(this),o=i.data("tab");o||i.data("tab",o=new t(this)),"string"==typeof n&&o[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(e),this.$element.change(),this.hide()},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t,n=this;return this.query=this.$element.val(),this.query?(t=e.grep(this.source,function(e){return n.matcher(e)?e:void 0}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):o.push(t):n.push(t);return n.concat(i,o)},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keypress,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},keypress:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var i=e(this),o=i.data("typeahead"),s="object"==typeof n&&n;o||i.data("typeahead",o=new t(this,s)),"string"==typeof n&&o[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||(t.preventDefault(),n.typeahead(n.data()))})})}(window.jQuery);var wysihtml5ParserRules={classes:{"wysiwyg-clear-both":1,"wysiwyg-clear-left":1,"wysiwyg-clear-right":1,"wysiwyg-color-aqua":1,"wysiwyg-color-black":1,"wysiwyg-color-blue":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-gray":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-maroon":1,"wysiwyg-color-navy":1,"wysiwyg-color-olive":1,"wysiwyg-color-purple":1,"wysiwyg-color-red":1,"wysiwyg-color-silver":1,"wysiwyg-color-teal":1,"wysiwyg-color-white":1,"wysiwyg-color-yellow":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-xx-small":1,"wysiwyg-text-align-center":1,"wysiwyg-text-align-justify":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-right":1},tags:{tr:{add_class:{align:"align_text"}},strike:{remove:1},form:{rename_tag:"div"},rt:{rename_tag:"span"},code:{},acronym:{rename_tag:"span"},br:{add_class:{clear:"clear_br"}},details:{rename_tag:"div"},h4:{add_class:{align:"align_text"}},em:{},title:{remove:1},multicol:{rename_tag:"div"},figure:{rename_tag:"div"},xmp:{rename_tag:"span"},small:{rename_tag:"span",set_class:"wysiwyg-font-size-smaller"},area:{remove:1},time:{rename_tag:"span"},dir:{rename_tag:"ul"},bdi:{rename_tag:"span"},command:{remove:1},ul:{},progress:{rename_tag:"span"},dfn:{rename_tag:"span"},iframe:{check_attributes:{src:"url",width:"numbers",height:"numbers"},set_attributes:{frameborder:"0"}},figcaption:{rename_tag:"div"},a:{check_attributes:{href:"url"},set_attributes:{rel:"nofollow",target:"_blank"}},img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"},add_class:{align:"align_img"}},rb:{rename_tag:"span"},footer:{rename_tag:"div"},noframes:{remove:1},abbr:{rename_tag:"span"},u:{},bgsound:{remove:1},sup:{rename_tag:"span"},address:{rename_tag:"div"},basefont:{remove:1},nav:{rename_tag:"div"},h1:{add_class:{align:"align_text"}},head:{remove:1},tbody:{add_class:{align:"align_text"}},dd:{rename_tag:"div"},s:{rename_tag:"span"},li:{},td:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},object:{remove:1},div:{add_class:{align:"align_text"}},option:{rename_tag:"span"},select:{rename_tag:"span"},i:{},track:{remove:1},wbr:{remove:1},fieldset:{rename_tag:"div"},big:{rename_tag:"span",set_class:"wysiwyg-font-size-larger"},button:{rename_tag:"span"},noscript:{remove:1},svg:{remove:1},input:{remove:1},table:{},keygen:{remove:1},h5:{add_class:{align:"align_text"}},meta:{remove:1},map:{rename_tag:"div"},isindex:{remove:1},mark:{rename_tag:"span"},caption:{add_class:{align:"align_text"}},tfoot:{add_class:{align:"align_text"}},base:{remove:1},video:{remove:1},strong:{},canvas:{remove:1},output:{rename_tag:"span"},marquee:{rename_tag:"span"},b:{},q:{check_attributes:{cite:"url"}},applet:{remove:1},span:{},rp:{rename_tag:"span"},spacer:{remove:1},source:{remove:1},aside:{rename_tag:"div"},frame:{remove:1},section:{rename_tag:"div"},body:{rename_tag:"div"},ol:{},nobr:{rename_tag:"span"},html:{rename_tag:"div"},summary:{rename_tag:"span"},"var":{rename_tag:"span"},del:{remove:1},blockquote:{check_attributes:{cite:"url"}},style:{remove:1},device:{remove:1},meter:{rename_tag:"span"},h3:{add_class:{align:"align_text"}},textarea:{rename_tag:"span"},embed:{remove:1},hgroup:{rename_tag:"div"},font:{rename_tag:"span",add_class:{size:"size_font"}},tt:{rename_tag:"span"},noembed:{remove:1},thead:{add_class:{align:"align_text"}},blink:{rename_tag:"span"},plaintext:{rename_tag:"span"},xml:{remove:1},h6:{add_class:{align:"align_text"}},param:{remove:1},th:{check_attributes:{rowspan:"numbers",colspan:"numbers"},add_class:{align:"align_text"}},legend:{rename_tag:"span"},hr:{},label:{rename_tag:"span"},dl:{rename_tag:"div"},kbd:{rename_tag:"span"},listing:{rename_tag:"div"},dt:{rename_tag:"span"},nextid:{remove:1},pre:{},center:{rename_tag:"div",set_class:"wysiwyg-text-align-center"},audio:{remove:1},datalist:{rename_tag:"span"},samp:{rename_tag:"span"},col:{remove:1},article:{rename_tag:"div"},cite:{},link:{remove:1},script:{remove:1},bdo:{rename_tag:"span"},menu:{rename_tag:"ul"},colgroup:{remove:1},ruby:{rename_tag:"span"},h2:{add_class:{align:"align_text"}},ins:{rename_tag:"span"},p:{add_class:{align:"align_text"}},sub:{rename_tag:"span"},comment:{remove:1},frameset:{remove:1},optgroup:{rename_tag:"span"},header:{rename_tag:"div"}}};(function(){}).call(this),function(e){function t(e){return e.attr("data-name")}function n(n){return e('[name="'+t(n)+'"]')}function i(e){return n(e).length>=1}function o(e){console.log("adding hidden_fiel?d "+e+" : "+t(e)+" "+i(e)),i(e)||(console.log("adding hidden_field"),e.after('<input name="'+t(e)+'" id="'+t(e)+'" type="hidden" value="1">'),console.log("success: "+i(e)))}function s(e){n(e).remove()}function r(e){e.removeClass("unchecked"),e.addClass("checked"),o(e)}function a(e){e.removeClass("checked"),e.addClass("unchecked"),s(e)}function l(e){var t=e.attr("data-alt");void 0!=t&&(e.attr("data-alt",e.text()),e.text(t))}function c(e){e.hasClass("checked")?a(e):r(e),l(e)}e.fn.checkBox=function(){return this.each(function(){var t=e(this);t.hasClass("checked")&&!i(t)&&o(t),t.css("cursor","pointer"),t.click(function(){c(t)})})},e.fn.checkBoxToggle=function(){c(this)}}($),function(){}.call(this),function(){}.call(this),function(){}.call(this),window.googleLT_||(window.googleLT_=(new Date).getTime()),window.google||(window.google={}),window.google.loader||(window.google.loader={},google.loader.ServiceBase="https://www.google.com/uds",google.loader.GoogleApisBase="https://ajax.googleapis.com/ajax",google.loader.ApiKey="notsupplied",google.loader.KeyVerified=!0,google.loader.LoadFailure=!1,google.loader.Secure=!0,google.loader.GoogleLocale="www.google.com",google.loader.ClientLocation=null,google.loader.AdditionalParams="",function(){function e(e,t){return e.load=t}function t(e){return e in I?I[e]:I[e]=-1!=navigator.userAgent[$]()[w](e)}function n(e,t){var n=function(){};n.prototype=t[S],e.U=t[S],e.prototype=new n}function i(e,t){var n=Array[S].slice.call(arguments,2)||[];return function(){var i=n.concat(Array[S].slice.call(arguments));return e.apply(t,i)}}function o(e){return e=Error(e),e.toString=function(){return this.message},e}function s(e,t){for(var n=e.split(/\./),i=g,o=0;o<n[k]-1;o++)i[n[o]]||(i[n[o]]={}),i=i[n[o]];i[n[n[k]-1]]=t}function r(e,t,n){e[t]=n}function a(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e["on"+t];e["on"+t]=null!=i?l([n,i]):n}}function l(e){return function(){for(var t=0;t<e[k];t++)e[t]()}}function c(){O[v.readyState]?d():0<L[k]&&g[N](c,10)}function d(){for(var e=0;e<L[k];e++)L[e]();L.length=0}function u(e){this.b=e,this.o=[],this.n={},this.e={},this.f={},this.j=!0,this.c=-1}function h(e){this.F=e,this.q={},this.r=0}function f(e,t,n){this.name=e,this.D=t,this.p=n,this.u=this.h=!1,this.k=[],google[j].v[this[T]]=i(this.l,this)}function p(e,t){this.b=e,this.i=t,this.h=!1}var m=encodeURIComponent,g=window,v=document,y="push",b="replace",x="charAt",w="indexOf",C="ServiceBase",T="name",_="getTime",k="length",S="prototype",N="setTimeout",j="loader",E="substring",M="join",$="toLowerCase",I={};if(!A)var A=s;if(!R)var R=r;google[j].v={},A("google.loader.callbacks",google[j].v);var P={},D={};google[j].eval={},A("google.loader.eval",google[j].eval),e(google,function(e,t,n){function i(e){var t=e.split(".");if(2<t[k])throw o("Module: '"+e+"' not found!");"undefined"!=typeof t[1]&&(s=t[0],n.packages=n.packages||[],n.packages[y](t[1]))}var s=e;if(n=n||{},e instanceof Array||e&&"object"==typeof e&&"function"==typeof e[M]&&"function"==typeof e.reverse)for(var r=0;r<e[k];r++)i(e[r]);else i(e);if(!(e=P[":"+s]))throw o("Module: '"+s+"' not found!");if(n&&!n.language&&n.locale&&(n.language=n.locale),n&&"string"==typeof n.callback&&(r=n.callback,r.match(/^[[\]A-Za-z0-9._]+$/)&&(r=g.eval(r),n.callback=r)),(r=n&&null!=n.callback)&&!e.s(t))throw o("Module: '"+s+"' must be loaded before DOM onLoad!");r?e.m(t,n)?g[N](n.callback,0):e.load(t,n):e.m(t,n)||e.load(t,n)}),A("google.load",google.load),google.T=function(e,n){n?(0==L[k]&&(a(g,"load",d),!t("msie")&&!t("safari")&&!t("konqueror")&&t("mozilla")||g.opera?g.addEventListener("DOMContentLoaded",d,!1):t("msie")?v.write("<script defer onreadystatechange='google.loader.domReady()' src=//:></script>"):(t("safari")||t("konqueror"))&&g[N](c,10)),L[y](e)):a(g,"load",e)},A("google.setOnLoadCallback",google.T);var L=[];google[j].P=function(){var e=g.event.srcElement;"complete"==e.readyState&&(e.onreadystatechange=null,e.parentNode.removeChild(e),d())},A("google.loader.domReady",google[j].P);var O={loaded:!0,complete:!0};google[j].d=function(e,t,n){if(n){var i;"script"==e?(i=v.createElement("script"),i.type="text/javascript",i.src=t):"css"==e&&(i=v.createElement("link"),i.type="text/css",i.href=t,i.rel="stylesheet"),(e=v.getElementsByTagName("head")[0])||(e=v.body.parentNode.appendChild(v.createElement("head"))),e.appendChild(i)}else"script"==e?v.write('<script src="'+t+'" type="text/javascript"></script>'):"css"==e&&v.write('<link href="'+t+'" type="text/css" rel="stylesheet"></link>')},A("google.loader.writeLoadTag",google[j].d),google[j].Q=function(e){D=e},A("google.loader.rfm",google[j].Q),google[j].S=function(e){for(var t in e)"string"==typeof t&&t&&":"==t[x](0)&&!P[t]&&(P[t]=new p(t[E](1),e[t]))},A("google.loader.rpl",google[j].S),google[j].R=function(e){if((e=e.specs)&&e[k])for(var t=0;t<e[k];++t){var n=e[t];"string"==typeof n?P[":"+n]=new u(n):(n=new f(n[T],n.baseSpec,n.customSpecs),P[":"+n[T]]=n)}},A("google.loader.rm",google[j].R),google[j].loaded=function(e){P[":"+e.module].l(e)},A("google.loader.loaded",google[j].loaded),google[j].O=function(){return"qid="+((new Date)[_]().toString(16)+Math.floor(1e7*Math.random()).toString(16))},A("google.loader.createGuidArg_",google[j].O),s("google_exportSymbol",s),s("google_exportProperty",r),google[j].a={},A("google.loader.themes",google[j].a),google[j].a.I="//www.google.com/cse/style/look/bubblegum.css",R(google[j].a,"BUBBLEGUM",google[j].a.I),google[j].a.K="//www.google.com/cse/style/look/greensky.css",R(google[j].a,"GREENSKY",google[j].a.K),google[j].a.J="//www.google.com/cse/style/look/espresso.css",R(google[j].a,"ESPRESSO",google[j].a.J),google[j].a.M="//www.google.com/cse/style/look/shiny.css",R(google[j].a,"SHINY",google[j].a.M),google[j].a.L="//www.google.com/cse/style/look/minimalist.css",R(google[j].a,"MINIMALIST",google[j].a.L),google[j].a.N="//www.google.com/cse/style/look/v2/default.css",R(google[j].a,"V2_DEFAULT",google[j].a.N),u[S].g=function(e,t){var n="";if(void 0!=t&&(void 0!=t.language&&(n+="&hl="+m(t.language)),void 0!=t.nocss&&(n+="&output="+m("nocss="+t.nocss)),void 0!=t.nooldnames&&(n+="&nooldnames="+m(t.nooldnames)),void 0!=t.packages&&(n+="&packages="+m(t.packages)),null!=t.callback&&(n+="&async=2"),void 0!=t.style&&(n+="&style="+m(t.style)),void 0!=t.noexp&&(n+="&noexp=true"),void 0!=t.other_params&&(n+="&"+t.other_params)),!this.j){google[this.b]&&google[this.b].JSHash&&(n+="&sig="+m(google[this.b].JSHash));var i,o=[];for(i in this.n)":"==i[x](0)&&o[y](i[E](1));for(i in this.e)":"==i[x](0)&&this.e[i]&&o[y](i[E](1));n+="&have="+m(o[M](","))}return google[j][C]+"/?file="+this.b+"&v="+e+google[j].AdditionalParams+n},u[S].t=function(e){var t=null;e&&(t=e.packages);var n=null;if(t)if("string"==typeof t)n=[e.packages];else if(t[k])for(n=[],e=0;e<t[k];e++)"string"==typeof t[e]&&n[y](t[e][b](/^\s*|\s*$/,"")[$]());for(n||(n=["default"]),t=[],e=0;e<n[k];e++)this.n[":"+n[e]]||t[y](n[e]);return t},e(u[S],function(e,t){var n=this.t(t),i=t&&null!=t.callback;if(i)var o=new h(t.callback);for(var s=[],r=n[k]-1;r>=0;r--){var a=n[r];i&&o.B(a),this.e[":"+a]?(n.splice(r,1),i&&this.f[":"+a][y](o)):s[y](a)}if(n[k]){for(t&&t.packages&&(t.packages=n.sort()[M](",")),r=0;r<s[k];r++)a=s[r],this.f[":"+a]=[],i&&this.f[":"+a][y](o);if(t||null==D[":"+this.b]||null==D[":"+this.b].versions[":"+e]||google[j].AdditionalParams||!this.j)t&&t.autoloaded||google[j].d("script",this.g(e,t),i);else{n=D[":"+this.b],google[this.b]=google[this.b]||{};for(var l in n.properties)l&&":"==l[x](0)&&(google[this.b][l[E](1)]=n.properties[l]);google[j].d("script",google[j][C]+n.path+n.js,i),n.css&&google[j].d("css",google[j][C]+n.path+n.css,i)}for(this.j&&(this.j=!1,this.c=(new Date)[_](),1!=this.c%100&&(this.c=-1)),r=0;r<s[k];r++)a=s[r],this.e[":"+a]=!0}}),u[S].l=function(e){-1!=this.c&&(V("al_"+this.b,"jl."+((new Date)[_]()-this.c),!0),this.c=-1),this.o=this.o.concat(e.components),google[j][this.b]||(google[j][this.b]={}),google[j][this.b].packages=this.o.slice(0);for(var t=0;t<e.components[k];t++){this.n[":"+e.components[t]]=!0,this.e[":"+e.components[t]]=!1;var n=this.f[":"+e.components[t]];if(n){for(var i=0;i<n[k];i++)n[i].C(e.components[t]);delete this.f[":"+e.components[t]]}}},u[S].m=function(e,t){return 0==this.t(t)[k]},u[S].s=function(){return!0},h[S].B=function(e){this.r++,this.q[":"+e]=!0},h[S].C=function(e){this.q[":"+e]&&(this.q[":"+e]=!1,this.r--,0==this.r&&g[N](this.F,0))},n(f,u),e(f[S],function(e,t){var n=t&&null!=t.callback;n?(this.k[y](t.callback),t.callback="google.loader.callbacks."+this[T]):this.h=!0,t&&t.autoloaded||google[j].d("script",this.g(e,t),n)}),f[S].m=function(e,t){return t&&null!=t.callback?this.u:this.h},f[S].l=function(){this.u=!0;for(var e=0;e<this.k[k];e++)g[N](this.k[e],0);this.k=[]};var H=function(e,t){return e.string?m(e.string)+"="+m(t):e.regex?t[b](/(^.*$)/,e.regex):""};f[S].g=function(e,t){return this.G(this.w(e),e,t)},f[S].G=function(e,t,n){var i="";if(e.key&&(i+="&"+H(e.key,google[j].ApiKey)),e.version&&(i+="&"+H(e.version,t)),t=google[j].Secure&&e.ssl?e.ssl:e.uri,null!=n)for(var o in n)e.params[o]?i+="&"+H(e.params[o],n[o]):"other_params"==o?i+="&"+n[o]:"base_domain"==o&&(t="http://"+n[o]+e.uri[E](e.uri[w]("/",7)));return google[this[T]]={},-1==t[w]("?")&&i&&(i="?"+i[E](1)),t+i},f[S].s=function(e){return this.w(e).deferred},f[S].w=function(e){if(this.p)for(var t=0;t<this.p[k];++t){var n=this.p[t];if(RegExp(n.pattern).test(e))return n}return this.D},n(p,u),e(p[S],function(e,t){this.h=!0,google[j].d("script",this.g(e,t),!1)}),p[S].m=function(){return this.h},p[S].l=function(){},p[S].g=function(e,t){if(!this.i.versions[":"+e]){if(this.i.aliases){var n=this.i.aliases[":"+e];n&&(e=n)}if(!this.i.versions[":"+e])throw o("Module: '"+this.b+"' with version '"+e+"' not found!")}return google[j].GoogleApisBase+"/libs/"+this.b+"/"+e+"/"+this.i.versions[":"+e][t&&t.uncompressed?"uncompressed":"compressed"]},p[S].s=function(){return!1};var B=!1,q=[],z=(new Date)[_](),F=function(){B||(a(g,"unload",X),B=!0)},W=function(e,t){if(F(),!(google[j].Secure||google[j].Options&&!1!==google[j].Options.csi)){for(var n=0;n<e[k];n++)e[n]=m(e[n][$]()[b](/[^a-z0-9_.]+/g,"_"));for(n=0;n<t[k];n++)t[n]=m(t[n][$]()[b](/[^a-z0-9_.]+/g,"_"));g[N](i(U,null,"//gg.google.com/csi?s=uds&v=2&action="+e[M](",")+"&it="+t[M](",")),1e4)}},V=function(e,t,n){n?W([e],[t]):(F(),q[y]("r"+q[k]+"="+m(e+(t?"|"+t:""))),g[N](X,5<q[k]?0:15e3))},X=function(){if(q[k]){var e=google[j][C];0==e[w]("http:")&&(e=e[b](/^http:/,"https:")),U(e+"/stats?"+q[M]("&")+"&nc="+(new Date)[_]()+"_"+((new Date)[_]()-z)),q.length=0}},U=function(e){var t=new Image,n=U.H++;U.A[n]=t,t.onload=t.onerror=function(){delete U.A[n]},t.src=e,t=null};U.A={},U.H=0,s("google.loader.recordCsiStat",W),s("google.loader.recordStat",V),s("google.loader.createImageForLogging",U)}(),google.loader.rm({specs:["feeds","spreadsheets","gdata","visualization",{name:"sharing",baseSpec:{uri:"http://www.google.com/s2/sharing/js",ssl:null,key:{string:"key"},version:{string:"v"},deferred:!1,params:{language:{string:"hl"}}}},"search","orkut","ads","elements",{name:"books",baseSpec:{uri:"http://books.google.com/books/api.js",ssl:"https://encrypted.google.com/books/api.js",key:{string:"key"},version:{string:"v"},deferred:!0,params:{callback:{string:"callback"},language:{string:"hl"}}}},{name:"friendconnect",baseSpec:{uri:"http://www.google.com/friendconnect/script/friendconnect.js",ssl:null,key:{string:"key"},version:{string:"v"},deferred:!1,params:{}}},"identitytoolkit","ima",{name:"maps",baseSpec:{uri:"http://maps.google.com/maps?file=googleapi",ssl:"https://maps-api-ssl.google.com/maps?file=googleapi",key:{string:"key"},version:{string:"v"},deferred:!0,params:{callback:{regex:"callback=$1&async=2"},language:{string:"hl"}}},customSpecs:[{uri:"http://maps.googleapis.com/maps/api/js",ssl:"https://maps.googleapis.com/maps/api/js",version:{string:"v"},deferred:!0,params:{callback:{string:"callback"},language:{string:"hl"}},pattern:"^(3|3..*)$"}]},"payments","wave","annotations_v2","earth","language",{name:"annotations",baseSpec:{uri:"http://www.google.com/reviews/scripts/annotations_bootstrap.js",ssl:null,key:{string:"key"},version:{string:"v"},deferred:!0,params:{callback:{string:"callback"},language:{string:"hl"},country:{string:"gl"}}}},"picker"]}),google.loader.rfm({":search":{versions:{":1":"1",":1.0":"1"},path:"/api/search/1.0/351077565dad05b6847b1f7d41e36949/",js:"default+en.I.js",css:"default+en.css",properties:{":JSHash":"351077565dad05b6847b1f7d41e36949",":NoOldNames":!1,":Version":"1.0"}},":language":{versions:{":1":"1",":1.0":"1"},path:"/api/language/1.0/72dfd738bc1b18a14ab936bb2690a4f0/",js:"default+en.I.js",properties:{":JSHash":"72dfd738bc1b18a14ab936bb2690a4f0",":Version":"1.0"}},":feeds":{versions:{":1":"1",":1.0":"1"},path:"/api/feeds/1.0/e658fb253c8b588196cf534cc43ab319/",js:"default+en.I.js",css:"default+en.css",properties:{":JSHash":"e658fb253c8b588196cf534cc43ab319",":Version":"1.0"}},":spreadsheets":{versions:{":0":"1",":0.4":"1"},path:"/api/spreadsheets/0.4/87ff7219e9f8a8164006cbf28d5e911a/",js:"default.I.js",properties:{":JSHash":"87ff7219e9f8a8164006cbf28d5e911a",":Version":"0.4"}},":ima":{versions:{":3":"1",":3.0":"1"},path:"/api/ima/3.0/28a914332232c9a8ac0ae8da68b1006e/",js:"default.I.js",properties:{":JSHash":"28a914332232c9a8ac0ae8da68b1006e",":Version":"3.0"}},":wave":{versions:{":1":"1",":1.0":"1"},path:"/api/wave/1.0/3b6f7573ff78da6602dda5e09c9025bf/",js:"default.I.js",properties:{":JSHash":"3b6f7573ff78da6602dda5e09c9025bf",":Version":"1.0"}},":earth":{versions:{":1":"1",":1.0":"1"},path:"/api/earth/1.0/109c7b2bae7fe6cc34ea875176165d81/",js:"default.I.js",properties:{":JSHash":"109c7b2bae7fe6cc34ea875176165d81",":Version":"1.0"}},":annotations":{versions:{":1":"1",":1.0":"1"},path:"/api/annotations/1.0/bacce7b6155a1bbadda3c05d65391b22/",js:"default+en.I.js",properties:{":JSHash":"bacce7b6155a1bbadda3c05d65391b22",":Version":"1.0"}},":picker":{versions:{":1":"1",":1.0":"1"},path:"/api/picker/1.0/27b625d21ca34b09c89dcd3d22f65143/",js:"default.I.js",css:"default.css",properties:{":JSHash":"27b625d21ca34b09c89dcd3d22f65143",":Version":"1.0"}}}),google.loader.rpl({":scriptaculous":{versions:{":1.8.3":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.9.0":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.8.2":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"},":1.8.1":{uncompressed:"scriptaculous.js",compressed:"scriptaculous.js"}},aliases:{":1.8":"1.8.3",":1":"1.9.0",":1.9":"1.9.0"}},":yui":{versions:{":2.6.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.9.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.7.0":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.8.0r4":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.8.2r1":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":2.8.1":{uncompressed:"build/yuiloader/yuiloader.js",compressed:"build/yuiloader/yuiloader-min.js"},":3.3.0":{uncompressed:"build/yui/yui.js",compressed:"build/yui/yui-min.js"}},aliases:{":3":"3.3.0",":2":"2.9.0",":2.7":"2.7.0",":2.8.2":"2.8.2r1",":2.6":"2.6.0",":2.9":"2.9.0",":2.8":"2.8.2r1",":2.8.0":"2.8.0r4",":3.3":"3.3.0"}},":swfobject":{versions:{":2.1":{uncompressed:"swfobject_src.js",compressed:"swfobject.js"},":2.2":{uncompressed:"swfobject_src.js",compressed:"swfobject.js"}},aliases:{":2":"2.2"}},":webfont":{versions:{":1.0.28":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.27":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.29":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.12":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.13":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.14":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.15":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.10":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.11":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.2":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.1":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.0":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.6":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.19":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.5":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.18":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.4":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.17":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.3":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.16":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.9":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.21":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.22":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.25":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.26":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.23":{uncompressed:"webfont_debug.js",compressed:"webfont.js"},":1.0.24":{uncompressed:"webfont_debug.js",compressed:"webfont.js"}},aliases:{":1":"1.0.29",":1.0":"1.0.29"}},":ext-core":{versions:{":3.1.0":{uncompressed:"ext-core-debug.js",compressed:"ext-core.js"},":3.0.0":{uncompressed:"ext-core-debug.js",compressed:"ext-core.js"}},aliases:{":3":"3.1.0",":3.0":"3.0.0",":3.1":"3.1.0"}},":mootools":{versions:{":1.3.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.1.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.3.0":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.3.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.1.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.3":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.4":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.2.5":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.0":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.1":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"},":1.4.2":{uncompressed:"mootools.js",compressed:"mootools-yui-compressed.js"}},aliases:{":1":"1.1.2",":1.11":"1.1.1",":1.4":"1.4.2",":1.3":"1.3.2",":1.2":"1.2.5",":1.1":"1.1.2"}},":jqueryui":{versions:{":1.8.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.1":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.15":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.14":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.13":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.12":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.11":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.10":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.17":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.16":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.6.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.9":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.7":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.8":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.5":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.3":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.6":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.0":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.7.1":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.8.4":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.5.3":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"},":1.5.2":{uncompressed:"jquery-ui.js",compressed:"jquery-ui.min.js"}},aliases:{":1.8":"1.8.17",":1.7":"1.7.3",":1.6":"1.6.0",":1":"1.8.17",":1.5":"1.5.3",":1.8.3":"1.8.4"}},":chrome-frame":{versions:{":1.0.2":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"},":1.0.1":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"},":1.0.0":{uncompressed:"CFInstall.js",compressed:"CFInstall.min.js"}},aliases:{":1":"1.0.2",":1.0":"1.0.2"}},":dojo":{versions:{":1.3.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.3.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.6.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.1.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.3.2":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.6.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.2.3":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.7.2":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.7.0":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.7.1":{uncompressed:"dojo/dojo.js.uncompressed.js",compressed:"dojo/dojo.js"},":1.4.3":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.5.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.5.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.2.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.4.0":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"},":1.4.1":{uncompressed:"dojo/dojo.xd.js.uncompressed.js",compressed:"dojo/dojo.xd.js"}},aliases:{":1.7":"1.7.2",":1":"1.6.1",":1.6":"1.6.1",":1.5":"1.5.1",":1.4":"1.4.3",":1.3":"1.3.2",":1.2":"1.2.3",":1.1":"1.1.1"}},":prototype":{versions:{":1.7.0.0":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.6.0.2":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.6.1.0":{uncompressed:"prototype.js",compressed:"prototype.js"},":1.6.0.3":{uncompressed:"prototype.js",compressed:"prototype.js"}},aliases:{":1.7":"1.7.0.0",":1.6.1":"1.6.1.0",":1":"1.7.0.0",":1.6":"1.6.1.0",":1.7.0":"1.7.0.0",":1.6.0":"1.6.0.3"}},":jquery":{versions:{":1.6.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.3.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.3.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.4":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.3.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.6.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.2.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.7.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.7.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.2.6":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.3":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.4":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.0":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.5.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.1":{uncompressed:"jquery.js",compressed:"jquery.min.js"},":1.4.2":{uncompressed:"jquery.js",compressed:"jquery.min.js"}},aliases:{":1.7":"1.7.1",":1.6":"1.6.4",":1":"1.7.1",":1.5":"1.5.2",":1.4":"1.4.4",":1.3":"1.3.2",":1.2":"1.2.6"}}})),function(){}.call(this),$(function(){setNavLineWidths(),$(window).resize(setNavLineWidths)});var goHome=setPageFunc("home",510),goFeatures=setPageFunc("features",900),goAbout=setPageFunc("about",525),goSignin=setPageFunc("signin",510),homeOnLoad=function(e){startShow(),"features"===e?goFeatures():"about"===e?goAbout():"signin"===e?goSignin():goHome()
};$(document).ready(function(){$(".features").collapse(),$("#homelink").click(goHome),$("#featureslink").click(goFeatures),$("#aboutlink").click(goAbout),$("#signinlink").click(goSignin)}),function(){}.call(this),$(document).ready(function(){format_select_arrow()}),INIT_PROBLEM={},DESTROY_PROBLEM={},INIT_PROBLEM.fraction=centerFractionInts,INIT_PROBLEM.multi_text_field=bind_mt_buttons,INIT_PROBLEM.numberline=initNumberLine,function(e){"user strict";var t=function(t){this.$element=e(t),this.gap=10,this.box=void 0,this.read_elts(),e(t).css("height",this.height),e(t).css("width",this.width);var n=this.$element.offset();this.offsetx=Math.round(n.left)};t.prototype={read_elts:function(){this.elts=[];var t=0,i=0,o=this,s=0;this.$element.children("div").each(function(r){s=o.elts.push(new n(e(this),r,i)),t=Math.max(t,e(this).outerHeight()),i+=o.elts[s-1].width+o.gap,console.log(i+" "+o.elts[s-1])}),this.height=t,this.width=this.box_x(this.elts[s-1])+this.elts[s-1].width},write_order:function(){this.$element.children("input").attr("value",this.elts.join(","))},box_x:function(e){len=0;for(var t=0;t<e.i;t++)len+=this.elts[t].width+this.gap;return len},next_movable_elt:function(e,t){for(var n=e.i+t;n>=0&&n<this.elts.length;n+=t)if(!this.elts[n].fixed)return this.elts[n];return void 0},swap_elts:function(e,t){var n=e.i,i=t.i;t.set_i(n),e.set_i(i),this.elts[i]=e,this.elts[n]=t,t.slide_to(this.box_x(t));for(var o=i>n?1:-1,n=n+o;n!=i;n+=o)this.elts[n].slide_to(this.box_x(this.elts[n]));this.write_order()},mouse_is_down:function(){return void 0!=this.box},mousedown:function(e){for(var t=e.pageX-this.offsetx,n=this.elts.length-1;n>=0;n--)if(t>this.box_x(this.elts[n])){if(this.elts[n].fixed)return 0;this.box=this.elts[n],this.mouse_off=t-this.box_x(this.box);break}this.box.inc_z()},mouseup:function(){void 0!=this.box&&(this.box.slide_to(this.box_x(this.box)),this.box.dec_z(),console.log("z-index: "+this.box.$element.css("z-index")),this.box=void 0)},mousemove:function(e){if(this.mouse_is_down()){var t=e.pageX-this.offsetx-this.mouse_off,n=this.box,i=this.next_movable_elt(n,1),o=this.next_movable_elt(n,-1);if(void 0==i&&t>this.box_x(n)||void 0==o&&0>t)return n.set_l_off(this.box_x(n)),1;n.set_l_off(t);var s=t-this.box_x(n);if(s>0){var r=this.box_x(i)-n.width+i.width-t;s>r&&this.swap_elts(n,i)}else if(0>s){var r=t-this.box_x(o);-s>r&&this.swap_elts(n,o)}return 1}}};var n=function(e,t,n){this.$element=e,this.i=t,this.set_l_off(n),this.width=e.outerWidth(),this.fixed=this.$element.hasClass("fixed")};n.prototype={set_l_off:function(e){this.l_off=e,this.$element.css("left",e)},middle:function(){return this.l_off+Math.floor(this.width/2)},slide_to:function(e){this.$element.animate({left:e+"px"}),this.l_off=e},set_i:function(e){this.i=e},toString:function(){return this.$element.text()},inc_z:function(){var e=parseInt(this.$element.css("z-index"));this.$element.css("z-index",e+1)},dec_z:function(){var e=parseInt(this.$element.css("z-index"));this.$element.css("z-index",e-1)}},e.fn.permutationDrag=function(){return this.each(function(){var n=e(this),i=n.data("permutationDrag");i||n.data("permutationDrag",i=new t(this)),n.mousemove(function(e){i.mousemove(e)}),n.mousedown(function(e){i.mousedown(e)}),n.mouseup(function(e){i.mouseup(e)}),n.mouseleave(function(e){i.mouseup(e)})})}}(jQuery),INIT_PROBLEM.permutationDrag=function(){$(".permutationDrag").permutationDrag()},function(){}.call(this);/*
 wysihtml5 v0.3.0
 https://github.com/xing/wysihtml5

 Author: Christopher Blum (https://github.com/tiff)

 Copyright (C) 2012 XING AG
 Licensed under the MIT license (MIT)

 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2011, Tim Down
 Licensed under the MIT license.
 Version: 1.2.2
 Build date: 13 November 2011
*/
var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function e(e,t){var n=typeof e[t];return n==c||!(n!=l||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=l||!e[t])}function n(e,t){return typeof e[t]!=d}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function o(e){return e&&m(e,p)&&v(e,f)}function s(e){window.alert("Rangy not supported in your browser. Reason: "+e),y.initialized=!0,y.supported=!1}function r(){if(!y.initialized){var n,i=!1,r=!1;for(e(document,"createRange")&&(n=document.createRange(),m(n,h)&&v(n,u)&&(i=!0),n.detach()),(n=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(n,"createTextRange")&&(n=n.createTextRange(),o(n)&&(r=!0)),!i&&!r&&s("Neither Range nor TextRange are implemented"),y.initialized=!0,y.features={implementsDomRange:i,implementsTextRange:r},i=x.concat(b),r=0,n=i.length;n>r;++r)try{i[r](y)}catch(a){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",a)}}}function a(e){this.name=e,this.supported=this.initialized=!1}var l="object",c="function",d="undefined",u="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer START_TO_START START_TO_END END_TO_START END_TO_END".split(" "),h="setStart setStartBefore setStartAfter setEnd setEndBefore setEndAfter collapse selectNode selectNodeContents compareBoundaryPoints deleteContents extractContents cloneContents insertNode surroundContents cloneRange toString detach".split(" "),f="boundingHeight boundingLeft boundingTop boundingWidth htmlText text".split(" "),p="collapse compareEndPoints duplicate getBookmark moveToBookmark moveToElementText parentElement pasteHTML select setEndPoint getBoundingClientRect".split(" "),m=i(e),g=i(t),v=i(n),y={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:m,areHostObjects:g,areHostProperties:v,isTextRange:o},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};y.fail=s,y.warn=function(e){e="Rangy warning: "+e,y.config.alertOnWarn?window.alert(e):typeof window.console!=d&&typeof window.console.log!=d&&window.console.log(e)},{}.hasOwnProperty?y.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:s("hasOwnProperty not supported");var b=[],x=[];y.init=r,y.addInitListener=function(e){y.initialized?e(y):b.push(e)};var w=[];y.addCreateMissingNativeApiListener=function(e){w.push(e)},y.createMissingNativeApi=function(e){e=e||window,r();for(var t=0,n=w.length;n>t;++t)w[t](e)},a.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},a.prototype.warn=function(e){y.warn("Module "+this.name+": "+e)},a.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)},y.createModule=function(e,t){var n=new a(e);y.modules[e]=n,x.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},y.requireModules=function(e){for(var t,n,i=0,o=e.length;o>i;++i){if(n=e[i],t=y.modules[n],!(t&&t instanceof a))throw Error("Module '"+n+"' not found");if(!t.supported)throw Error("Module '"+n+"' not supported")}};var C=!1,g=function(){C||(C=!0,y.initialized||r())};if(typeof window==d)s("No window found");else{if(typeof document!=d)return e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",g,!1),e(window,"addEventListener")?window.addEventListener("load",g,!1):e(window,"attachEvent")?window.attachEvent("onload",g):s("Window does not have required addEventListener or attachEvent method"),y;s("No document found")}}(),rangy.createModule("DomUtil",function(e,t){function n(e){for(var t=0;e=e.previousSibling;)t++;return t}function i(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(m(i,n))return n;return null}function o(e,t,n){for(n=n?e:e.parentNode;n;){if(e=n.parentNode,e===t)return n;n=e}return null}function s(e){return e=e.nodeType,3==e||4==e||8==e}function r(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function a(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=h)return e.ownerDocument;if(typeof e.document!=h)return e.document;if(e.parentNode)return a(e.parentNode);throw Error("getDocument: no document found for node")}function l(e){return e?s(e)?'"'+e.data+'"':1==e.nodeType?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName:"[No node]"}function c(e){this._next=this.root=e}function d(e,t){this.node=e,this.offset=t}function u(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var h="undefined",f=e.util;f.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),f.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var p=document.createElement("div");f.areHostMethods(p,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),f.isHostProperty(p,"innerHTML")||t.fail("Element is missing innerHTML property"),p=document.createTextNode("test"),f.areHostMethods(p,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var m=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t=this._current=this._next;if(this._current){if(e=t.firstChild,!e)for(e=null;t!==this.root&&!(e=t.nextSibling);)t=t.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},d.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+l(this.node)+":"+this.offset+")]"}},u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},u.prototype.toString=function(){return this.message},e.dom={arrayContains:m,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==h||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){return e=e.parentNode,1==e.nodeType?e:null},getNodeIndex:n,getNodeLength:function(e){var t;return s(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:i,isAncestorOf:function(e,t,n){for(t=n?t:t.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},getClosestAncestorIn:o,isCharacterDataNode:s,insertAfter:r,splitDataNode:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),r(n,e),n},getDocument:a,getWindow:function(e){if(e=a(e),typeof e.defaultView!=h)return e.defaultView;if(typeof e.parentWindow!=h)return e.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if(typeof e.contentWindow!=h)return e.contentWindow;if(typeof e.contentDocument!=h)return e.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if(typeof e.contentDocument!=h)return e.contentDocument;if(typeof e.contentWindow!=h)return e.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return f.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,s,r){var a;if(e==s)return t===r?0:r>t?-1:1;if(a=o(s,e,!0))return t<=n(a)?-1:1;if(a=o(e,s,!0))return n(a)<r?-1:1;if(t=i(e,s),e=e===t?t:o(e,t,!0),s=s===t?t:o(s,t,!0),e===s)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(t=t.firstChild;t;){if(t===e)return-1;if(t===s)return 1;t=t.nextSibling}throw Error("Should not be here!")},inspectNode:l,fragmentFromNodeChildren:function(e){for(var t,n=a(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new c(e)},DomPosition:d},e.DOMException=u}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(A.isAncestorOf(e,t.startContainer,!0)||A.isAncestorOf(e,t.endContainer,!0))}function n(e){return A.getDocument(e.startContainer)}function i(e,t,n){if(t=e._listeners[t])for(var i=0,o=t.length;o>i;++i)t[i].call(e,{target:e,args:n})}function o(e){return new R(e.parentNode,A.getNodeIndex(e))}function s(e){return new R(e.parentNode,A.getNodeIndex(e)+1)}function r(e,t,n){var i=11==e.nodeType?e.firstChild:e;return A.isCharacterDataNode(t)?n==t.length?A.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:A.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function a(e){for(var t,i,o=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(t=e.getSubtreeIterator(),i.appendChild(a(t)),t.detach(!0)),10==i.nodeType)throw new P("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}function l(e,t,n){for(var i,o,n=n||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i)){n.stop=!0;break}if(i=e.getSubtreeIterator(),l(i,t,n),i.detach(!0),n.stop)break}else for(i=A.createIterator(i);o=i.next();)if(!1===t(o))return n.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function d(e){for(var t,i,o=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(d(i)),i.detach(!0)):e.remove(),10==t.nodeType)throw new P("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function u(e,t,n){var i,o=!(!t||!t.length),s=!!n;o&&(i=RegExp("^("+t.join("|")+")$"));var r=[];return l(new f(e,!1),function(e){(!o||i.test(e.nodeType))&&(!s||n(e))&&r.push(e)}),r}function h(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+A.inspectNode(e.startContainer)+":"+e.startOffset+", "+A.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&A.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||A.isCharacterDataNode(this.sc)?A.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||A.isCharacterDataNode(this.ec)?A.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=u(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.nodeType,A.arrayContains(e,i))return o;o=o.parentNode}return null}}function v(e,t){if(F(e,t))throw new p("INVALID_NODE_TYPE_ERR")}function y(e){if(!e.startContainer)throw new P("INVALID_STATE_ERR")}function b(e,t){if(!A.arrayContains(t,e.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function x(e,t){if(0>t||t>(A.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new P("INDEX_SIZE_ERR")}function w(e,t){if(q(e,!0)!==q(t,!0))throw new P("WRONG_DOCUMENT_ERR")}function C(e){if(z(e,!0))throw new P("NO_MODIFICATION_ALLOWED_ERR")}function T(e,t){if(!e)throw new P(t)}function _(e){if(y(e),!((A.arrayContains(L,e.startContainer.nodeType)||q(e.startContainer,!0))&&(A.arrayContains(L,e.endContainer.nodeType)||q(e.endContainer,!0))&&e.startOffset<=(A.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(A.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function k(){}function S(e){e.START_TO_START=Y,e.START_TO_END=G,e.END_TO_END=K,e.END_TO_START=Q,e.NODE_BEFORE=J,e.NODE_AFTER=Z,e.NODE_BEFORE_AND_AFTER=et,e.NODE_INSIDE=tt}function N(e){S(e),S(e.prototype)}function j(e,t){return function(){_(this);var n=this.startContainer,i=this.startOffset,o=this.commonAncestorContainer,r=new f(this,!0);return n!==o&&(n=A.getClosestAncestorIn(n,o,!0),i=s(n),n=i.node,i=i.offset),l(r,C),r.reset(),o=e(r),r.detach(),t(this,n,i,n,i),o}}function E(n,i,r){function a(e,t){return function(n){y(this),b(n,D),b(B(n),L),n=(e?o:s)(n),(t?l:u)(this,n.node,n.offset)}}function l(e,t,n){var o=e.endContainer,s=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((B(t)!=B(o)||1==A.comparePoints(t,n,o,s))&&(o=t,s=n),i(e,t,n,o,s))}function u(e,t,n){var o=e.startContainer,s=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((B(t)!=B(o)||-1==A.comparePoints(t,n,o,s))&&(o=t,s=n),i(e,o,s,t,n))}n.prototype=new k,e.util.extend(n.prototype,{setStart:function(e,t){y(this),v(e,!0),x(e,t),l(this,e,t)},setEnd:function(e,t){y(this),v(e,!0),x(e,t),u(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){_(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){y(this),v(e,!0),i(this,e,0,e,A.getNodeLength(e))},selectNode:function(e){y(this),v(e,!1),b(e,D);var t=o(e),e=s(e);i(this,t.node,t.offset,e.node,e.offset)},extractContents:j(d,i),deleteContents:j(c,i),canSurroundContents:function(){_(this),C(this.startContainer),C(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){r(this)},splitBoundaries:function(){_(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,o=this.endOffset,s=e===n;A.isCharacterDataNode(n)&&o>0&&o<n.length&&A.splitDataNode(n,o),A.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=A.splitDataNode(e,t),s?(o-=t,n=e):n==e.parentNode&&o>=A.getNodeIndex(e)&&o++,t=0),i(this,e,t,n,o)},normalizeBoundaries:function(){_(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,o=this.endOffset,s=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,o=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},r=function(i){var s=i.previousSibling;if(s&&s.nodeType==i.nodeType){e=i;var r=i.length;t=s.length,i.insertData(0,s.data),s.parentNode.removeChild(s),e==n?(o+=t,n=e):n==i.parentNode&&(s=A.getNodeIndex(i),o==s?(n=i,o=r):o>s&&o--)}},a=!0;A.isCharacterDataNode(n)?n.length==o&&s(n):(o>0&&(a=n.childNodes[o-1])&&A.isCharacterDataNode(a)&&s(a),a=!this.collapsed),a?A.isCharacterDataNode(e)?0==t&&r(e):t<e.childNodes.length&&(s=e.childNodes[t])&&A.isCharacterDataNode(s)&&r(s):(e=n,t=o),i(this,e,t,n,o)},collapseToPoint:function(e,t){y(this),v(e,!0),x(e,t),(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)&&i(this,e,t,e,t)}}),N(n)}function M(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:A.getCommonAncestor(e.startContainer,e.endContainer)}function $(e,t,n,o,s){var r=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==o||e.endOffset!==s;e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=s,M(e),i(e,"boundarychange",{startMoved:r,endMoved:a})}function I(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},M(this)}e.requireModules(["DomUtil"]);var A=e.dom,R=A.DomPosition,P=e.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,A.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!A.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new I(n(this.range));var t=this._current,i=t,o=0,s=t,r=A.getNodeLength(t);A.isAncestorOf(t,this.sc,!0)&&(i=this.sc,o=this.so),A.isAncestorOf(t,this.ec,!0)&&(s=this.ec,r=this.eo),$(e,i,o,s,r)}return new f(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var D=[1,3,4,5,7,8,10],L=[2,9,11],O=[1,3,4,5,7,8,10,11],H=[1,3,4,5,7,8],B=A.getRootContainer,q=g([9,11]),z=g([5,6,10,12]),F=g([6,10,12]),W=document.createElement("style"),V=!1;try{W.innerHTML="<b>x</b>",V=3==W.firstChild.nodeType}catch(X){}e.features.htmlParsingConforms=V;var U="startContainer startOffset endContainer endOffset collapsed commonAncestorContainer".split(" "),Y=0,G=1,K=2,Q=3,J=0,Z=1,et=2,tt=3;k.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){_(this),w(this.startContainer,t.startContainer);var n=e==Q||e==Y?"start":"end",i=e==G||e==Y?"start":"end";return A.comparePoints(this[n+"Container"],this[n+"Offset"],t[i+"Container"],t[i+"Offset"])},insertNode:function(e){if(_(this),b(e,O),C(this.startContainer),A.isAncestorOf(e,this.startContainer,!0))throw new P("HIERARCHY_REQUEST_ERR");this.setStartBefore(r(e,this.startContainer,this.startOffset))},cloneContents:function(){_(this);var e,t;return this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&A.isCharacterDataNode(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(t=new f(this,!0),e=a(t),t.detach(),e)},canSurroundContents:function(){_(this),C(this.startContainer),C(this.endContainer);var e=new f(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,H),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){_(this);for(var e,t=new I(n(this)),i=U.length;i--;)e=U[i],t[e]=this[e];return t},toString:function(){_(this);var e=this.startContainer;if(e===this.endContainer&&A.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],e=new f(this,!0);return l(e,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),e.detach(),t.join("")},compareNode:function(e){_(this);var t=e.parentNode,n=A.getNodeIndex(e);if(!t)throw new P("NOT_FOUND_ERR");return e=this.comparePoint(t,n),t=this.comparePoint(t,n+1),0>e?t>0?et:J:t>0?Z:tt},comparePoint:function(e,t){return _(this),T(e,"HIERARCHY_REQUEST_ERR"),w(e,this.startContainer),0>A.comparePoints(e,t,this.startContainer,this.startOffset)?-1:0<A.comparePoints(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:V?function(e){var t=this.startContainer,n=A.getDocument(t);if(!t)throw new P("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:A.isCharacterDataNode(t)&&(i=A.parentElement(t)),i=null===i||"HTML"==i.nodeName&&A.isHtmlNamespace(A.getDocument(i).documentElement)&&A.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=e,A.fragmentFromNodeChildren(i)}:function(e){y(this);var t=n(this).createElement("body");return t.innerHTML=e,A.fragmentFromNodeChildren(t)},toHtml:function(){_(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(_(this),T(e,"NOT_FOUND_ERR"),A.getDocument(e)!==n(this))return!1;var i=e.parentNode,o=A.getNodeIndex(e);T(i,"NOT_FOUND_ERR");var s=A.comparePoints(i,o,this.endContainer,this.endOffset),i=A.comparePoints(i,o+1,this.startContainer,this.startOffset);return t?0>=s&&i>=0:0>s&&i>0},isPointInRange:function(e,t){return _(this),T(e,"HIERARCHY_REQUEST_ERR"),w(e,this.startContainer),0<=A.comparePoints(e,t,this.startContainer,this.startOffset)&&0>=A.comparePoints(e,t,this.endContainer,this.endOffset)},intersectsRange:function(e,t){if(_(this),n(e)!=n(this))throw new P("WRONG_DOCUMENT_ERR");var i=A.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),o=A.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=i&&o>=0:0>i&&o>0},intersection:function(e){if(this.intersectsRange(e)){var t=A.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=A.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==A.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==A.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new p("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==tt},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&0>=this.comparePoint(e,A.getNodeLength(e))},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);return 0<n.length?(t.setStart(n[0],0),e=n.pop(),t.setEnd(e,e.length),e=this.containsRange(t),t.detach(),e):this.containsNodeContents(e)},createNodeIterator:function(e,t){return _(this),new m(this,e,t)},getNodes:function(e,t){return _(this),u(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){y(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){y(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return I.rangesEqual(this,e)},inspect:function(){return h(this)}},E(I,$,function(e){y(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,i(e,"detach",null),e._listeners=null}),e.rangePrototype=k.prototype,I.rangeProperties=U,I.RangeIterator=f,I.copyComparisonConstants=N,I.createPrototypeRange=E,I.inspect=h,I.getRangeDocument=n,I.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=I,e.RangeException=p}),rangy.createModule("WrappedRange",function(e){function t(e,t,n,i){var r=e.duplicate();r.collapse(n);var a=r.parentElement();if(o.isAncestorOf(t,a,!0)||(a=t),!a.canHaveHTML)return new s(a.parentNode,o.getNodeIndex(a));var l,t=o.getDocument(a).createElement("span"),c=n?"StartToStart":"StartToEnd";do a.insertBefore(t,t.previousSibling),r.moveToElementText(t);while(0<(l=r.compareEndPoints(c,e))&&t.previousSibling);if(c=t.nextSibling,-1==l&&c&&o.isCharacterDataNode(c)){if(r.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(c.data))for(a=r.duplicate(),n=a.text.replace(/\r\n/g,"\r").length,n=a.moveStart("character",n);-1==a.compareEndPoints("StartToEnd",a);)n++,a.moveStart("character",1);else n=r.text.length;a=new s(c,n)}else c=(i||!n)&&t.previousSibling,a=(n=(i||n)&&t.nextSibling)&&o.isCharacterDataNode(n)?new s(n,0):c&&o.isCharacterDataNode(c)?new s(c,c.length):new s(a,o.getNodeIndex(t));return t.parentNode.removeChild(t),a}function n(e,t){var n,i,s=e.offset,r=o.getDocument(e.node),a=r.body.createTextRange(),l=o.isCharacterDataNode(e.node);return l?(n=e.node,i=n.parentNode):(n=e.node.childNodes,n=s<n.length?n[s]:null,i=e.node),r=r.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),a.moveToElementText(r),a.collapse(!t),i.removeChild(r),l&&a[t?"moveStart":"moveEnd"]("character",s),a}e.requireModules(["DomUtil","DomRange"]);var i,o=e.dom,s=o.DomPosition,r=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){i=function(e){this.textRange=e,this.refresh()},i.prototype=new r(document),i.prototype.refresh=function(){var e,n,i=this.textRange;e=i.parentElement();var s=i.duplicate();s.collapse(!0),n=s.parentElement(),s=i.duplicate(),s.collapse(!1),i=s.parentElement(),n=n==i?n:o.getCommonAncestor(n,i),n=n==e?n:o.getCommonAncestor(e,n),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?n=e=t(this.textRange,n,!0,!0):(e=t(this.textRange,n,!0,!1),n=t(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(n.node,n.offset)},r.copyComparisonConstants(i);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=i),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else(function(){function t(e){for(var t,n=a.length;n--;)t=a[n],e[t]=e.nativeRange[t]}var n,s,a=r.rangeProperties;i=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e,t(this)},r.createPrototypeRange(i,function(e,t,n,i,o){var s=e.endContainer!==i||e.endOffset!=o;(e.startContainer!==t||e.startOffset!=n||s)&&(e.setEnd(i,o),e.setStart(t,n))},function(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=a.length;n--;)t=a[n],e[t]=null}),n=i.prototype,n.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},n.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},n.collapse=function(e){this.nativeRange.collapse(e),t(this)},n.cloneRange=function(){return new i(this.nativeRange.cloneRange())},n.refresh=function(){t(this)},n.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");o.getBody(document).appendChild(l);var c=document.createRange();c.setStart(l,0),c.setEnd(l,0);try{c.setStart(l,1),n.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},n.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},s=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(d){n.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(i){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},n.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(i){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},s=function(e,n){return function(i){try{this.nativeRange[e](i)}catch(o){this.nativeRange[n](i),this.nativeRange[e](i)}t(this)}}}n.setStartBefore=s("setStartBefore","setEndBefore"),n.setStartAfter=s("setStartAfter","setEndAfter"),n.setEndBefore=s("setEndBefore","setStartBefore"),n.setEndAfter=s("setEndAfter","setStartAfter"),c.selectNodeContents(l),n.selectNodeContents=c.startContainer==l&&c.endContainer==l&&0==c.startOffset&&c.endOffset==l.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,r.getEndOffset(e))},c.selectNodeContents(l),c.setEnd(l,3),s=document.createRange(),s.selectNodeContents(l),s.setEnd(l,4),s.setStart(l,2),n.compareBoundaryPoints=-1==c.compareBoundaryPoints(c.START_TO_END,s)&1==c.compareBoundaryPoints(c.END_TO_START,s)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(c,"createContextualFragment")&&(n.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),o.getBody(document).removeChild(l),c.detach(),s.detach()})(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(i.rangeToTextRange=function(e){if(e.collapsed)return n(new s(e.startContainer,e.startOffset),!0);var t=n(new s(e.startContainer,e.startOffset),!0),i=n(new s(e.endContainer,e.endOffset),!1),e=o.getDocument(e.startContainer).body.createTextRange();return e.setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",i),e}),i.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=i,e.createRange=function(t){return t=t||document,new i(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new r(e)},e.createIframeRange=function(t){return e.createRange(o.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(o.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){t=t.document,"undefined"==typeof t.createRange&&(t.createRange=function(){return e.createRange(this)}),t=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function i(e){return(e||window).document.selection}function o(e,t,n){var i=n?"end":"start",n=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function r(t){var n;return t instanceof b?(n=t._selectionNativeRange,n||(n=e.createNativeRange(v.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof x?n=t.nativeRange:e.features.implementsDomRange&&t instanceof v.getWindow(t.startContainer).Range&&(n=t),n}function a(e){var t,n=e.getNodes();e:if(n.length&&1==n[0].nodeType){t=1;for(var i=n.length;i>t;++t)if(!v.isAncestorOf(n[0],n[t])){t=!1;break e}t=!0}else t=!1;if(!t)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function l(e,t){var n=new x(t);e._ranges=[n],o(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function c(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var n=t.docSelection.createRange();if(n&&"undefined"!=typeof n.text)l(t,n);else{t.rangeCount=n.length;for(var i,r=v.getDocument(n.item(0)),a=0;a<t.rangeCount;++a)i=e.createRange(r),i.selectNode(n.item(a)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,o(t,t._ranges[t.rangeCount-1],!1)}}}function d(e,t){for(var n=e.docSelection.createRange(),i=a(t),o=v.getDocument(n.item(0)),o=v.getBody(o).createControlRange(),s=0,r=n.length;r>s;++s)o.add(n.item(s));try{o.add(i)}catch(l){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),c(e)}function u(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function h(e,t){for(var n,i=v.getDocument(t[0].startContainer),i=v.getBody(i).createControlRange(),o=0;rangeCount>o;++o){n=a(t[o]);try{i.add(n)}catch(s){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),c(e)}function f(e,t){if(e.anchorNode&&v.getDocument(e.anchorNode)!==v.getDocument(t))throw new w("WRONG_DOCUMENT_ERR")}function p(e){var t=[],n=new C(e.anchorNode,e.anchorOffset),i=new C(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var s=0,r=e.rangeCount;r>s;++s)t[s]=b.inspect(e.getRangeAt(s));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var m,g,v=e.dom,y=e.util,b=e.DomRange,x=e.WrappedRange,w=e.DOMException,C=v.DomPosition,T=e.util.isHostMethod(window,"getSelection"),_=e.util.isHostObject(document,"selection"),k=_&&(!T||e.config.preferTextRange);
k?(m=i,e.isSelectionValid=function(e){var e=(e||window).document,t=e.selection;return"None"!=t.type||v.getDocument(t.createRange().parentElement())==e}):T?(m=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=m;var T=m(),S=e.createNativeRange(document),N=v.getBody(document),j=y.areHostObjects(T,y.areHostProperties(T,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=j;var E=y.isHostMethod(T,"extend");e.features.selectionHasExtend=E;var M="number"==typeof T.rangeCount;e.features.selectionHasRangeCount=M;var $=!1,I=!0;y.areHostMethods(T,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof T.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");N.appendChild(e);var t=v.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=v.getIframeWindow(e).getSelection(),i=t.documentElement.lastChild.firstChild,t=t.createRange();t.setStart(i,1),t.collapse(!0),n.addRange(t),I=1==n.rangeCount,n.removeAllRanges();var o=t.cloneRange();t.setStart(i,0),o.setEnd(i,2),n.addRange(t),n.addRange(o),$=2==n.rangeCount,t.detach(),o.detach(),N.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=$,e.features.collapsedNonEditableSelectionsSupported=I;var A,R=!1;N&&y.isHostMethod(N,"createControlRange")&&(A=N.createControlRange(),y.areHostProperties(A,["item","add"])&&(R=!0)),e.features.implementsControlRange=R,g=j?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var P;if(y.isHostMethod(T,"getRangeAt")?P=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:j&&(P=function(t){var n=v.getDocument(t.anchorNode),n=e.createRange(n);return n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(t.focusNode,t.focusOffset),n.setEnd(t.anchorNode,t.anchorOffset)),n}),e.getSelection=function(e){var e=e||window,t=e._rangySelection,n=m(e),o=_?i(e):null;return t?(t.nativeSelection=n,t.docSelection=o,t.refresh(e)):(t=new u(n,o,e),e._rangySelection=t),t},e.getIframeSelection=function(t){return e.getSelection(v.getIframeWindow(t))},A=u.prototype,!k&&j&&y.areHostMethods(T,["removeAllRanges","addRange"])){A.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var D=function(t,n){var i=b.getRangeDocument(n),i=e.createRange(i);i.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(r(i)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};A.addRange=M?function(t,n){if(R&&_&&"Control"==this.docSelection.type)d(this,t);else if(n&&E)D(this,t);else{var i;$?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(r(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1?(e.config.checkSelectionRanges&&(i=P(this.nativeSelection,this.rangeCount-1))&&!b.rangesEqual(i,t)&&(t=new x(i)),this._ranges[this.rangeCount-1]=t,o(this,t,H(this.nativeSelection)),this.isCollapsed=g(this)):this.refresh()}}:function(e,t){t&&E?D(this,e):(this.nativeSelection.addRange(r(e)),this.refresh())},A.setRanges=function(e){if(R&&e.length>1)h(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(y.isHostMethod(T,"empty")&&y.isHostMethod(S,"select")&&R&&k))return t.fail("No means of selecting a Range or TextRange was found"),!1;A.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=v.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=v.getDocument(t.item(0)).body.createTextRange())}e&&(e.body.createTextRange().select(),this.docSelection.empty())}}catch(n){}s(this)},A.addRange=function(e){"Control"==this.docSelection.type?d(this,e):(x.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,e,!1))},A.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?h(this,e):t&&this.addRange(e[0])}}A.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new w("INDEX_SIZE_ERR");return this._ranges[e]};var L;if(k)L=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=v.getBody(t.win.document).createTextRange(),n.collapse(!0)),"Control"==t.docSelection.type?c(t):n&&"undefined"!=typeof n.text?l(t,n):s(t)};else if(y.isHostMethod(T,"getRangeAt")&&"number"==typeof T.rangeCount)L=function(t){if(R&&_&&"Control"==t.docSelection.type)c(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));o(t,t._ranges[t.rangeCount-1],H(t.nativeSelection)),t.isCollapsed=g(t)}else s(t)};else{if(!j||"boolean"!=typeof T.isCollapsed||"boolean"!=typeof S.collapsed||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;L=function(e){var t;t=e.nativeSelection,t.anchorNode?(t=P(t,0),e._ranges=[t],e.rangeCount=1,t=e.nativeSelection,e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset,e.isCollapsed=g(e)):s(e)}}A.refresh=function(e){var t=e?this._ranges.slice(0):null;if(L(this),e){if(e=t.length,e!=this._ranges.length)return!1;for(;e--;)if(!b.rangesEqual(t[e],this._ranges[e]))return!1;return!0}};var O=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var o=0,r=n.length;r>o;++o)i||t!==n[o]?e.addRange(n[o]):i=!0;e.rangeCount||s(e)};A.removeRange=R?function(e){if("Control"==this.docSelection.type){for(var t,n=this.docSelection.createRange(),e=a(e),i=v.getDocument(n.item(0)),i=v.getBody(i).createControlRange(),o=!1,s=0,r=n.length;r>s;++s)t=n.item(s),t!==e||o?i.add(n.item(s)):o=!0;i.select(),c(this)}else O(this,e)}:function(e){O(this,e)};var H;!k&&j&&e.features.implementsDomRange?(H=function(e){var t=!1;return e.anchorNode&&(t=1==v.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},A.isBackwards=function(){return H(this)}):H=A.isBackwards=function(){return!1},A.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},A.collapse=function(t,n){f(this,t);var i=e.createRange(v.getDocument(t));i.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},A.collapseToStart=function(){if(!this.rangeCount)throw new w("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},A.collapseToEnd=function(){if(!this.rangeCount)throw new w("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},A.selectAllChildren=function(t){f(this,t);var n=e.createRange(v.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},A.deleteFromDocument=function(){if(R&&_&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){t=this.getAllRanges(),this.removeAllRanges(),e=0;for(var n=t.length;n>e;++e)t[e].deleteContents();this.addRange(t[n-1])}},A.getAllRanges=function(){return this._ranges.slice(0)},A.setSingleRange=function(e){this.setRanges([e])},A.containsNode=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},A.toHtml=function(){var e="";if(this.rangeCount){for(var e=b.getRangeDocument(this._ranges[0]).createElement("div"),t=0,n=this._ranges.length;n>t;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e},A.getName=function(){return"WrappedSelection"},A.inspect=function(){return p(this)},A.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},u.inspect=p,e.Selection=u,e.selectionPrototype=A,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})});var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var o=i.constructor,s=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==s)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return s.ancestor=this,s.extend=this.extend,s.forEach=this.forEach,s.implement=this.implement,s.prototype=i,s.toString=this.toString,s.valueOf=function(e){return"object"==e?s:o.valueOf()},n.call(s,t),"function"==typeof s.init&&s.init(),s},Base.prototype={extend:function(e,t){if(1<arguments.length){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf(),t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t};t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var o=Base.prototype.extend;!Base._prototyping&&"function"!=typeof this&&(o=this.extend||o);for(var s={toSource:null},r=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=r[a++];)e[l]!=s[l]&&o.call(this,l,e[l]);for(var l in e)s[l]||o.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(e){this.extend(e)}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return""+this.valueOf()}}),wysihtml5.browser=function(){var e=navigator.userAgent,t=document.createElement("div"),n=-1!==e.indexOf("MSIE")&&-1===e.indexOf("Opera"),i=-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),o=-1!==e.indexOf("AppleWebKit/"),s=-1!==e.indexOf("Chrome/"),r=-1!==e.indexOf("Opera/");return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),n="contentEditable"in t,i=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,e=this.isIos()&&5>(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return n&&i&&o&&!e},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!i},hasCurrentStyleProperty:function(){return"currentStyle"in t},insertsLineBreaksOnReturn:function(){return i},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){var n;return(n="on"+e in t)||(t.setAttribute("on"+e,"return;"),n="function"==typeof t["on"+e]),n},supportsEventsInIframeCorrectly:function(){return!r},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return o||i},supportsDataTransfer:function(){try{return o&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){return e=e.createElement("div"),e.innerHTML="<article>foo</article>","<article>foo</article>"===e.innerHTML.toLowerCase()},supportsCommand:function(){var e={formatBlock:n,insertUnorderedList:n||r||o,insertOrderedList:n||r||o},t={insertHTML:i};return function(n,i){if(!e[i]){try{return n.queryCommandSupported(i)}catch(o){}try{return n.queryCommandEnabled(i)}catch(s){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return i||r||o},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return i||n||r},clearsListsInContentEditableCorrectly:function(){return i||n||o},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var e,n=t.cloneNode(!1);return n.innerHTML="<p><div></div>",n=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===n||"<p><div></div></p>"===n,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==(""+document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in t},needsSpaceAfterLineBreak:function(){return r},supportsSpeechApiOn:function(t){return 11<=(e.match(/Chrome\/(\d+)/)||[,0])[1]&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(e){return n&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return i||s||r}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf)return-1!==e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return!0;return!1},without:function(t){for(var t=wysihtml5.lang.array(t),n=[],i=0,o=e.length;o>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,o=0;if(e){for(n=this.events[e]||[],i=[];o<n.length;o++)n[o]!==t&&t&&i.push(n[o]);this.events[e]=i}else this.events={};return this}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){return n=""+n,{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}}(),function(e){function t(e){return e.replace(o,function(e,t){var n=(t.match(s)||[])[1]||"",i=a[n],t=t.replace(s,"");t.split(i).length>t.split(n).length&&(t+=n,n="");var o=i=t;return t.length>r&&(o=o.substr(0,r)+"..."),"www."===i.substr(0,4)&&(i="http://"+i),'<a href="'+i+'">'+o+"</a>"+n})}function n(s){if(!i.contains(s.nodeName)){if(s.nodeType!==e.TEXT_NODE||!s.data.match(o)){for(a=e.lang.array(s.childNodes).get(),r=a.length,l=0;r>l;l++)n(a[l]);return s}var r,a=s.parentNode;r=a.ownerDocument;var l=r._wysihtml5_tempElement;for(l||(l=r._wysihtml5_tempElement=r.createElement("div")),r=l,r.innerHTML="<span></span>"+t(s.data),r.removeChild(r.firstChild);r.firstChild;)a.insertBefore(r.firstChild,s);a.removeChild(s)}}var i=e.lang.array("CODE PRE A SCRIPT HEAD TITLE STYLE".split(" ")),o=/((https?:\/\/|www\.)[^\s<]{3,})/gi,s=/([^\w\/\-](,?))$/i,r=100,a={")":"(","]":"[","}":"{"};e.dom.autoLink=function(e){var t;e:{t=e;for(var o;t.parentNode;){if(t=t.parentNode,o=t.nodeName,i.contains(o)){t=!0;break e}if("body"===o)break}t=!1}return t?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),n(e))},e.dom.autoLink.URL_REG_EXP=o}(wysihtml5),function(e){var t=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,i){return t?e.classList.add(i):(n.hasClass(e,i)||(e.className+=" "+i),void 0)},n.removeClass=function(e,n){return t?e.classList.remove(n):(e.className=e.className.replace(RegExp("(^|\\s+)"+n+"(\\s+|$)")," "),void 0)},n.hasClass=function(e,n){if(t)return e.classList.contains(n);var i=e.className;return 0<i.length&&(i==n||RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}return function(t,n){if("UL"===t.nodeName||"OL"===t.nodeName||"MENU"===t.nodeName)return t;var i,o,s,r,a,l=t.ownerDocument,c=l.createElement(n),d=t.querySelectorAll("br"),u=d.length;for(a=0;u>a;a++)for(i=d[a];(o=i.parentNode)&&o!==t&&o.lastChild===i;){if("block"===wysihtml5.dom.getStyle("display").from(o)){o.removeChild(i);break}wysihtml5.dom.insert(i).after(i.parentNode)}for(d=wysihtml5.lang.array(t.childNodes).get(),u=d.length,a=0;u>a;a++)r=r||e(l,c),i=d[a],o="block"===wysihtml5.dom.getStyle("display").from(i),s="BR"===i.nodeName,o?(r=r.firstChild?e(l,c):r,r.appendChild(i),r=null):s?r=r.firstChild?null:r:r.appendChild(i);return t.parentNode.replaceChild(c,t),c}}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,o=0,s=e.length;s>o;o++)i=e[o],"undefined"!=typeof t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(n){var i;e:for(var o=0,s=t.length;s>o;o++)if("border-box"===e.getStyle(t[o]).from(n)){i=t[o];break e}return i?parseInt(e.getStyle("width").from(n),10)<n.offsetWidth:!1};e.copyStyles=function(i){return{from:function(o){n(o)&&(i=wysihtml5.lang.array(i).without(t));for(var s,r="",a=i.length,l=0;a>l;l++)s=i[l],r+=s+":"+e.getStyle(s).from(o)+";";return{to:function(t){return e.setStyles(r).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,o){return e.dom.observe(t,i,function(i){for(var s=i.target,r=e.lang.array(t.querySelectorAll(n));s&&s!==t;){if(r.contains(s)){o.call(s,i);break}s=s.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e="abbr article aside audio bdi canvas command datalist details figcaption figure footer header hgroup keygen mark meter nav output progress rp rt ruby svg section source summary time track video wbr".split(" ");return function(t,n){var i,n=n||document;if("object"==typeof t&&t.nodeType)i=n.createElement("div"),i.appendChild(t);else if(wysihtml5.browser.supportsHTML5Tags(n))i=n.createElement("div"),i.innerHTML=t;else{if(i=n,!i._wysihtml5_supportsHTML5Tags){for(var o=0,s=e.length;s>o;o++)i.createElement(e[o]);i._wysihtml5_supportsHTML5Tags=!0}i=n,o=i.createElement("div"),o.style.display="none",i.body.appendChild(o);try{o.innerHTML=t}catch(r){}i.body.removeChild(o),i=o}return i}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return t&&t.length?"string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e):!0}return function(t,n,i){if(i=i||50,n.className||n.classRegExp){e:{for(var o=n.nodeName,s=n.className,n=n.classRegExp;i--&&t&&"BODY"!==t.nodeName;){var r;if((r=t.nodeType===wysihtml5.ELEMENT_NODE)&&(r=e(t.nodeName,o))){r=s;var a=(t.className||"").match(n)||[];r=r?a[a.length-1]===r:!!a.length}if(r)break e;t=t.parentNode}t=null}return t}e:{for(o=n.nodeName,s=i;s--&&t&&"BODY"!==t.nodeName;){if(e(t.nodeName,o))break e;t=t.parentNode}t=null}return t}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var o=i.ownerDocument,s=t[n]||e(n),r=i.style,a=i.currentStyle,l=r[s];if(l)return l;if(a)try{return a[s]}catch(c){}var d,s=o.defaultView||o.parentWindow,o=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;if(s.getComputedStyle)return o&&(d=r.overflow,r.overflow="hidden"),i=s.getComputedStyle(i,null).getPropertyValue(n),o&&(r.overflow=d||""),i}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){var e={},t=1;return function(n,i){var o=(n._wysihtml5_identifier||(n._wysihtml5_identifier=t++))+":"+i,s=e[o];return s||(s=e[o]=n.getElementsByTagName(i)),0<s.length}}(),function(e){var t={},n=1;e.dom.hasElementWithClassName=function(i,o){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+o);var s=(i._wysihtml5_identifier||(i._wysihtml5_identifier=n++))+":"+o,r=t[s];return r||(r=t[s]=i.getElementsByClassName(o)),0<r.length}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(e,t,n){for(var i,o,t="string"==typeof t?[t]:t,s=0,r=t.length;r>s;s++)o=t[s],e.addEventListener?e.addEventListener(o,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+o,i));return{stop:function(){for(var o,s=0,r=t.length;r>s;s++)o=t[s],e.removeEventListener?e.removeEventListener(o,n,!1):e.detachEvent("on"+o,i)}}},wysihtml5.dom.parse=function(){function e(t,o){var s,r=t.childNodes,a=r.length;s=n[t.nodeType];var l=0;if(s=s&&s(t),!s)return null;for(l=0;a>l;l++)(newChild=e(r[l],o))&&s.appendChild(newChild);return o&&1>=s.childNodes.length&&s.nodeName.toLowerCase()===i&&!s.attributes.length?s.firstChild:s}function t(e,t){var n,t=t.toLowerCase();if((n="IMG"==e.nodeName)&&(n="src"==t)){var i;try{i=e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(o){e.complete&&"complete"===e.readyState&&(i=!0)}n=!0===i}return n?e.src:a&&"outerHTML"in e?-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null:e.getAttribute(t)}var n={1:function(e){var n,s,a=r.tags;if(s=e.nodeName.toLowerCase(),n=e.scopeName,e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(n&&"HTML"!=n&&(s=n+":"+s),"outerHTML"in e&&!wysihtml5.browser.autoClosesUnclosedTags()&&"P"===e.nodeName&&"</p>"!==e.outerHTML.slice(-4).toLowerCase()&&(s="div"),s in a){if(n=a[s],!n||n.remove)return null;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:i}}s=e.ownerDocument.createElement(n.rename_tag||s);var a={},d=n.set_class,u=n.add_class,h=n.set_attributes,f=n.check_attributes,p=r.classes,m=0,g=[];n=[];var v,y=[],b=[];if(h&&(a=wysihtml5.lang.object(h).clone()),f)for(v in f)(h=l[f[v]])&&(h=h(t(e,v)),"string"==typeof h&&(a[v]=h));if(d&&g.push(d),u)for(v in u)(h=c[u[v]])&&(d=h(t(e,v)),"string"==typeof d&&g.push(d));for(p["_wysihtml5-temp-placeholder"]=1,(b=e.getAttribute("class"))&&(g=g.concat(b.split(o))),u=g.length;u>m;m++)e=g[m],p[e]&&n.push(e);for(p=n.length;p--;)e=n[p],wysihtml5.lang.array(y).contains(e)||y.unshift(e);y.length&&(a["class"]=y.join(" "));for(v in a)try{s.setAttribute(v,a[v])}catch(x){}return a.src&&("undefined"!=typeof a.width&&s.setAttribute("width",a.width),"undefined"!=typeof a.height&&s.setAttribute("height",a.height)),s},3:function(e){return e.ownerDocument.createTextNode(e.data)}},i="span",o=/\s+/,s={tags:{},classes:{}},r={},a=!wysihtml5.browser.supportsGetAttributeCorrectly(),l={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return(t=(t||"").replace(e,""))||null}}()},c={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[(""+t).toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[(""+t).toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[(""+t).toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[(""+t).charAt(0)]}}()};return function(t,n,i,o){wysihtml5.lang.object(r).merge(s).merge(n).get();for(var i=i||t.ownerDocument||document,n=i.createDocumentFragment(),a="string"==typeof t,t=a?wysihtml5.dom.getAsDom(t,i):t;t.firstChild;)i=t.firstChild,t.removeChild(i),(i=e(i,o))&&n.appendChild(i);return t.innerHTML="",t.appendChild(n),a?wysihtml5.quirks.getCorrectInnerHTML(t):t}}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t=wysihtml5.lang.array(e.childNodes).get(),n=t.length,i=0;n>i;i++)e=t[i],e.nodeType===wysihtml5.TEXT_NODE&&""===e.data&&e.parentNode.removeChild(e)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode)if(e.firstChild){for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}else e.parentNode.removeChild(e)},function(e){function t(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}e.resolveList=function(n){if("MENU"===n.nodeName||"UL"===n.nodeName||"OL"===n.nodeName){var i,o,s,r=n.ownerDocument.createDocumentFragment(),a=n.previousElementSibling||n.previousSibling;for(a&&"block"!==e.getStyle("display").from(a)&&t(r);s=n.firstChild;){for(i=s.lastChild;a=s.firstChild;)o=(o=a===i)&&"block"!==e.getStyle("display").from(a)&&"BR"!==a.nodeName,r.appendChild(a),o&&t(r);s.parentNode.removeChild(s)}n.parentNode.replaceChild(r,n)}}}(wysihtml5.dom),function(e){var t=document,n="parent top opener frameElement frames localStorage globalStorage sessionStorage indexedDB".split(" "),i="open close openDialog showModalDialog alert confirm prompt openDatabase postMessage XMLHttpRequest XDomainRequest".split(" "),o=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(s){if(e.dom.contains(t.documentElement,s)){var r=this,a=s.contentWindow,l=s.contentWindow.document,c=this._getHtml({charset:t.characterSet||t.charset||"utf-8",stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return s.contentWindow},this.getDocument=function(){return s.contentWindow.document},a.onerror=function(e,t,n){throw Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){var d,c=0;for(d=n.length;d>c;c++)this._unset(a,n[c]);for(c=0,d=i.length;d>c;c++)this._unset(a,i[c],e.EMPTY_FUNCTION);for(c=0,d=o.length;d>c;c++)this._unset(l,o[c]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){r.callback(r)},0)}},_getHtml:function(t){var n,i=t.stylesheets,o="",s=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>s;s++)o+='<link rel="stylesheet" href="'+i[s]+'">';return t.stylesheets=o,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,o){try{t[n]=i}catch(s){}try{t.__defineGetter__(n,function(){return i})}catch(r){}if(o)try{t.__defineSetter__(n,function(){})}catch(a){}if(!e.browser.crashesWhenDefineProperty(n))try{var l={get:function(){return i}};o&&(l.set=function(){}),Object.defineProperty(t,n,l)}catch(c){}}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){if(t=t.style,"string"==typeof e)t.cssText+=";"+e;else for(var n in e)"float"===n?(t.cssFloat=e[n],t.styleFloat=e[n]):t[n]=e[n]}}},function(e){e.simulatePlaceholder=function(t,n,i){var o=function(){n.hasPlaceholderSet()&&n.clear(),e.removeClass(n.element,"placeholder")},s=function(){n.isEmpty()&&(n.setValue(i),e.addClass(n.element,"placeholder"))};t.observe("set_placeholder",s).observe("unset_placeholder",o).observe("focus:composer",o).observe("paste:composer",o).observe("blur:composer",s),s()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){var e={"a u":wysihtml5.dom.replaceWithChildNodes};return function(t,n,i){var o,s,r,n=n||e,i=i||t.ownerDocument||document,a="string"==typeof t,l=0,t=a?wysihtml5.dom.getAsDom(t,i):t;for(r in n)for(o=t.querySelectorAll(r),i=n[r],s=o.length;s>l;l++)i(o[l]);return a?t.innerHTML:t}}(),function(e){var t=e.dom;e.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(n){t.observe(n.element,["cut","keydown"],e)}}(),e.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"];return function(i){t.observe(i.element,"keydown",function(o){if(o.keyCode===e.BACKSPACE_KEY){var s=i.selection.getSelectedNode(),o=i.element;o.firstChild&&e.lang.array(n).contains(o.firstChild.nodeName)&&(s=t.getParentElement(s,{nodeName:n}))&&s==o.firstChild&&1>=s.childNodes.length&&(s.firstChild?""===s.firstChild.innerHTML:1)&&s.parentNode.removeChild(s)}})}}()}(wysihtml5),function(e){e.quirks.getCorrectInnerHTML=function(t){var n=t.innerHTML;if(-1===n.indexOf("%7E"))return n;var i,o,s,r,t=t.querySelectorAll("[href*='~'], [src*='~']");for(r=0,s=t.length;s>r;r++)i=t[r].href||t[r].src,o=e.lang.string(i).replace("~").by("%7E"),n=e.lang.string(n).replace(o).by(i);return n}}(wysihtml5),function(e){var t=e.dom,n="LI P H1 H2 H3 H4 H5 H6".split(" "),i=["UL","OL","MENU"];e.quirks.insertLineBreakOnReturn=function(o){function s(n){if(n=t.getParentElement(n,{nodeName:["P","DIV"]},2)){var i=document.createTextNode(e.INVISIBLE_SPACE);t.insert(i).before(n),t.replaceWithChildNodes(n),o.selection.selectNode(i)}}t.observe(o.element.ownerDocument,"keydown",function(r){var a=r.keyCode;if(!(r.shiftKey||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){var l=o.selection.getSelectedNode();(l=t.getParentElement(l,{nodeName:n},4))?"LI"!==l.nodeName||a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY?l.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY&&setTimeout(function(){s(o.selection.getSelectedNode())},0):setTimeout(function(){var e,n=o.selection.getSelectedNode();n&&((e=t.getParentElement(n,{nodeName:i},2))||s(n))},0):a===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()&&(o.commands.exec("insertLineBreak"),r.preventDefault())
}})}}(wysihtml5),function(e){e.quirks.redraw=function(t){e.dom.addClass(t,"wysihtml5-quirks-redraw"),e.dom.removeClass(t,"wysihtml5-quirks-redraw");try{var n=t.ownerDocument;n.execCommand("italic",!1,null),n.execCommand("italic",!1,null)}catch(i){}}}(wysihtml5),function(e){var t=e.dom;e.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(n){var i=rangy.createRange(this.doc),o=n.nodeType===e.ELEMENT_NODE,s="canHaveHTML"in n?n.canHaveHTML:"IMG"!==n.nodeName,r=o?n.innerHTML:n.data,r=""===r||r===e.INVISIBLE_SPACE,a=t.getStyle("display").from(n),a="block"===a||"list-item"===a;if(r&&o&&s)try{n.innerHTML=e.INVISIBLE_SPACE}catch(l){}s?i.selectNodeContents(n):i.selectNode(n),s&&r&&o?i.collapse(a):s&&r&&(i.setStartAfter(n),i.setEndAfter(n)),this.setSelection(i)},getSelectedNode:function(e){return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(e=this.doc.selection.createRange())&&e.length?e.item(0):(e=this.getSelection(this.doc),e.focusNode===e.anchorNode?e.focusNode:(e=this.getRange(this.doc))?e.commonAncestorContainer:this.doc.body)},executeAndRestore:function(t,n){var i=this.doc.body,o=n&&i.scrollTop,s=n&&i.scrollLeft,r='<span class="_wysihtml5-temp-placeholder">'+e.INVISIBLE_SPACE+"</span>",a=this.getRange(this.doc);if(a){r=a.createContextualFragment(r),a.insertNode(r);try{t(a.startContainer,a.endContainer)}catch(l){setTimeout(function(){throw l},0)}(caretPlaceholder=this.doc.querySelector("._wysihtml5-temp-placeholder"))?(a=rangy.createRange(this.doc),a.selectNode(caretPlaceholder),a.deleteContents(),this.setSelection(a)):i.focus(),n&&(i.scrollTop=o,i.scrollLeft=s);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(c){}}else t(i,i)},executeAndRestoreSimple:function(e){var t,n,i,o=this.getRange(),s=this.doc.body;if(o){t=o.getNodes([3]),s=t[0]||o.startContainer,i=t[t.length-1]||o.endContainer,t=s===o.startContainer?o.startOffset:0,n=i===o.endContainer?o.endOffset:i.length;try{e(o.startContainer,o.endContainer)}catch(r){setTimeout(function(){throw r},0)}e=rangy.createRange(this.doc);try{e.setStart(s,t)}catch(a){}try{e.setEnd(i,n)}catch(l){}try{this.setSelection(e)}catch(c){}}else e(s,s)},insertHTML:function(e){var e=rangy.createRange(this.doc).createContextualFragment(e),t=e.lastChild;this.insertNode(e),t&&this.setAfter(t)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var t,n=this.doc,i=n.documentElement.scrollHeight>n.documentElement.offsetHeight;if((t=n._wysihtml5ScrollIntoViewElement)||(t=n.createElement("span"),t.innerHTML=e.INVISIBLE_SPACE),t=n._wysihtml5ScrollIntoViewElement=t,i){this.insertNode(t);var i=t,o=0;if(i.parentNode)do o+=i.offsetTop||0,i=i.offsetParent;while(i);i=o,t.parentNode.removeChild(t),i>n.body.scrollTop&&(n.body.scrollTop=i)}},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t=this.doc.selection.createRange(),n=t.boundingTop,i=this.doc.body.scrollWidth;if(t.moveToPoint){for(0===n&&(e=this.doc.createElement("span"),this.insertNode(e),n=e.offsetTop,e.parentNode.removeChild(e)),n+=1,e=-10;i>e;e+=2)try{t.moveToPoint(e,n);break}catch(o){}for(e=this.doc.selection.createRange();i>=0;i--)try{e.moveToPoint(i,n);break}catch(s){}t.setEndPoint("EndToEnd",e),t.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow).setSingleRange(e)}})}(wysihtml5),function(e,t){function n(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n==e.length?!!e.nextSibling:!0:n>0&&n<e.childNodes.length}function i(e,n,o){var s;if(t.dom.isCharacterDataNode(n)&&(0==o?(o=t.dom.getNodeIndex(n),n=n.parentNode):o==n.length?(o=t.dom.getNodeIndex(n)+1,n=n.parentNode):s=t.dom.splitDataNode(n,o)),!s){s=n.cloneNode(!1),s.id&&s.removeAttribute("id");for(var r;r=n.childNodes[o];)s.appendChild(r);t.dom.insertAfter(s,n)}return n==e?s:i(e,s.parentNode,t.dom.getNodeIndex(s))}function o(t){this.firstTextNode=(this.isElementMerge=t.nodeType==e.ELEMENT_NODE)?t.lastChild:t,this.textNodes=[this.firstTextNode]}function s(e,t,n,i){this.tagNames=e||[r],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var r="span",a=/\s+/g;o.prototype={doMerge:function(){for(var e,t,n=[],i=0,o=this.textNodes.length;o>i;++i)e=this.textNodes[i],t=e.parentNode,n[i]=e.data,i&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=n.join("")},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;n>t;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},s.prototype={getAncestorWithClass:function(n){for(var i;n;){if(this.cssClass)if(i=this.cssClass,n.className){var o=n.className.match(this.similarClassRegExp)||[];i=o[o.length-1]===i}else i=!1;else i=!0;if(n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&i)return n;n=n.parentNode}return!1},postApply:function(e,t){for(var n,i,s,r=e[0],a=e[e.length-1],l=[],c=r,d=a,u=0,h=a.length,f=0,p=e.length;p>f;++f)i=e[f],(s=this.getAdjacentMergeableTextNode(i.parentNode,!1))?(n||(n=new o(s),l.push(n)),n.textNodes.push(i),i===r&&(c=n.firstTextNode,u=c.length),i===a&&(d=n.firstTextNode,h=n.getLength())):n=null;if((r=this.getAdjacentMergeableTextNode(a.parentNode,!0))&&(n||(n=new o(a),l.push(n)),n.textNodes.push(r)),l.length){for(f=0,p=l.length;p>f;++f)l[f].doMerge();t.setStart(c,u),t.setEnd(d,h)}},getAdjacentMergeableTextNode:function(t,n){var i=t.nodeType==e.TEXT_NODE,o=i?t.parentNode:t,s=n?"nextSibling":"previousSibling";if(i){if((i=t[s])&&i.nodeType==e.TEXT_NODE)return i}else if((i=o[s])&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){var i;if((i=t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase()))&&(i=t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase()))&&(i=e.className.replace(a," ")==n.className.replace(a," ")))e:if(e.attributes.length!=n.attributes.length)i=!1;else{i=0;for(var o,s,r=e.attributes.length;r>i;++i)if(o=e.attributes[i],s=o.name,"class"!=s&&(s=n.attributes.getNamedItem(s),o.specified!=s.specified||o.specified&&o.nodeValue!==s.nodeValue)){i=!1;break e}i=!0}return i},createContainer:function(e){return e=e.createElement(this.tagNames[0]),this.cssClass&&(e.className=this.cssClass),e},applyToTextNode:function(e){var n=e.parentNode;1==n.childNodes.length&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())?this.cssClass&&(e=this.cssClass,n.className?(n.className&&(n.className=n.className.replace(this.similarClassRegExp,"")),n.className+=" "+e):n.className=e):(n=this.createContainer(t.dom.getDocument(e)),e.parentNode.insertBefore(n,e),n.appendChild(e))},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,o){if(t.containsNode(o)||(e=t.cloneRange(),e.selectNode(o),e.isPointInRange(t.endContainer,t.endOffset)&&n(t.endContainer,t.endOffset)&&(i(o,t.endContainer,t.endOffset),t.setEndAfter(o)),e.isPointInRange(t.startContainer,t.startOffset)&&n(t.startContainer,t.startOffset)&&(o=i(o,t.startContainer,t.startOffset))),this.similarClassRegExp&&o.className&&(o.className=o.className.replace(this.similarClassRegExp,"")),this.isRemovable(o)){for(t=o,o=t.parentNode;t.firstChild;)o.insertBefore(t.firstChild,t);o.removeChild(t)}},applyToRange:function(t){var n=t.getNodes([e.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(t.endContainer.ownerDocument);return t.surroundContents(i),this.selectNode(t,i),void 0}catch(o){}if(t.splitBoundaries(),n=t.getNodes([e.TEXT_NODE]),n.length){for(var s=0,r=n.length;r>s;++s)i=n[s],this.getAncestorWithClass(i)||this.applyToTextNode(i);t.setStart(n[0],0),i=n[n.length-1],t.setEnd(i,i.length),this.normalize&&this.postApply(n,t)}},undoToRange:function(t){var n,i,o=t.getNodes([e.TEXT_NODE]);o.length?(t.splitBoundaries(),o=t.getNodes([e.TEXT_NODE])):(o=t.endContainer.ownerDocument.createTextNode(e.INVISIBLE_SPACE),t.insertNode(o),t.selectNode(o),o=[o]);for(var s=0,r=o.length;r>s;++s)n=o[s],(i=this.getAncestorWithClass(n))&&this.undoToTextNode(n,t,i);1==r?this.selectNode(t,o[0]):(t.setStart(o[0],0),n=o[o.length-1],t.setEnd(n,n.length),this.normalize&&this.postApply(o,t))},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,o="canHaveHTML"in n?n.canHaveHTML:!0,s=i?n.innerHTML:n.data;if((s=""===s||s===e.INVISIBLE_SPACE)&&i&&o)try{n.innerHTML=e.INVISIBLE_SPACE}catch(r){}t.selectNodeContents(n),s&&i?t.collapse(!1):s&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),i=i?i.toString():"";return n.detach(),i},isAppliedToRange:function(t){var n,i=[],o=t.getNodes([e.TEXT_NODE]);if(!o.length)return(n=this.getAncestorWithClass(t.startContainer))?[n]:!1;for(var s,r=0,a=o.length;a>r;++r){if(s=this.getTextSelectedByRange(o[r],t),n=this.getAncestorWithClass(o[r]),""!=s&&!n)return!1;i.push(n)}return i},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},e.selection.HTMLApplier=s}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),o=n&&n.exec,s=null;if(this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),s=o.apply(n,i);else try{s=this.doc.execCommand(e,!1,t)}catch(r){}return this.editor.fire("aftercommand:composer"),s},state:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.state;if(i)return n.unshift(this.composer),i.apply(t,n);try{return this.doc.queryCommandState(e)}catch(o){return!1}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n)return n.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(i){return null}}}),function(e){e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,"b")},state:function(t,n){return e.commands.formatInline.state(t,n,"b")},value:function(){}}}(wysihtml5),function(e){function t(t,s){var r,a,l,c=t.doc,d="_wysihtml5-temp-"+ +new Date,u=0;for(e.commands.formatInline.exec(t,n,i,d,/non-matching-class/g),r=c.querySelectorAll(i+"."+d),d=r.length;d>u;u++)for(l in a=r[u],a.removeAttribute("class"),s)a.setAttribute(l,s[l]);u=a,1===d&&(l=o.getTextContent(a),d=!!a.querySelector("*"),l=""===l||l===e.INVISIBLE_SPACE,!d&&l&&(o.setTextContent(a,s.text||a.href),c=c.createTextNode(" "),t.selection.setAfter(a),t.selection.insertNode(c),u=c)),t.selection.setAfter(u)}var n,i="A",o=e.dom;e.commands.createLink={exec:function(e,n,i){var s=this.state(e,n);s?e.selection.executeAndRestore(function(){for(var e,t,n,i=s.length,r=0;i>r;r++)e=s[r],t=o.getParentElement(e,{nodeName:"code"}),n=o.getTextContent(e),n.match(o.autoLink.URL_REG_EXP)&&!t?o.renameElement(e,"code"):o.replaceWithChildNodes(e)}):(i="object"==typeof i?i:{href:i},t(e,i))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")},value:function(){return n}}}(wysihtml5),function(e){var t=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(n,i,o){return e.commands.formatInline.exec(n,i,"span","wysiwyg-font-size-"+o,t)},state:function(n,i,o){return e.commands.formatInline.state(n,i,"span","wysiwyg-font-size-"+o,t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(n,i,o){return e.commands.formatInline.exec(n,i,"span","wysiwyg-color-"+o,t)},state:function(n,i,o){return e.commands.formatInline.state(n,i,"span","wysiwyg-color-"+o,t)},value:function(){}}}(wysihtml5),function(e){function t(t){for(t=t.previousSibling;t&&t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim();)t=t.previousSibling;return t}function n(t){for(t=t.nextSibling;t&&t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim();)t=t.nextSibling;return t}function i(e){return"BR"===e.nodeName||"block"===r.getStyle("display").from(e)?!0:!1}function o(t,n,i,o){if(o)var s=r.observe(t,"DOMNodeInserted",function(t){var n,t=t.target;t.nodeType===e.ELEMENT_NODE&&(n=r.getStyle("display").from(t),"inline"!==n.substr(0,6)&&(t.className+=" "+o))});t.execCommand(n,!1,i),s&&s.stop()}function s(e,i){e.selection.selectLine(),e.selection.surround(i);var o=n(i),s=t(i);o&&"BR"===o.nodeName&&o.parentNode.removeChild(o),s&&"BR"===s.nodeName&&s.parentNode.removeChild(s),(o=i.lastChild)&&"BR"===o.nodeName&&o.parentNode.removeChild(o),e.selection.selectNode(i)}var r=e.dom,a="H1 H2 H3 H4 H5 H6 P BLOCKQUOTE DIV".split(" ");e.commands.formatBlock={exec:function(l,c,d,u,h){var f,p=l.doc,m=this.state(l,c,d,u,h),d="string"==typeof d?d.toUpperCase():d;if(m)l.selection.executeAndRestoreSimple(function(){h&&(m.className=m.className.replace(h,""));var o=!!e.lang.string(m.className).trim();if(o||m.nodeName!==(d||"DIV"))o&&r.renameElement(m,"DIV");else{var o=m,s=o.ownerDocument,a=n(o),l=t(o);a&&!i(a)&&o.parentNode.insertBefore(s.createElement("br"),a),l&&!i(l)&&o.parentNode.insertBefore(s.createElement("br"),o),r.replaceWithChildNodes(m)}});else{if((null===d||e.lang.array(a).contains(d))&&(f=l.selection.getSelectedNode(),m=r.getParentElement(f,{nodeName:a})))return l.selection.executeAndRestoreSimple(function(){if(d&&(m=r.renameElement(m,d)),u){var e=m;e.className?(e.className=e.className.replace(h,""),e.className+=" "+u):e.className=u}}),void 0;l.commands.support(c)?o(p,c,d||"DIV",u):(m=p.createElement(d||"DIV"),u&&(m.className=u),s(l,m))}},state:function(e,t,n,i,o){return n="string"==typeof n?n.toUpperCase():n,e=e.selection.getSelectedNode(),r.getParentElement(e,{nodeName:n,className:i,classRegExp:o})},value:function(){}}}(wysihtml5),function(e){function t(t,o,s){var r=t+":"+o;if(!i[r]){var a=i,l=e.selection.HTMLApplier,c=n[t],t=c?[t.toLowerCase(),c.toLowerCase()]:[t.toLowerCase()];a[r]=new l(t,o,s,!0)}return i[r]}var n={strong:"b",em:"i",b:"strong",i:"em"},i={};e.commands.formatInline={exec:function(e,n,i,o,s){return(n=e.selection.getRange())?(t(i,o,s).toggleRange(n),e.selection.setSelection(n),void 0):!1},state:function(i,o,s,r,a){var o=i.doc,l=n[s]||s;return!e.dom.hasElementWithTagName(o,s)&&!e.dom.hasElementWithTagName(o,l)||r&&!e.dom.hasElementWithClassName(o,r)?!1:(i=i.selection.getRange(),i?t(s,r,a).isAppliedToRange(i):!1)},value:function(){}}}(wysihtml5),function(e){e.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){}}}(wysihtml5),function(e){e.commands.insertImage={exec:function(t,n,i){var o,i="object"==typeof i?i:{src:i},s=t.doc,n=this.state(t);if(n)t.selection.setBefore(n),i=n.parentNode,i.removeChild(n),e.dom.removeEmptyTextNodes(i),"A"===i.nodeName&&!i.firstChild&&(t.selection.setAfter(i),i.parentNode.removeChild(i)),e.quirks.redraw(t.element);else{n=s.createElement("IMG");for(o in i)n[o]=i[o];t.selection.insertNode(n),e.browser.hasProblemsSettingCaretAfterImg()?(i=s.createTextNode(e.INVISIBLE_SPACE),t.selection.insertNode(i),t.selection.setAfter(i)):t.selection.setAfter(n)}},state:function(t){var n;return e.dom.hasElementWithTagName(t.doc,"IMG")?(n=t.selection.getSelectedNode())?"IMG"===n.nodeName?n:n.nodeType!==e.ELEMENT_NODE?!1:(n=t.selection.getText(),(n=e.lang.string(n).trim())?!1:(t=t.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1!==t.length?!1:t[0])):!1:!1},value:function(e){return(e=this.state(e))&&e.src}}}(wysihtml5),function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(n,i){n.commands.support(i)?(n.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",t)},state:function(){return!1},value:function(){}}}(wysihtml5),function(e){e.commands.insertOrderedList={exec:function(t,n){var i,o=t.doc,s=t.selection.getSelectedNode(),r=e.dom.getParentElement(s,{nodeName:"OL"}),a=e.dom.getParentElement(s,{nodeName:"UL"}),s="_wysihtml5-temp-"+(new Date).getTime();t.commands.support(n)?o.execCommand(n,!1,null):r?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)}):a?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,"ol")}):(t.commands.exec("formatBlock","div",s),i=o.querySelector("."+s),o=""===i.innerHTML||i.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,"ol")}),o&&t.selection.selectNode(r.querySelector("li")))},state:function(t){return t=t.selection.getSelectedNode(),e.dom.getParentElement(t,{nodeName:"OL"})},value:function(){}}}(wysihtml5),function(e){e.commands.insertUnorderedList={exec:function(t,n){var i,o=t.doc,s=t.selection.getSelectedNode(),r=e.dom.getParentElement(s,{nodeName:"UL"}),a=e.dom.getParentElement(s,{nodeName:"OL"}),s="_wysihtml5-temp-"+(new Date).getTime();t.commands.support(n)?o.execCommand(n,!1,null):r?t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)}):a?t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,"ul")}):(t.commands.exec("formatBlock","div",s),i=o.querySelector("."+s),o=""===i.innerHTML||i.innerHTML===e.INVISIBLE_SPACE,t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,"ul")}),o&&t.selection.selectNode(r.querySelector("li")))},state:function(t){return t=t.selection.getSelectedNode(),e.dom.getParentElement(t,{nodeName:"UL"})},value:function(){}}}(wysihtml5),function(e){e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,"i")},state:function(t,n){return e.commands.formatInline.state(t,n,"i")},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-center",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-center",t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-left",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-left",t)},value:function(){}}}(wysihtml5),function(e){var t=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(n){return e.commands.formatBlock.exec(n,"formatBlock",null,"wysiwyg-text-align-right",t)},state:function(n){return e.commands.formatBlock.state(n,"formatBlock",null,"wysiwyg-text-align-right",t)},value:function(){}}}(wysihtml5),function(e){e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,"u")},state:function(t,n){return e.commands.formatInline.state(t,n,"u")},value:function(){}}}(wysihtml5),function(e){var t='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",n='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",i=e.dom;e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var o,s=this,r=this.composer.sandbox.getDocument();if(i.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,n=90===t&&e.shiftKey||89===t;90!==t||e.shiftKey?n&&(s.redo(),e.preventDefault()):(s.undo(),e.preventDefault())}}),i.observe(this.element,"keydown",function(e){e=e.keyCode,e!==o&&(o=e,(8===e||46===e)&&s.transact())}),e.browser.hasUndoInContextMenu()){var a,l,c=function(){for(var e;e=r.querySelector("._wysihtml5-temp");)e.parentNode.removeChild(e);clearInterval(a)};i.observe(this.element,"contextmenu",function(){c(),s.composer.selection.executeAndRestoreSimple(function(){s.element.lastChild&&s.composer.selection.setAfter(s.element.lastChild),r.execCommand("insertHTML",!1,t),r.execCommand("insertHTML",!1,n),r.execCommand("undo",!1,null)}),a=setInterval(function(){r.getElementById("_wysihtml5-redo")?(c(),s.redo()):r.getElementById("_wysihtml5-undo")||(c(),s.undo())},400),l||(l=!0,i.observe(document,"mousedown",c),i.observe(r,["mousedown","paste","cut","copy"],c))})}this.editor.observe("newword:composer",function(){s.transact()}).observe("beforecommand:composer",function(){s.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();t!=e&&(40<(this.history.length=this.position)&&(this.history.shift(),this.position--),this.position++,this.history.push(t))},undo:function(){this.transact(),1>=this.position||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe("beforeload",function(){e.parent.observe("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t&&(n=this.parent.parse(n)),n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=t.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML;return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector("blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea")},_initSandbox:function(){var e=this;this.sandbox=new t.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;t.insert(this.iframe).after(i),t.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new e.Selection(this.parent),this.commands=new e.Commands(this.parent),t.copyAttributes("className spellcheck title lang dir accessKey".split(" ")).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var o=this.config.name;o&&(t.addClass(this.element,o),t.addClass(this.iframe,o)),(o="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder"))&&t.simulatePlaceholder(this.parent,this,o),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),e.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||e.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,o=n.canDisableAutoLinking(),s=n.doesAutoLinkingInContentEditable();if(o&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!s||s&&o)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})});var r=this.sandbox.getDocument().getElementsByTagName("a"),a=t.autoLink.URL_REG_EXP,l=function(n){return n=e.lang.string(t.getTextContent(n)).trim(),"www."===n.substr(0,4)&&(n="http://"+n),n};t.observe(this.element,"keydown",function(e){if(r.length){var n,e=i.selection.getSelectedNode(e.target.ownerDocument),o=t.getParentElement(e,{nodeName:"A"},4);o&&(n=l(o),setTimeout(function(){var e=l(o);e!==n&&e.match(a)&&o.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var i=["width","height"],o=i.length,s=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&t.observe(s,"resizeend",function(t){for(var n,t=t.target||t.srcElement,r=t.style,a=0;o>a;a++)n=i[a],r[n]&&(t.setAttribute(n,parseInt(r[n],10)),r[n]="");e.quirks.redraw(s)}):n.supportsEvent("resizestart")&&t.observe(s,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new e.UndoManager(this.parent)}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,o=n.createElement("div"),s="background-color color cursor font-family font-size font-style font-variant font-weight line-height letter-spacing text-align text-decoration text-indent text-rendering word-break word-wrap word-spacing".split(" "),r="background-color border-collapse border-bottom-color border-bottom-style border-bottom-width border-left-color border-left-style border-left-width border-right-color border-right-style border-right-width border-top-color border-top-style border-top-width clear display float margin-bottom margin-left margin-right margin-top outline-color outline-offset outline-width outline-style padding-left padding-right padding-top padding-bottom position top left right bottom z-index vertical-align text-align -webkit-box-sizing -moz-box-sizing -ms-box-sizing box-sizing -webkit-box-shadow -moz-box-shadow -ms-box-shadow box-shadow -webkit-border-top-right-radius -moz-border-radius-topright border-top-right-radius -webkit-border-bottom-right-radius -moz-border-radius-bottomright border-bottom-right-radius -webkit-border-bottom-left-radius -moz-border-radius-bottomleft border-bottom-left-radius -webkit-border-top-left-radius -moz-border-radius-topleft border-top-left-radius width height".split(" "),a="width height top left right bottom".split(" "),l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],c=function(e){if(e.setActive)try{e.setActive()}catch(o){}else{var s=e.style,r=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,s={position:s.position,top:s.top,left:s.left,WebkitUserSelect:s.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(s).on(e),i.scrollTo&&i.scrollTo(a,r)}};e.views.Composer.prototype.style=function(){var d=this,u=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),p=f&&h.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||o.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||o.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===u&&h.blur(),t.copyStyles(r).from(h).to(this.iframe).andTo(this.blurStylesHost),t.copyStyles(s).from(h).to(this.element).andTo(this.blurStylesHost),t.insertCSS(l).into(this.element.ownerDocument),c(h),t.copyStyles(r).from(h).to(this.focusStylesHost),t.copyStyles(s).from(h).to(this.focusStylesHost);var m=e.lang.array(r).without(["display"]);if(u?u.focus():h.blur(),f&&h.setAttribute("placeholder",p),!e.browser.hasCurrentStyleProperty())var g=t.observe(i,"resize",function(){if(t.contains(document.documentElement,d.iframe)){var e=t.getStyle("display").from(h),n=t.getStyle("display").from(d.iframe);h.style.display="",d.iframe.style.display="none",t.copyStyles(a).from(h).to(d.iframe).andTo(d.focusStylesHost).andTo(d.blurStylesHost),d.iframe.style.display=n,h.style.display=e}else g.stop()});return this.parent.observe("focus:composer",function(){t.copyStyles(m).from(d.focusStylesHost).to(d.iframe),t.copyStyles(s).from(d.focusStylesHost).to(d.element)}),this.parent.observe("blur:composer",function(){t.copyStyles(m).from(d.blurStylesHost).to(d.iframe),t.copyStyles(s).from(d.blurStylesHost).to(d.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"};e.views.Composer.prototype.observe=function(){var o=this,s=this.getValue(),r=this.sandbox.getIframe(),a=this.element,l=n.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),c=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];t.observe(r,"DOMNodeRemoved",function(){clearInterval(d),o.parent.fire("destroy:composer")});var d=setInterval(function(){t.contains(document.documentElement,r)||(clearInterval(d),o.parent.fire("destroy:composer"))},250);t.observe(l,"focus",function(){o.parent.fire("focus").fire("focus:composer"),setTimeout(function(){s=o.getValue()},0)}),t.observe(l,"blur",function(){s!==o.getValue()&&o.parent.fire("change").fire("change:composer"),o.parent.fire("blur").fire("blur:composer")}),e.browser.isIos()&&t.observe(a,"blur",function(){var e=a.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{o.selection.insertNode(e)}catch(i){a.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),t.observe(a,"dragenter",function(){o.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&t.observe(a,["dragover","dragenter"],function(e){e.preventDefault()}),t.observe(a,c,function(e){var t,i=e.dataTransfer;i&&n.supportsDataTransfer()&&(t=i.getData("text/html")||i.getData("text/plain")),t?(a.focus(),o.commands.exec("insertHTML",t),o.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){o.parent.fire("paste").fire("paste:composer")
},0)}),t.observe(a,"keyup",function(t){t=t.keyCode,(t===e.SPACE_KEY||t===e.ENTER_KEY)&&o.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){o.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(a,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(o.selection.selectNode(t),e.preventDefault())}),t.observe(a,"keydown",function(e){var t=i[e.keyCode];(e.ctrlKey||e.metaKey)&&!e.altKey&&t&&(o.commands.exec(t),e.preventDefault())}),t.observe(a,"keydown",function(t){var n=o.selection.getSelectedNode(!0),i=t.keyCode;!n||"IMG"!==n.nodeName||i!==e.BACKSPACE_KEY&&i!==e.DELETE_KEY||(i=n.parentNode,i.removeChild(n),"A"===i.nodeName&&!i.firstChild&&i.parentNode.removeChild(i),setTimeout(function(){e.quirks.redraw(a)},0),t.preventDefault())});var u={IMG:"Image: ",A:"Link: "};t.observe(a,"mouseover",function(e){var e=e.target,t=e.nodeName;!("A"!==t&&"IMG"!==t)&&!e.hasAttribute("title")&&(t=u[t]+(e.getAttribute("href")||e.getAttribute("src")),e.setAttribute("title",t))})}}(wysihtml5),function(e){e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,i=this.textarea.element.form,o=function(){t=setInterval(function(){n.fromComposerToTextarea()},400)},s=function(){clearInterval(t),t=null};o(),i&&(e.dom.observe(i,"submit",function(){n.sync(!0)}),e.dom.observe(i,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||t?"textarea"===e&&(n.fromComposerToTextarea(!0),s()):(n.fromTextareaToComposer(!0),o())}),this.editor.observe("destroy:composer",s)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value;return e&&!n||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.observe("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){e=n[e.type]||e.type,t.fire(e).fire(e+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t=e.dom;e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var n=this,i=function(e){var t=n._serialize();t==n.elementToChange?n.fire("edit",t):n.fire("save",t),n.hide(),e.preventDefault(),e.stopPropagation()};t.observe(n.link,"click",function(){t.hasClass(n.link,"wysihtml5-command-dialog-opened")&&setTimeout(function(){n.hide()},0)}),t.observe(this.container,"keydown",function(t){var o=t.keyCode;o===e.ENTER_KEY&&i(t),o===e.ESCAPE_KEY&&n.hide()}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",i),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){n.fire("cancel"),n.hide(),e.preventDefault(),e.stopPropagation()});for(var o=this.container.querySelectorAll("input, select, textarea"),s=0,r=o.length,a=function(){clearInterval(n.interval)};r>s;s++)t.observe(o[s],"change",a);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),n=t.length,i=0;n>i;i++)e[t[i].getAttribute("data-wysihtml5-dialog-field")]=t[i].value;return e},_interpolate:function(e){for(var t,n,i=document.querySelector(":focus"),o=this.container.querySelectorAll("[data-wysihtml5-dialog-field]"),s=o.length,r=0;s>r;r++)t=o[r],t!==i&&!(e&&"hidden"===t.type)&&(n=t.getAttribute("data-wysihtml5-dialog-field"),n=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=n)},show:function(e){var n=this,i=this.container.querySelector("input, select, textarea");if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){n._interpolate(!0)},500)),t.addClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="",this.fire("show"),i&&!e)try{i.focus()}catch(o){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,"wysihtml5-command-dialog-opened"),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},o={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},s={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(r,a){var l=document.createElement("input");if(e.browser.supportsSpeechApiOn(l)){var c=document.createElement("div");e.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(l).into(c),t.insert(c).into(a),t.setStyles(o).on(l),t.setAttributes(s).on(l),t.setStyles(i).on(c),t.setStyles(n).on(a),t.observe(l,"onwebkitspeechchange"in l?"webkitspeechchange":"speechchange",function(){r.execCommand("insertText",l.value),l.value=""}),t.observe(l,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}else a.style.display="none"}}(wysihtml5),function(e){var t=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t,this.container="string"==typeof n?document.getElementById(n):n,this.composer=t.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),o=i.length,s=0;o>s;s++)new e.toolbar.Speech(this,i[s])},_getLinks:function(t){for(var n,i,o,s,r,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,d=this[t+"Mapping"]={};l>c;c++)n=a[c],o=n.getAttribute("data-wysihtml5-"+t),s=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+o+"']"),r=this._getDialog(n,o),d[o+":"+s]={link:n,group:i,name:o,value:s,dialog:r,state:!1}},_getDialog:function(t,n){var i,o,s=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return r&&(i=new e.toolbar.Dialog(t,r),i.observe("show",function(){o=s.composer.selection.getBookmark(),s.editor.fire("show:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.observe("save",function(e){o&&s.composer.selection.setBookmark(o),s._execCommand(n,e),s.editor.fire("save:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.observe("cancel",function(){s.editor.focus(!1),s.editor.fire("cancel:dialog",{command:n,dialogContainer:r,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")}},_observe:function(){for(var e=this,n=this.editor,i=this.container,o=this.commandLinks.concat(this.actionLinks),s=o.length,r=0;s>r;r++)t.setAttributes({href:"javascript:;",unselectable:"on"}).on(o[r]);t.delegate(i,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),t.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this.getAttribute("data-wysihtml5-command"),i=this.getAttribute("data-wysihtml5-command-value");e.execCommand(n,i),t.preventDefault()}),t.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),n.observe("focus:composer",function(){e.bookmark=null,clearInterval(e.interval),e.interval=setInterval(function(){e._updateLinkStates()},500)}),n.observe("blur:composer",function(){clearInterval(e.interval)}),n.observe("destroy:composer",function(){clearInterval(e.interval)}),n.observe("change_view",function(n){setTimeout(function(){e.commandsDisabled="composer"!==n,e._updateLinkStates(),e.commandsDisabled?t.addClass(i,"wysihtml5-commands-disabled"):t.removeClass(i,"wysihtml5-commands-disabled")},0)})},_updateLinkStates:function(){var n,i,o,s=this.commandMapping,r=this.actionMapping;for(n in s)o=s[n],this.commandsDisabled?(i=!1,t.removeClass(o.link,"wysihtml5-command-active"),o.group&&t.removeClass(o.group,"wysihtml5-command-active"),o.dialog&&o.dialog.hide()):(i=this.composer.commands.state(o.name,o.value),e.lang.object(i).isArray()&&(i=1===i.length?i[0]:!0),t.removeClass(o.link,"wysihtml5-command-disabled"),o.group&&t.removeClass(o.group,"wysihtml5-command-disabled")),o.state!==i&&((o.state=i)?(t.addClass(o.link,"wysihtml5-command-active"),o.group&&t.addClass(o.group,"wysihtml5-command-active"),o.dialog&&("object"==typeof i?o.dialog.show(i):o.dialog.hide())):(t.removeClass(o.link,"wysihtml5-command-active"),o.group&&t.removeClass(o.group,"wysihtml5-command-active"),o.dialog&&o.dialog.hide()));for(n in r)s=r[n],"change_view"===s.name&&(s.state=this.editor.currentView===this.editor.textarea,s.state?t.addClass(s.link,"wysihtml5-action-active"):t.removeClass(s.link,"wysihtml5-action-active"))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){var t={name:void 0,style:!0,toolbar:void 0,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:void 0,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(n,i){if(this.textareaElement="string"==typeof n?document.getElementById(n):n,this.config=e.lang.object({}).merge(t).merge(i).get(),this.currentView=this.textarea=new e.views.Textarea(this,this.textareaElement,this.config),this._isCompatible=e.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var o=this;setTimeout(function(){o.fire("beforeload").fire("load")},0)}else{e.dom.addClass(document.body,this.config.bodyClassName),this.currentView=this.composer=new e.views.Composer(this,this.textareaElement,this.config),"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(s){}}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof t&&e.quirks.redraw(t),n},_initParser:function(){this.observe("paste:composer",function(){var t=this;t.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(t.composer.element),t.parse(t.composer.element)},!0)}),this.observe("paste:textarea",function(){this.textarea.setValue(this.parse(this.textarea.getValue()))})}})}(wysihtml5),function(e){var t="IFRAME";e.commands.insertVideo={exec:function(n,i,o){o="object"==typeof o?o:{src:o};var s,r,a=n.ownerDocument,l=this.state(n);if(l)return e.selection.setBefore(l),r=l.parentNode,r.removeChild(l),e.dom.removeEmptyTextNodes(r),"A"!==r.nodeName||r.firstChild||(e.selection.setAfter(r),r.parentNode.removeChild(r)),e.quirks.redraw(n),void 0;l=a.createElement(t);for(s in o)l[s]=o[s];e.selection.insertNode(l),e.selection.setAfter(l)},state:function(n){var i,o,s,r=n.ownerDocument;return e.dom.hasElementWithTagName(r,t)?(i=e.selection.getSelectedNode(r))?i.nodeName===t?i:i.nodeType!==e.ELEMENT_NODE?!1:(o=e.selection.getText(r),(o=e.lang.string(o).trim())?!1:(s=e.selection.getNodes(r,e.ELEMENT_NODE,function(e){return"IFRAME"===e.nodeName}),1!==s.length?!1:s[0])):!1:!1},value:function(e){var t=this.state(e);return t&&t.src}}}(wysihtml5),/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),o=0,s=0,r=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),r=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(r=0,s=-1*o),void 0!==n.wheelDeltaY&&(r=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(t,o,s,r),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),/*
 * jScrollPane - v2.0.0beta12 - 2012-09-27
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
function(e,t,n){e.fn.jScrollPane=function(i){function o(i,o){function s(t){var o,a,c,u,h,f,g=!1,v=!1;if(q=t,z===n)h=i.scrollTop(),f=i.scrollLeft(),i.css({overflow:"hidden",padding:0}),F=i.innerWidth()+bt,W=i.innerHeight(),i.width(F),z=e('<div class="jspPane" />').css("padding",yt).append(i.children()),V=e('<div class="jspContainer" />').css({width:F+"px",height:W+"px"}).append(z).appendTo(i);else{if(i.css("width",""),g=q.stickToBottom&&j(),v=q.stickToRight&&E(),u=i.innerWidth()+bt!=F||i.outerHeight()!=W,u&&(F=i.innerWidth()+bt,W=i.innerHeight(),V.css({width:F+"px",height:W+"px"})),!u&&xt==X&&z.outerHeight()==U)return i.width(F),void 0;xt=X,z.css("width",""),i.width(F),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}z.css("overflow","auto"),X=t.contentWidth?t.contentWidth:z[0].scrollWidth,U=z[0].scrollHeight,z.css("overflow",""),Y=X/F,G=U/W,K=G>1,Q=Y>1,Q||K?(i.addClass("jspScrollable"),o=q.maintainPosition&&(et||it),o&&(a=S(),c=N()),r(),l(),d(),o&&(_(v?X-F:a,!1),T(g?U-W:c,!1)),A(),M(),H(),q.enableKeyboardNavigation&&P(),q.clickOnTrack&&p(),L(),q.hijackInternalLinks&&O()):(i.removeClass("jspScrollable"),z.css({top:0,width:V.width()-bt}),$(),R(),D(),m()),q.autoReinitialise&&!vt?vt=setInterval(function(){s(q)},q.autoReinitialiseDelay):!q.autoReinitialise&&vt&&clearInterval(vt),h&&i.scrollTop(0)&&T(h,!1),f&&i.scrollLeft(0)&&_(f,!1),i.trigger("jsp-initialised",[Q||K])}function r(){K&&(V.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ot=V.find(">.jspVerticalBar"),st=ot.find(">.jspTrack"),J=st.find(">.jspDrag"),q.showArrows&&(ct=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",h(0,-1)).bind("click.jsp",I),dt=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",h(0,1)).bind("click.jsp",I),q.arrowScrollOnHover&&(ct.bind("mouseover.jsp",h(0,-1,ct)),dt.bind("mouseover.jsp",h(0,1,dt))),u(st,q.verticalArrowPositions,ct,dt)),at=W,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=e(this).outerHeight()}),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),J.addClass("jspActive");var n=t.pageY-J.position().top;return e("html").bind("mousemove.jsp",function(e){v(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),a())}function a(){st.height(at+"px"),et=0,rt=q.verticalGutter+st.outerWidth(),z.width(F-rt-bt);try{0===ot.position().left&&z.css("margin-left",rt+"px")}catch(e){}}function l(){Q&&(V.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ut=V.find(">.jspHorizontalBar"),ht=ut.find(">.jspTrack"),tt=ht.find(">.jspDrag"),q.showArrows&&(mt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",h(-1,0)).bind("click.jsp",I),gt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",h(1,0)).bind("click.jsp",I),q.arrowScrollOnHover&&(mt.bind("mouseover.jsp",h(-1,0,mt)),gt.bind("mouseover.jsp",h(1,0,gt))),u(ht,q.horizontalArrowPositions,mt,gt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),tt.addClass("jspActive");var n=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){b(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),ft=V.innerWidth(),c())}function c(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ft-=e(this).outerWidth()}),ht.width(ft+"px"),it=0}function d(){if(Q&&K){var t=ht.outerHeight(),n=st.outerWidth();at-=t,e(ut).find(">.jspCap:visible,>.jspArrow").each(function(){ft+=e(this).outerWidth()}),ft-=n,W-=n,F-=t,ht.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),a(),c()}Q&&z.width(V.outerWidth()-bt+"px"),U=z.outerHeight(),G=U/W,Q&&(pt=Math.ceil(1/Y*ft),pt>q.horizontalDragMaxWidth?pt=q.horizontalDragMaxWidth:pt<q.horizontalDragMinWidth&&(pt=q.horizontalDragMinWidth),tt.width(pt+"px"),nt=ft-pt,x(it)),K&&(lt=Math.ceil(1/G*at),lt>q.verticalDragMaxHeight?lt=q.verticalDragMaxHeight:lt<q.verticalDragMinHeight&&(lt=q.verticalDragMinHeight),J.height(lt+"px"),Z=at-lt,y(et))}function u(e,t,n,i){var o,s="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?r=t:t==r&&(s=t,o=n,n=i,i=o),e[s](n)[r](i)}function h(e,t,n){return function(){return f(e,t,this,n),this.blur(),!1}}function f(t,n,i,o){i=e(i).addClass("jspActive");var s,r,a=!0,l=function(){0!==t&&wt.scrollByX(t*q.arrowButtonSpeed),0!==n&&wt.scrollByY(n*q.arrowButtonSpeed),r=setTimeout(l,a?q.initialDelay:q.arrowRepeatFreq),a=!1};l(),s=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(s,function(){i.removeClass("jspActive"),r&&clearTimeout(r),r=null,o.unbind(s)})}function p(){m(),K&&st.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageY-s.top-et,a=!0,l=function(){var e=o.offset(),n=t.pageY-e.top-lt/2,s=W*q.scrollPagePercent,d=Z*s/(U-W);if(0>r)et-d>n?wt.scrollByY(-s):v(n);else{if(!(r>0))return c(),void 0;n>et+d?wt.scrollByY(s):v(n)}i=setTimeout(l,a?q.initialDelay:q.trackClickRepeatFreq),a=!1},c=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",c)};return l(),e(document).bind("mouseup.jsp",c),!1}}),Q&&ht.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var i,o=e(this),s=o.offset(),r=t.pageX-s.left-it,a=!0,l=function(){var e=o.offset(),n=t.pageX-e.left-pt/2,s=F*q.scrollPagePercent,d=nt*s/(X-F);if(0>r)it-d>n?wt.scrollByX(-s):b(n);else{if(!(r>0))return c(),void 0;n>it+d?wt.scrollByX(s):b(n)}i=setTimeout(l,a?q.initialDelay:q.trackClickRepeatFreq),a=!1},c=function(){i&&clearTimeout(i),i=null,e(document).unbind("mouseup.jsp",c)};return l(),e(document).bind("mouseup.jsp",c),!1}})}function m(){ht&&ht.unbind("mousedown.jsp"),st&&st.unbind("mousedown.jsp")}function g(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),J&&J.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function v(e,t){K&&(0>e?e=0:e>Z&&(e=Z),t===n&&(t=q.animateScroll),t?wt.animate(J,"top",e,y):(J.css("top",e),y(e)))}function y(e){e===n&&(e=J.position().top),V.scrollTop(0),et=e;var t=0===et,o=et==Z,s=e/Z,r=-s*(U-W);(Ct!=t||_t!=o)&&(Ct=t,_t=o,i.trigger("jsp-arrow-change",[Ct,_t,Tt,kt])),w(t,o),z.css("top",r),i.trigger("jsp-scroll-y",[-r,t,o]).trigger("scroll")}function b(e,t){Q&&(0>e?e=0:e>nt&&(e=nt),t===n&&(t=q.animateScroll),t?wt.animate(tt,"left",e,x):(tt.css("left",e),x(e)))}function x(e){e===n&&(e=tt.position().left),V.scrollTop(0),it=e;var t=0===it,o=it==nt,s=e/nt,r=-s*(X-F);(Tt!=t||kt!=o)&&(Tt=t,kt=o,i.trigger("jsp-arrow-change",[Ct,_t,Tt,kt])),C(t,o),z.css("left",r),i.trigger("jsp-scroll-x",[-r,t,o]).trigger("scroll")}function w(e,t){q.showArrows&&(ct[e?"addClass":"removeClass"]("jspDisabled"),dt[t?"addClass":"removeClass"]("jspDisabled"))}function C(e,t){q.showArrows&&(mt[e?"addClass":"removeClass"]("jspDisabled"),gt[t?"addClass":"removeClass"]("jspDisabled"))}function T(e,t){var n=e/(U-W);v(n*Z,t)}function _(e,t){var n=e/(X-F);b(n*nt,t)}function k(t,n,i){var o,s,r,a,l,c,d,u,h,f=0,p=0;try{o=e(t)}catch(m){return}for(s=o.outerHeight(),r=o.outerWidth(),V.scrollTop(0),V.scrollLeft(0);!o.is(".jspPane");)if(f+=o.position().top,p+=o.position().left,o=o.offsetParent(),/^body|html$/i.test(o[0].nodeName))return;a=N(),c=a+W,a>f||n?u=f-q.verticalGutter:f+s>c&&(u=f-W+s+q.verticalGutter),u&&T(u,i),l=S(),d=l+F,l>p||n?h=p-q.horizontalGutter:p+r>d&&(h=p-F+r+q.horizontalGutter),h&&_(h,i)}function S(){return-z.position().left}function N(){return-z.position().top}function j(){var e=U-W;return e>20&&e-N()<10}function E(){var e=X-F;return e>20&&e-S()<10}function M(){V.unbind(Nt).bind(Nt,function(e,t,n,i){var o=it,s=et;return wt.scrollBy(n*q.mouseWheelSpeed,-i*q.mouseWheelSpeed,!1),o==it&&s==et})}function $(){V.unbind(Nt)}function I(){return!1}function A(){z.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){k(e.target,!1)})}function R(){z.find(":input,a").unbind("focus.jsp")}function P(){function t(){var e=it,t=et;switch(n){case 40:wt.scrollByY(q.keyboardSpeed,!1);break;case 38:wt.scrollByY(-q.keyboardSpeed,!1);break;case 34:case 32:wt.scrollByY(W*q.scrollPagePercent,!1);break;case 33:wt.scrollByY(-W*q.scrollPagePercent,!1);break;case 39:wt.scrollByX(q.keyboardSpeed,!1);break;case 37:wt.scrollByX(-q.keyboardSpeed,!1)}return o=e!=it||t!=et}var n,o,s=[];Q&&s.push(ut[0]),K&&s.push(ot[0]),z.focus(function(){i.focus()}),i.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(i){if(i.target===this||s.length&&e(i.target).closest(s).length){var r=it,a=et;switch(i.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=i.keyCode,t();break;case 35:T(U-W),n=null;break;case 36:T(0),n=null}return o=i.keyCode==n&&r!=it||a!=et,!o}}).bind("keypress.jsp",function(e){return e.keyCode==n&&t(),!o}),q.hideFocus?(i.css("outline","none"),"hideFocus"in V[0]&&i.attr("hideFocus",!0)):(i.css("outline",""),"hideFocus"in V[0]&&i.attr("hideFocus",!1))}function D(){i.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function L(){if(location.hash&&location.hash.length>1){var t,n,i=escape(location.hash.substr(1));try{t=e("#"+i+', a[name="'+i+'"]')}catch(o){return}t.length&&z.find(i)&&(0===V.scrollTop()?n=setInterval(function(){V.scrollTop()>0&&(k(t,!0),e(document).scrollTop(V.position().top),clearInterval(n))},50):(k(t,!0),e(document).scrollTop(V.position().top)))}}function O(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var i,o,s,r,a,l,c=this.href.substr(0,this.href.indexOf("#")),d=location.href;if(-1!==location.href.indexOf("#")&&(d=location.href.substr(0,location.href.indexOf("#"))),c===d){i=escape(this.href.substr(this.href.indexOf("#")+1));try{o=e("#"+i+', a[name="'+i+'"]')}catch(u){return}o.length&&(s=o.closest(".jspScrollable"),r=s.data("jsp"),r.scrollToElement(o,!0),s[0].scrollIntoView&&(a=e(t).scrollTop(),l=o.offset().top,(a>l||l>a+e(t).height())&&s[0].scrollIntoView()),n.preventDefault())}}))}function H(){var e,t,n,i,o,s=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var a=r.originalEvent.touches[0];e=S(),t=N(),n=a.pageX,i=a.pageY,o=!1,s=!0}).bind("touchmove.jsp",function(r){if(s){var a=r.originalEvent.touches[0],l=it,c=et;return wt.scrollTo(e+n-a.pageX,t+i-a.pageY),o=o||Math.abs(n-a.pageX)>5||Math.abs(i-a.pageY)>5,l==it&&c==et}}).bind("touchend.jsp",function(){s=!1}).bind("click.jsp-touchclick",function(){return o?(o=!1,!1):void 0})}function B(){var e=N(),t=S();i.removeClass("jspScrollable").unbind(".jsp"),i.replaceWith(St.append(z.children())),St.scrollTop(e),St.scrollLeft(t),vt&&clearInterval(vt)}var q,z,F,W,V,X,U,Y,G,K,Q,J,Z,et,tt,nt,it,ot,st,rt,at,lt,ct,dt,ut,ht,ft,pt,mt,gt,vt,yt,bt,xt,wt=this,Ct=!0,Tt=!0,_t=!1,kt=!1,St=i.clone(!1,!1).empty(),Nt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";yt=i.css("paddingTop")+" "+i.css("paddingRight")+" "+i.css("paddingBottom")+" "+i.css("paddingLeft"),bt=(parseInt(i.css("paddingLeft"),10)||0)+(parseInt(i.css("paddingRight"),10)||0),e.extend(wt,{reinitialise:function(t){t=e.extend({},q,t),s(t)},scrollToElement:function(e,t,n){k(e,t,n)},scrollTo:function(e,t,n){_(e,n),T(t,n)},scrollToX:function(e,t){_(e,t)},scrollToY:function(e,t){T(e,t)},scrollToPercentX:function(e,t){_(e*(X-F),t)},scrollToPercentY:function(e,t){T(e*(U-W),t)},scrollBy:function(e,t,n){wt.scrollByX(e,n),wt.scrollByY(t,n)},scrollByX:function(e,t){var n=S()+Math[0>e?"floor":"ceil"](e),i=n/(X-F);b(i*nt,t)},scrollByY:function(e,t){var n=N()+Math[0>e?"floor":"ceil"](e),i=n/(U-W);v(i*Z,t)},positionDragX:function(e,t){b(e,t)},positionDragY:function(e,t){v(e,t)},animate:function(e,t,n,i){var o={};o[t]=n,e.animate(o,{duration:q.animateDuration,easing:q.animateEase,queue:!1,step:i})},getContentPositionX:function(){return S()},getContentPositionY:function(){return N()},getContentWidth:function(){return X},getContentHeight:function(){return U},getPercentScrolledX:function(){return S()/(X-F)},getPercentScrolledY:function(){return N()/(U-W)},getIsScrollableH:function(){return Q},getIsScrollableV:function(){return K},getContentPane:function(){return z},scrollToBottom:function(e){v(Z,e)},hijackInternalLinks:e.noop,destroy:function(){B()}}),s(o)}return i=e.extend({},e.fn.jScrollPane.defaults,i),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(i):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new o(t,i),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),$(function(){$(".with_tooltip").tooltip()});