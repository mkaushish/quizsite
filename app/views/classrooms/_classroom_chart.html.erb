<% @arr = [['%correct','Number of Students']]%>
<% @temp = []%>

<% @students.each do |student| %>
	<% pset_instance = problem_set_instances_problem_set(student, @problem_set.id) %>
	<% answers_stats = total_correct_wrong_problem_set_instance_answers(pset_instance) %>
	<% @total_answers = answers_stats[0] %>
	<% @correct_answers = answers_stats[1] %>
	<% @wrong_answers = answers_stats[2] %>
	<% if @total_answers == 0 %>
		<% @temp.push(-1) %>
	<% else %>
		<% @temp.push((@correct_answers*100)/(@total_answers)) %>
	<% end %>		
<% end %>	
<% @count1 = (@temp.select{|v| v>=90}).count %>
	<% @arr.push(["90-100%", @count1])%>
<% @count2 = ((@temp.select{|v| v>=80}).select{|v| v<90}).count %>	
	<% @arr.push(["80-90%", @count2])%>
<% @count3 = ((@temp.select{|v| v>=70}).select{|v| v<80}).count %>	
	<% @arr.push(["70-80%", @count3])%>
<% @count4 = ((@temp.select{|v| v>=60}).select{|v| v<70}).count %>	
	<% @arr.push(["60-70%", @count4])%>
<% @count5 = ((@temp.select{|v| v>=30}).select{|v| v<60}).count %>	
	<% @arr.push(["30-60%", @count5])%>
<% @count5 = ((@temp.select{|v| v>=0}).select{|v| v<30}).count %>	
	<% @arr.push(["0-30%", @count5])%>
<% @count6 = (@temp.select{|v| v<0}).count %>	
	<% @arr.push(["Haven't Attempted", @count6])%>

<div id="chart_div_2_class_pset" style="width: 500px; height: 500px;"><%= render 'shared/google_visual_piechart', :array => @arr, :div => "chart_div_2_class_pset", :title => "Students performance"  %></div>


<% @arr7 = [['Problem Types','Correct Percentage']]%>

<% @problem_set.problem_types.each do |problem_type|%>
	<% answers_stats = total_correct_wrong_problem_type_answers(problem_type) %>
	<% total_answers = answers_stats[0] %>
	<% correct_answers = answers_stats[1] %>
	<% wrong_answers = answers_stats[2] %>
	<% if total_answers > 0 %>
		<% @arr7.push([problem_type.name, (correct_answers*100)/(total_answers)]) %>
	<% end %>
<% end %>  

<div id="chart_div_3_class_pset" style="width: 900px; height: 500px;"><%= render 'shared/google_visual_barchart', :array => @arr7, :div => "chart_div_3_class_pset", :title => "Students performance", :vAxis_title => "Problem Types" %></div>