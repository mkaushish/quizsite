<% @arr = [['%correct','Number of Students']]%>
<% @temp = []%>

<% @students.each do |student| %>
	<% answers_stats = total_correct_wrong_answers(student) %>
	<% @total_answers = answers_stats[0] %>
	<% @correct_answers = answers_stats[1] %>
	<% @wrong_answers = answers_stats[2] %>
	<% if @total_answers == 0%>
		<% @temp.push(-1) %>
	<% else %>
		<% @temp.push((@correct_answers * 100) / (@total_answers)) %>
	<% end %>		
<% end %>

<% @count1 = (@temp.select{|v| v>=90}).count %>
	<% @arr.push(["90-100%", @count1])%>
<% @count2 = (@temp.select{|v| v>=80 and v<90}).count %>	
	<% @arr.push(["80-90%", @count2])%>
<% @count3 = (@temp.select{|v| v>=70 and v<80}).count %>	
	<% @arr.push(["70-80%", @count3])%>
<% @count4 = (@temp.select{|v| v>=60 and v<70}).count %>	
	<% @arr.push(["60-70%", @count4])%>
<% @count5 = (@temp.select{|v| v>=30 and v<60}).count %>	
	<% @arr.push(["30-60%", @count5])%>
<% @count5 = (@temp.select{|v| v>=0 and v<30}).count %>	
	<% @arr.push(["0-30%", @count5])%>
<% @count6 = (@temp.select{|v| v<0}).count %>	
	<% @arr.push(["Haven't Attempted", @count6])%>

<div id="chart_div_1_class" style="width: 900px; height: 500px;"><%= render 'shared/google_visual_piechart', :array => @arr, :div => "chart_div_1_class", :title => "Students performance" %></div>